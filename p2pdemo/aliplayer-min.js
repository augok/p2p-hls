!(function(e){"object"==typeof exports&&"undefined"!=typeof module?(module.exports=e()):"function"==typeof define&&define.amd?define([],e):(("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Aliplayer=e())})(function(){var define,module,exports;return(function i(n,o,a){function s(t,e){if(!o[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw((((e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND"),e));}(r=o[t]={exports:{}}),n[t][0].call(r.exports,function(e){return s(n[t][1][e]||e)},r,r.exports,i,n,o,a)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s})({1:[function(e,t,r){},{}],2:[function(y,r,i){!function(f){!function(){var e,t;(e=this),(t=function(){var i,c=Math;if(("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),!(i=!(i=!(i="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:i)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:i)&&void 0!==f&&f.crypto?f.crypto:i)&&"function"==typeof y))try{i=y("crypto")}catch(e){}var r=Object.create||function(e){return((t.prototype=e),(e=new t()),(t.prototype=null),e)};function t(){}var e={},n=(e.lib={}),o=(n.Base={extend:function(e){var t=r(this);return(e&&t.mixIn(e),(t.hasOwnProperty("init")&&this.init!==t.init)||(t.init=function(){t.$super.init.apply(this,arguments)}),((t.init.prototype=t).$super=this),t)},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}),u=(n.WordArray=o.extend({init:function(e,t){(e=this.words=e||[]),(this.sigBytes=null!=t?t:4*e.length)},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if((this.clamp(),i%4))for(var o=0;o<n;o++){var a=(r[o>>>2]>>>(24-(o%4)*8))&255;t[(i+o)>>>2]|=a<<(24-((i+o)%4)*8)}else for(var s=0;s<n;s+=4)t[(i+s)>>>2]=r[s>>>2];return(this.sigBytes+=n),this},clamp:function(){var e=this.words,t=this.sigBytes;(e[t>>>2]&=4294967295<<(32-(t%4)*8)),(e.length=c.ceil(t/4))},clone:function(){var e=o.clone.call(this);return(e.words=this.words.slice(0)),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push((function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.");})());return new u.init(t,e)}})),a=(e.enc={}),s=(a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=(t[n>>>2]>>>(24-(n%4)*8))&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<(24-(i%8)*4);return new u.init(r,t/2)}}),l=(a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=(t[n>>>2]>>>(24-(n%4)*8))&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<(24-(i%4)*8);return new u.init(r,t)}}),p=(a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data");}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}}),d=(n.BufferedBlockAlgorithm=o.extend({reset:function(){(this._data=new u.init()),(this._nDataBytes=0)},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),(this._nDataBytes+=e.sigBytes)},_process:function(e){var t,r=this._data,i=r.words,n=r.sigBytes,o=this.blockSize,a=n/(4*o),s=(a=e?c.ceil(a):c.max((0|a)-this._minBufferSize,0))*o,e=c.min(4*s,n);if(s){for(var l=0;l<s;l+=o)this._doProcessBlock(i,l);(t=i.splice(0,s)),(r.sigBytes-=e)}return new u.init(t,e)},clone:function(){var e=o.clone.call(this);return(e._data=this._data.clone()),e},_minBufferSize:0})),h=((n.Hasher=d.extend({cfg:o.extend(),init:function(e){(this.cfg=this.cfg.extend(e)),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new h.HMAC.init(r,t).finalize(e)}}})),(e.algo={}));return e}),"object"==typeof i?(r.exports=i=t()):"function"==typeof define&&define.amd?define([],t):(e.CryptoJS=t())}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:1}],3:[function(e,t,r){var i,n;(i=this),(n=function(e){var f;return((f=e.lib.WordArray),(e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=this._map,n=(e.clamp(),[]),o=0;o<r;o+=3)for(var a=(((t[o>>>2]>>>(24-(o%4)*8))&255)<<16)|(((t[(o+1)>>>2]>>>(24-((o+1)%4)*8))&255)<<8)|((t[(o+2)>>>2]>>>(24-((o+2)%4)*8))&255),s=0;s<4&&o+0.75*s<r;s++)n.push(i.charAt((a>>>(6*(3-s)))&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,r=this._map;if(!(i=this._reverseMap))for(var i=(this._reverseMap=[]),n=0;n<r.length;n++)i[r.charCodeAt(n)]=n;for(var o,a,s=r.charAt(64),l=(s&&-1!==(s=e.indexOf(s))&&(t=s),e),c=t,u=i,p=[],d=0,h=0;h<c;h++)h%4&&((o=u[l.charCodeAt(h-1)]<<((h%4)*2)),(a=u[l.charCodeAt(h)]>>>(6-(h%4)*2)),(p[d>>>2]|=(o|a)<<(24-(d%4)*8)),d++);return f.create(p,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}),e.enc.Base64)}),"object"==typeof r?(t.exports=r=n(e("./core"))):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":2}],4:[function(e,t,r){var i,n;(i=this),(n=function(e){return e.enc.Utf8}),"object"==typeof r?(t.exports=r=n(e("./core"))):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":2}],5:[function(e,t,r){var i,n;(i=this),(n=function(e){return e.HmacSHA1}),"object"==typeof r?(t.exports=r=n(e("./core"),e("./sha1"),e("./hmac"))):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(i.CryptoJS)},{"./core":2,"./hmac":6,"./sha1":7}],6:[function(e,t,r){var i,n;(i=this),(n=function(e){var t,s;(t=e.lib.Base),(s=e.enc.Utf8),(e.algo.HMAC=t.extend({init:function(e,t){(e=this._hasher=new e.init()),"string"==typeof t&&(t=s.parse(t));for(var r=e.blockSize,i=4*r,e=((t=t.sigBytes>i?e.finalize(t):t).clamp(),(this._oKey=t.clone())),t=(this._iKey=t.clone()),n=e.words,o=t.words,a=0;a<r;a++)(n[a]^=1549556828),(o[a]^=909522486);(e.sigBytes=t.sigBytes=i),this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}}))}),"object"==typeof r?(t.exports=r=n(e("./core"))):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":2}],7:[function(e,t,r){var i,n;(i=this),(n=function(e){var t,r,i,n,u;return((r=(t=e).lib),(i=r.WordArray),(n=r.Hasher),(r=t.algo),(u=[]),(r=r.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],l=0;l<80;l++){u[l]=l<16?0|e[t+l]:((c=u[l-3]^u[l-8]^u[l-14]^u[l-16])<<1)|(c>>>31);var c=((i<<5)|(i>>>27))+s+u[l];(c+=l<20?1518500249+((n&o)|(~n&a)):l<40?1859775393+(n^o^a):l<60?((n&o)|(n&a)|(o&a))-1894007588:(n^o^a)-899497514),(s=a),(a=o),(o=(n<<30)|(n>>>2)),(n=i),(i=c)}(r[0]=(r[0]+i)|0),(r[1]=(r[1]+n)|0),(r[2]=(r[2]+o)|0),(r[3]=(r[3]+a)|0),(r[4]=(r[4]+s)|0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return((t[i>>>5]|=128<<(24-(i%32))),(t[14+(((64+i)>>>9)<<4)]=Math.floor(r/4294967296)),(t[15+(((64+i)>>>9)<<4)]=r),(e.sigBytes=4*t.length),this._process(),this._hash)},clone:function(){var e=n.clone.call(this);return(e._hash=this._hash.clone()),e}})),(t.SHA1=n._createHelper(r)),(t.HmacSHA1=n._createHmacHelper(r)),e.SHA1)}),"object"==typeof r?(t.exports=r=n(e("./core"))):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":2}],8:[function(X,z,e){!function(G,W,K){!function(){!function(){"use strict";function c(e){return"function"==typeof e}var t,r,e=Array.isArray||function(e){return("[object Array]"===Object.prototype.toString.call(e))},a=e,i=0,s=function(e,t){(y[i]=e),(y[i+1]=t),2===(i+=2)&&(r?r(_):m())};var e="undefined"!=typeof window?window:void 0,n=e||{},n=n.MutationObserver||n.WebKitMutationObserver,o=void 0!==G&&"[object process]"==={}.toString.call(G),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){return function(){setTimeout(_,1)}}var p,d,h,f,y=new Array(1e3);function _(){for(var e=0;e<i;e+=2)(0,y[e])(y[e+1]),(y[e]=void 0),(y[e+1]=void 0);i=0}function g(){try{var e=X("vertx");return((t=e.runOnLoop||e.runOnContext),function(){t(_)})}catch(e){return u()}}function v(){}var m=o?((f=G.nextTick),(o=G.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/)),Array.isArray(o)&&"0"===o[1]&&"10"===o[2]&&(f=K),function(){f(_)}):n?((d=0),(o=new n(_)),(h=document.createTextNode("")),o.observe(h,{characterData:!0}),function(){h.data=d=++d%2}):l?(((p=new MessageChannel()).port1.onmessage=_),function(){p.port2.postMessage(0)}):(void 0===e&&"function"==typeof X?g:u)(),S=void 0,b=1,T=2,E=new I();function M(e,i,n){s(function(t){var r=!1,e=(function(e,t,r,i){try{e.call(t,r,i)}catch(e){return e}})(n,i,function(e){r||((r=!0),(i!==e?w:x)(t,e))},function(e){r||((r=!0),P(t,e))},t._label);!r&&e&&((r=!0),P(t,e))},e)}function H(e,t){var r,i;t.constructor===e.constructor?((r=e),(i=t)._state===b?x(r,i._result):i._state===T?P(r,i._result):k(i,void 0,function(e){w(r,e)},function(e){P(r,e)})):(i=(function(e){try{return e.then}catch(e){return(E.error=e),E}})(t))===E?P(e,E.error):void 0!==i&&c(i)?M(e,t,i):x(e,t)}function w(e,t){var r;e===t?P(e,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(r=t)||("object"==typeof r&&null!==r)?H:x)(e,t)}function U(e){e._onerror&&e._onerror(e._result),C(e)}function x(e,t){e._state===S&&((e._result=t),(e._state=b),0!==e._subscribers.length)&&s(C,e)}function P(e,t){e._state===S&&((e._state=T),(e._result=t),s(U,e))}function k(e,t,r,i){var n=e._subscribers,o=n.length;(e._onerror=null),(n[o]=t),(n[o+b]=r),(n[o+T]=i),0===o&&e._state&&s(C,e)}function C(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i,n,o=e._result,a=0;a<t.length;a+=3)(i=t[a]),(n=t[a+r]),i?R(r,i,n,o):n(o);e._subscribers.length=0}}function I(){this.error=null}var L=new I();function R(e,t,r,i){var n,o,a,s,l=c(r);if(l){if(((n=(function(e,t){try{return e(t)}catch(e){return(L.error=e),L}})(r,i))===L?((s=!0),(o=n.error),(n=null)):(a=!0),t===n))return void P(t,new TypeError("A promises callback cannot return that same promise."))}else(n=i),(a=!0);t._state===S&&(l&&a?w(t,n):s?P(t,o):e===b?x(t,n):e===T&&P(t,n))}function A(e,t){var r=this;(r._instanceConstructor=e),(r.promise=new e(v)),r._validateInput(t)?((r._input=t),(r.length=t.length),(r._remaining=t.length),r._init(),(0!==r.length&&((r.length=r.length||0),r._enumerate(),0!==r._remaining))||x(r.promise,r._result)):P(r.promise,r._validationError())}(A.prototype._validateInput=function(e){return a(e)}),(A.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")}),(A.prototype._init=function(){this._result=new Array(this.length)});var F=A;(A.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,i=0;t._state===S&&i<e;i++)this._eachEntry(r[i],i)}),(A.prototype._eachEntry=function(e,t){var r,i=this,n=i._instanceConstructor;"object"==typeof(r=e)&&null!==r?e.constructor===n&&e._state!==S?((e._onerror=null),i._settledAt(e._state,t,e._result)):i._willSettleAt(n.resolve(e),t):(i._remaining--,(i._result[t]=e))}),(A.prototype._settledAt=function(e,t,r){var i=this,n=i.promise;n._state===S&&(i._remaining--,e===T?P(n,r):(i._result[t]=r)),0===i._remaining&&x(n,i._result)}),(A.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){r._settledAt(b,t,e)},function(e){r._settledAt(T,t,e)})});function B(e){var t=new this(v);if(a(e))for(var r=e.length,i=0;t._state===S&&i<r;i++)k(this.resolve(e[i]),void 0,n,o);else P(t,new TypeError("You must pass an array to race."));return t;function n(e){w(t,e)}function o(e){P(t,e)}}function j(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(w((t=new this(v)),e),t)}function V(e){var t=new this(v);return P(t,e),t}var q=0;var D=O;function O(e){if(((this._id=q++),(this._state=void 0),(this._result=void 0),(this._subscribers=[]),v!==e)){if(!c(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof O))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e(function(e){w(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}}(O.all=function(e){return new F(this,e).promise}),(O.race=B),(O.resolve=j),(O.reject=V),(O._setScheduler=function(e){r=e}),(O._setAsap=function(e){s=e}),(O._asap=s),(O.prototype={constructor:O,then:function(e,t){var r,i,n,o=this._state;return(o===b&&!e)||(o===T&&!t)?this:((r=new this.constructor(v)),(i=this._result),o?((n=arguments[o-1]),s(function(){R(o,r,n,i)})):k(this,r,e,t),r)},catch:function(e){return this.then(null,e)}});var n=function(){var e;if(void 0!==W)e=W;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment");}var t=e.Promise;(t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast)||(e.Promise=D)},N={Promise:D,polyfill:n};"function"==typeof define&&define.amd?define(function(){return N}):void 0!==z&&z.exports?(z.exports=N):void 0!==this&&(this.ES6Promise=N),n()}.call(this)}.call(this)}.call(this,X("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},X("timers").setImmediate)},{_process:9,timers:10}],9:[function(e,t,r){var i,n,t=(t.exports={});function o(){throw new Error("setTimeout has not been defined");}function a(){throw new Error("clearTimeout has not been defined");}try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var l,c=[],u=!1,p=-1;function d(){u&&l&&((u=!1),l.length?(c=l.concat(c)):(p=-1),c.length)&&h()}function h(){if(!u){for(var e=s(d),t=((u=!0),c.length);t;){for(l=c,c=[];++p<t;)l&&l[p].run();(p=-1),(t=c.length)}(l=null),(u=!1),!(function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return(n=clearTimeout)(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}})(e)}}function f(e,t){(this.fun=e),(this.array=t)}function y(){}(t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||s(h)}),(f.prototype.run=function(){this.fun.apply(null,this.array)}),(t.title="browser"),(t.browser=!0),(t.env={}),(t.argv=[]),(t.version=""),(t.versions={}),(t.on=y),(t.addListener=y),(t.once=y),(t.off=y),(t.removeListener=y),(t.removeAllListeners=y),(t.emit=y),(t.prependListener=y),(t.prependOnceListener=y),(t.listeners=function(e){return[]}),(t.binding=function(e){throw new Error("process.binding is not supported");}),(t.cwd=function(){return"/"}),(t.chdir=function(e){throw new Error("process.chdir is not supported");}),(t.umask=function(){return 0})},{}],10:[function(l,e,c){!function(r,s){!function(){var i=l("process/browser.js").nextTick,e=Function.prototype.apply,n=Array.prototype.slice,o={},a=0;function t(e,t){(this._id=e),(this._clearFn=t)}(c.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)}),(c.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)}),(c.clearTimeout=c.clearInterval=function(e){e.close()}),(t.prototype.unref=t.prototype.ref=function(){}),(t.prototype.close=function(){this._clearFn.call(window,this._id)}),(c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),(e._idleTimeout=t)}),(c.unenroll=function(e){clearTimeout(e._idleTimeoutId),(e._idleTimeout=-1)}),(c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))}),(c.setImmediate="function"==typeof r?r:function(e){var t=a++,r=!(arguments.length<2)&&n.call(arguments,1);return((o[t]=!0),i(function(){o[t]&&(r?e.apply(null,r):e.call(null),c.clearImmediate(t))}),t)}),(c.clearImmediate="function"==typeof s?s:function(e){delete o[e]})}.call(this)}.call(this,l("timers").setImmediate,l("timers").clearImmediate)},{"process/browser.js":9,timers:10}],11:[function(e,t,r){var i=e("../ui/component"),n=(e("../lib/util"),e("../lib/dom")),o=e("../lib/event"),a=(e("../lib/ua"),e("../lang/index")),s=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),(this.className=t.className||"prism-auto-stream-selector"),this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+a.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+a.get("Cancel_Text")+"</a></div>"),e)},bindEvent:function(){var i=this,e=(i._player.on(s.Private.AutoStreamShow,function(e){var t,r=document.querySelector("#"+i.getId()+" .tip-text");i._player._getLowerQualityLevel&&(t=i._player._getLowerQualityLevel())&&((i._switchUrl=t),(r.innerText=a.get("Auto_Stream_Tip_Text").replace("$$",t.item.desc)),n.css(i.el(),"display","block"))}),i._player.on(s.Private.AutoStreamHide,function(e){document.querySelector("#"+i.getId()+" .tip-text");n.css(i.el(),"display","none")}),document.querySelector("#"+i.getId()+" .prism-button-ok")),e=(o.on(e,"click",function(){i._player._changeStream&&i._switchUrl&&(i._player._changeStream(i._switchUrl.index,a.get("Quality_Change_Text")),i._player.trigger(s.Private.SettingListHide)),n.css(i.el(),"display","none")}),document.querySelector("#"+i.getId()+" .prism-button-cancel"));o.on(e,"click",function(){n.css(i.el(),"display","none"),i._player.trigger(s.Private.SettingListHide)})}});t.exports=e},{"../lang/index":23,"../lib/dom":32,"../lib/event":33,"../lib/ua":49,"../lib/util":51,"../player/base/event/eventtype":70,"../ui/component":130}],12:[function(e,t,r){var i=e("../ui/component"),a=e("../lib/dom"),n=e("../lib/event"),o=e("../lib/ua"),s=e("../lib/function"),l=(e("../lang/index"),e("../lib/util")),c=e("../config"),u=e("../lib/playerutil"),p=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),(this.className=t.className||"prism-liveshift-progress"),this.addClass(this.className),(this._liveshiftService=e._liveshiftService)},createEl:function(){var e=i.prototype.createEl.call(this);return((e.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>'),e)},bindEvent:function(){function t(e){r._progressDown=e}var r=this,e=((this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded")),(this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played")),(this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor")),(this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time")),(this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar")),(this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator")),(this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift")),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),i="//"+c.domain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain?(i=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png"):c.domain?-1<c.domain.indexOf("localhost")&&(i="//"+c.domain+"/build/skins/default/img/dragcursor.png"):(i=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png":"de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png"),(e.src=i),n.on(this.cursorNode,"mousedown",function(e){r._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){r._onMouseDown(e)}),n.on(this.progressNode,"mousemove",function(e){r._progressMove(e)}),n.on(this.progressNode,"touchmove",function(e){r._progressMove(e)});n.on(this.progressNode,"mousedown",function(e){t(!0)}),n.on(this.progressNode,"touchstart",function(e){t(!0)}),n.on(this.progressNode,"mouseup",function(e){t(!1)}),n.on(this.progressNode,"touchend",function(e){t(!1)}),n.on(this._el,"click",function(e){r._onMouseClick(e)}),this._player.on(p.Private.HideProgress,function(e){r._hideProgress(e)}),this._player.on(p.Private.CancelHideProgress,function(e){r._cancelHideProgress(e)}),this._player.on(p.Private.ShowBar,function(){r._updateLayout()}),n.on(this.progressNode,p.Private.MouseOver,function(e){r._onMouseOver(e)}),n.on(this.progressNode,p.Private.MouseOut,function(e){r._onMouseOut(e)}),(this.bindTimeupdate=s.bind(this,this._onTimeupdate)),this._player.on(p.Player.TimeUpdate,this.bindTimeupdate),u.isLiveShift(this._player._options)&&r._liveshiftService.start(6e4,function(e){e={mediaId:r._player._options.vid||"",error_code:e.Code,error_msg:e.Message};r._player.logError(e),r._player.trigger(p.Player.Error,e)}),this._player.on(p.Private.LiveShiftQueryCompleted,function(){r._updateSeperator(),r._updateLayout()}),this._player.on(p.Private.LiveShiftSwitchToLive,function(){r._updateCursorPosition()}),this._player.on(p.Player.Pause,function(){r._liveshiftService.stop()}),o.IS_IPAD?(this.interval=setInterval(function(){r._onProgress()},500)):this._player.on(p.Video.Progress,function(){r._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var e=this.seperatorNode.offsetWidth,t=this.el().offsetWidth,r=t-e;0!=e&&0!=r&&(a.css(this.progressNode,"width",(100*(r-10))/t+"%"),a.css(this.seperatorNode,"right",-1*(e+10)+"px"))},_progressMove:function(e){var t=this._getSeconds(e),r=this._liveshiftService.availableLiveShiftTime,t=((this.timeNode.innerText="-"+l.formatTime(r-t)),r?t/r:0),r=1-this.timeNode.clientWidth/this.el().clientWidth,i=(r<t&&(t=r),this.timeNode&&(a.css(this.timeNode,"display","block"),a.css(this.timeNode,"left",100*t+"%")),this);!o.IS_PC&&i._progressDown&&(i.progressSeekTimer&&clearTimeout(i.progressSeekTimer),(i.progressSeekTimer=setTimeout(function(){i._progressDown||i._onMouseClick(e)},200)))},_hideProgress:function(e){n.off(this.cursorNode,"mousedown"),n.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;n.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return(t="function"==typeof this._player.canSeekable?this._player.canSeekable(e):t)},_onMouseOver:function(e){this._updateCursorPosition(this._getCurrentTime()),a.css(this.timeNode,"display","block")},_onMouseOut:function(e){a.css(this.timeNode,"display","none")},_getSeconds:function(e){for(var t=this.el().offsetLeft,r=this.el();(r=r.offsetParent);){var i=a.getTranslateX(r);t+=r.offsetLeft+i}var e=(e.touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e).pageX,n=this.progressNode.offsetWidth,o=this._liveshiftService.availableLiveShiftTime;return(sec=(sec=(sec=o?((e-t)/n)*o:0)<0?0:sec)>o?o:sec)},_onMouseClick:function(e){var t=this,e=this._getSeconds(e),r=this._liveshiftService.availableLiveShiftTime,i=r-e,n=this._player._options,r=(i<=n.liveShiftMinOffset&&(e=r-(i=n.liveShiftMinOffset)),this._player.trigger(p.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(i)),n=u.isHls(t._player._options.source);t._player._loadByUrlInner(r,e,!0),t._player.trigger(p.Private.Play_Btn_Hide),(t._liveshiftService.seekTime=e),t._player.trigger(p.Private.EndStart,{toTime:e}),t._updateProgressBar(this.playedNode,e),t._updateCursorPosition(e),setTimeout(function(){t._progressDown||t._onMouseOut()},500),n&&setTimeout(function(){t._player.play()})},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.trigger(p.Private.SeekStart,{fromTime:this._getCurrentTime()}),n.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"mouseup",function(e){t._onMouseUp(e)}),n.on(this.controlNode,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),n.off(this.controlNode,"mousemove"),n.off(this.controlNode,"touchmove"),n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.controlNode,"mouseup"),n.off(this.controlNode,"touchend"),this._onMouseClick(e)},_onMouseMove:function(e){e.preventDefault()},_onTimeupdate:function(e){this._player._seeking||(o.IS_ANDROID&&o.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&((this._hasResetFlagUC=!1),(this._basePtsUC=this._player.getCurrentTime())),this._player.getCurrentTime()||((this._hasResetFlagUC=!0),(this._basePtsUC=0))),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(p.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var e=this._liveshiftService.seekTime,e=(-1==e&&(e=0),this._player.getCurrentTime()+e);return(o.IS_ANDROID&&o.IS_UC&&(e-=this._basePtsUC||0),e)},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r,i;1!=this._player._switchSourcing&&((i=0),-1==this._liveshiftService.seekTime?(i=1):1<(i=(r=this._liveshiftService.availableLiveShiftTime)?t/r:0)&&(this._liveshiftService.seekTime=-(i=1)),this.liveShiftStartDisplay,e)&&a.css(e,"width",100*i+"%")},_updateCursorPosition:function(e){var t,r,i,n;this._player.el()&&1!=this._player._switchSourcing&&((i=0),(n=1),(t=this._player.el().clientWidth),-1==this._liveshiftService.seekTime?(i=1):1<(i=(r=this._liveshiftService.availableLiveShiftTime)?e/r:0)&&(this._liveshiftService.seekTime=-1),0!=t&&((n=1-(e=10/t)),(i-=e)),(i=i<0?0:i),this.cursorNode)&&(n<i?(a.css(this.cursorNode,"right","0px"),a.css(this.cursorNode,"left","auto")):(a.css(this.cursorNode,"right","auto"),a.css(this.cursorNode,"left",100*i+"%")))}});t.exports=e},{"../config":14,"../lang/index":23,"../lib/dom":32,"../lib/event":33,"../lib/function":35,"../lib/playerutil":46,"../lib/ua":49,"../lib/util":51,"../player/base/event/eventtype":70,"../ui/component":130}],13:[function(e,t,r){var i=e("../ui/component"),n=e("../lib/util"),o=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),(this.className=t.className||"prism-live-time-display"),this.addClass(this.className),(this._liveshiftService=e._liveshiftService)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>'),e)},bindEvent:function(){var i=this;this._player.on(o.Video.TimeUpdate,function(){var e,t=i._liveshiftService,r=document.querySelector("#"+i.id()+" .current-time");t.liveShiftStartDisplay&&t.availableLiveShiftTime>t.seekTime&&-1!=t.seekTime?((e=i._liveshiftService.getBaseTime()),(e=n.formatTime(e+i._player.getCurrentTime())),(r.innerText=e)):t.currentTimeDisplay&&(r.innerText=t.currentTimeDisplay)}),this._player.on(o.Private.LiveShiftQueryCompleted,function(){i.updateTime()})},updateTime:function(){(document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay),(document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay)}});t.exports=e},{"../lib/util":51,"../player/base/event/eventtype":70,"../ui/component":130}],14:[function(e,t,r){t.exports={domain:"g.alicdn.com",flashVersion:"2.8.2",h5Version:"2.15.2",rtsVersion:"2.2.6",cityBrain:!0,logDuration:10,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track"}},{}],15:[function(e,t,r){var i,n,o,a;e("./lib/patch-ssr").isSSR||(e("./lang/index").load(),(i=e("./player/adaptivePlayer")),(n=e("./lib/reloadInstanceUtil")),(o=e("./lib/componentutil")),(a=e("./config")),((e=function(e,t){e.useH5Prism=!0;e=i.create(e,t);return n.storeUserEvents(e),e}).getVersion=function(){return a.h5Version}),o.register(e),((o=window.Aliplayer=e).players={}),(e.reloadInstance=n.reloadInstance),"undefined"==typeof Uint8Array)||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),(t.exports=o)},{"./config":14,"./lang/index":23,"./lib/componentutil":27,"./lib/patch-ssr":44,"./lib/reloadInstanceUtil":47,"./player/adaptivePlayer":66}],16:[function(e,t,r){var i=e("../player/base/event/eventtype"),n=e("../lib/constants"),o=e("../lang/index");t.exports=(function(){function e(e){var t=this;void 0===e&&(e={}),(this.interval=3e3),(this.player=null),(this.timer=null),(this.playerInitDone=!1),(this.player=e.player),this.player.on(i.Player.Init,function(){t.playerInitDone=!0})}var t=e.prototype;return((t.start=function(){var e=this;this.stop(),(this.player&&this.player._options&&!this.player._options.preventRecord)||(this.timer=setInterval(function(){e.playerInitDone&&e.check()},this.interval))}),(t.stop=function(){this.clearTimer()}),(t.check=function(){var e=!1,t=this.detectPrototype()||this.detectNativeFn();return((t||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",t),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),(e=!0)),e)}),(t.dispose=function(){this.stop(),(this.player=null),(this.playerInitDone=!1)}),(t.clearTimer=function(){this.timer&&(clearInterval(this.timer),(this.timer=null))}),(t.displayError=function(){var e=this.player,t={mediaId:e._options&&e._options.vid?e._options.vid:"",error_code:n.ErrorCode.RecordNotAllowed,error_msg:o.get("Record_Not_Allowed")};e.logError(t),e.trigger(i.Player.Error,t)}),(t.setupErrorStyle=function(){this.hideRetry();var e=document.querySelector(".prism-ErrorMessage");e&&((e.style.opacity="1"),(e.style.visibility="visible"))}),(t.hideRetry=function(){var e=document.querySelector("#"+this.player.id()+" .prism-button-retry");e&&(e.style.display="none")}),(t.destroyVideo=function(){this.player._drm&&this.player.destroy();var e=this.player.tag;e&&e.parentNode&&e.parentNode.removeChild(e)}),(t.detectPrototype=function(){var e=window,t=e.MediaSource;return(t&&e.EventTarget&&t.__proto__.__proto__===e.EventTarget)}),(t.detectNativeFn=function(){var e=window.MediaSource;return e&&!this.isNativeFn(e.prototype.addSourceBuffer)}),(t.isNativeFn=function(e){var t=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),r=typeof e;return(null!==e&&("object"==r||"function"==r)&&t.test(e))}),(t.detectDeperateVideo=function(){var e=this.player.tag;if(e)return-1!==(e.getAttribute("id")||"").indexOf("360")}),e)})()},{"../lang/index":23,"../lib/constants":28,"../player/base/event/eventtype":70}],17:[function(e,t,r){var i=e("../lib/oo"),n=e("../lang/index"),e=i.extend({init:function(e,t){(this._player=e),(this._options=e.options())}}),o=((e.prototype.handle=function(e){var t,r;this._options.autoPlayDelay&&((t=(t=this._options.autoPlayDelayDisplayText)||n.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay)),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),((r=this)._timeHandler=setTimeout(function(){r._player.trigger("info_hide"),(r._options.autoPlayDelay=0),e&&e()},1e3*this._options.autoPlayDelay)),this._player.on("play",function(){o(r)}),this._player.on("pause",function(){o(r)}))}),(e.prototype.dispose=function(){o(this),(this._player=null)}),function(e){e._timeHandler&&(clearTimeout(e._timeHandler),(e._timeHandler=null))});t.exports=e},{"../lang/index":23,"../lib/oo":43}],18:[function(e,t,r){var i=e("../lib/event"),n=e("../lib/data"),o=e("../player/base/event/eventtype"),a=n.guid(),e={};function s(e){var t,r,i=this._options.keyFastForwardStep,n=this._options.isLive;switch(e&&e.keyCode){case 39:n||(e.preventDefault(),(t=this.getDuration()),(r=this.getCurrentTime()+i),this.seek((r=t<r?t:r)),l.call(this,r),c.call(this,r));break;case 37:n||(e.preventDefault(),(r=this.getCurrentTime()-i),this.seek((r=r<0?0:r)),l.call(this,r),c.call(this,r));break;case 38:e.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+0.1).toFixed(1)));break;case 40:e.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-0.1).toFixed(1)));break;case 32:if(n)return;e.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function l(e){this.trigger(o.Private.UpdateProgress,{targetTime:e})}function c(e){this.trigger(o.Private.UpdateCursorPosition,{targetTime:e})}(e.init=function(){var e;this._options.keyShortCuts&&(((e=s.bind(this)).guid=a),i.on(window.document,"keydown",e))}),(e.dispose=function(){var e;this._options.keyShortCuts&&(((e=s.bind(this)).guid=a),i.off(window.document,"keydown",e))}),(t.exports=e)},{"../lib/data":30,"../lib/event":33,"../player/base/event/eventtype":70}],19:[function(e,t,r){var o="undefined"==typeof Promise?e("es6-promise").Promise:Promise,a=e("../lib/constants").LicenseResultCode,s=e("../lib/io"),i=(((e={})[a.ResourceIncorrect]="license resource init error"),(e[a.LicenseKeyInvalid]="invalid license key"),(e[a.DomainInvalid]="invalid domain"),(e[a.CertInvalid]="invalid cert content"),(e[a.NotFound]="license not found"),(e[a.Expired]="license expired"),e),e=(function(){function e(){}return((e.getLicense=function(r,i){var n=this;return this.isWasmSupported()?i?r?this.instance?o.resolve(this.instance):new o(function(e,t){n.resolvers.push(e),n.rejecters.push(t),1===n.resolvers.length&&s.loadJS("https://g.alicdn.com/video-cloud-fe/websdk-license/0.1.0/index.js",function(){window.loadLicenseSource().then(function(e){return e.init(2,r,i).then(function(t){(n.instance=t),n.resolvers.forEach(function(e){e(t)})}).catch(function(e){console.error(e),n.rejecters.forEach(function(e){e(a.CertInvalid)})})}).catch(function(){n.rejecters.forEach(function(e){e(a.ResourceIncorrect)})}).finally(function(){(n.resolvers=[]),(n.rejecters=[])})},function(){n.rejecters.forEach(function(e){e(a.ResourceIncorrect)})})}):o.reject(a.DomainInvalid):o.reject(a.LicenseKeyInvalid):o.reject(a.WasmNotSupported)}),(e.isWasmSupported=function(){return("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate)}),(e.logError=function(e){i[e]&&console.error(i[e])}),e)})();(e.instance=void 0),(e.resolvers=[]),(e.rejecters=[]),(t.exports=e)},{"../lib/constants":28,"../lib/io":40,"es6-promise":8}],20:[function(e,t,r){t.exports=t.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Snapshot:"Snapshot",Detection_Text:"Diagnosis",Play_DateTime:"Time",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switch to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_Server_Network_NotSupport_Text:"Network error or \xa0the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format of video is not supported by\xa0h5 player\uff0cplease use flash player",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4\xa0is not supported by this explorer",Error_Not_Support_encrypt_Text:"Play the encrypted video,please set encryptType to 1",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls\uff0cplease close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed,please make sure domain configuration https certificate or enable cors",Error_Load_M3U8_Timeout_Text:"Timeout error occored\xa0when the\xa0m3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Waiting_Timeout_Text:"Buffering timeout,\xa0please close or refresh",Error_Invalidate_Source:"Video shoud be mp4\u3001mp3\u3001m3u8\u3001mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Region_Block_Text:"This video is not available in your region",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"please make sure domain configuration https certificate or enable cors",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv\u3001rmtp can't be supported on mobile\uff0cplease use m3u8",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switch to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"iOS desn't support Vod's private encription video, please use HLS standard encription or DRM",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_No_Authorization:"Aliplayer without Authorization",License_Click_To_Apply:"Click to apply",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"ms received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],21:[function(e,t,r){t.exports=t.exports={OD:"OD",LD:"360p",FD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Forbidden_Text:"Internal information is strictly forbidden to outsider",Refresh:"Refresh",Diagnosis:"Diagnosis",Live_Finished:"Live has finished, thanks for watching",Play:"Play",Pause:"Pause",Snapshot:"Snapshot",Replay:"Replay",Live:"Live",Encrypt:"Encrypt",Sound:"Sound",Fullscreen:"Full Screen",Exist_Fullscreen:"Exit Full-screen",Resolution:"Resolution",Next:"Next Video",Brightness:"Brightness",Default:"Default",Contrast:"Contrast",Titles_Credits:"Titles\xa0and\xa0Credits",Skip_Titles:"Skip Titles",Skip_Credits:"Skip Credits",Not_Support_Out_Site:"The video is not supported for outside website, please watch it by TaoTV",Watch_Now:"Watch now",Network_Error:"Network is unreachable, please try to refresh",Video_Error:"Playing a video error,\xa0please try to refresh",Decode_Error:"Data decoding\xa0error",Live_Not_Start:"Live has not started, to be expected",Live_Loading:"Live information is loading,\xa0please try to refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Live_End:"Live has finished",Live_Abrot:"Signal aborted,\xa0please try to refresh",Corss_Domain_Error:"Please ensure your domain has obtained IPC license and combined CNAME, \r\n or to set\xa0\xa0cross-domain accessing available",Url_Timeout_Error:"The video url is timeout,\xa0please try to refresh",Connetction_Error:"Sorry\uff0cthe video cannot play because of connection error, please try to watch other videos",Fetch_MTS_Error:"Fetching video list failed, please ensure",Token_Expired_Error:"Requesting open api failed, please ensure token expired or not",Video_Lists_Empty_Error:"The video list is empty, please check the format of video",Encrypted_Failed_Error:"Fetching encrypted file failed, please check the permission of player",Fetch_Failed_Permission_Error:"Fetching video list failed, please check the permission of player",Invalidate_Param_Error:"No video url, please check the parameters",AutoPlayDelayDisplayText:"Play in $$ seconds",Fetch_MTS_NOT_NotStream_Error:"The vid has no stream to play",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Open_Html_By_File:"Html page should be on the server",Cant_Use_Flash_On_Mobile:"Mobile doesn't support flash player\uff0cplease use h5 player",Flash_Not_Ready:"Flash Player plugin hasn't been installed <a href='https://www.flash.cn/' target='_blank'>install plugin</a>, or check if disable Flash plugin"}},{}],22:[function(e,t,r){t.exports=t.exports={OD:"\u539f\u753b",FD:"\u6d41\u7545",LD:"\u6807\u6e05",SD:"\u9ad8\u6e05",HD:"\u8d85\u6e05","2K":"2K","4K":"4K",FHD:"\u5168\u9ad8\u6e05",XLD:"\u6781\u901f",SQ:"\u666e\u901a\u97f3\u8d28",HQ:"\u9ad8\u97f3\u8d28",Forbidden_Text:"\u5185\u90e8\u4fe1\u606f\uff0c\u4e25\u7981\u5916\u4f20",Refresh:"\u5237\u65b0",Diagnosis:"\u8bca\u65ad",Live_Finished:"\u76f4\u64ad\u5df2\u7ed3\u675f,\u8c22\u8c22\u89c2\u770b",Play:"\u64ad\u653e",Pause:"\u6682\u505c",Snapshot:"\u622a\u56fe",Replay:"\u91cd\u64ad",Live:"\u76f4\u64ad",Encrypt:"\u52a0\u5bc6",Sound:"\u58f0\u97f3",Fullscreen:"\u5168\u5c4f",Exist_Fullscreen:"\u9000\u51fa\u5168\u5c4f",Resolution:"\u6e05\u6670\u5ea6",Next:"\u4e0b\u4e00\u96c6",Brightness:"\u4eae\u5ea6",Default:"\u9ed8\u8ba4",Contrast:"\u5bf9\u6bd4\u5ea6",Titles_Credits:"\u7247\u5934\u7247\u5c3e",Skip_Titles:"\u8df3\u8fc7\u7247\u5934",Skip_Credits:"\u8df3\u8fc7\u7247\u5c3e",Not_Support_Out_Site:"\u8be5\u89c6\u9891\u6682\u4e0d\u652f\u6301\u7ad9\u5916\u64ad\u653e\uff0c\u8bf7\u5230\u6dd8TV\u89c2\u770b",Watch_Now:"\u7acb\u5373\u89c2\u770b",Network_Error:"\u7f51\u7edc\u65e0\u6cd5\u8fde\u63a5\uff0c\u8bf7\u5c1d\u8bd5\u68c0\u67e5\u7f51\u7edc\u540e\u5237\u65b0\u8bd5\u8bd5",Video_Error:"\u89c6\u9891\u64ad\u653e\u5f02\u5e38\uff0c\u8bf7\u5237\u65b0\u8bd5\u8bd5",Decode_Error:"\u64ad\u653e\u6570\u636e\u89e3\u7801\u9519\u8bef",Live_Not_Start:"\u4eb2\uff0c\u76f4\u64ad\u8fd8\u672a\u5f00\u59cb\u54e6\uff0c\u656c\u8bf7\u671f\u5f85",Live_Loading:"\u76f4\u64ad\u4fe1\u606f\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u5237\u65b0\u8bd5\u8bd5",Live_End:"\u4eb2\uff0c\u76f4\u64ad\u5df2\u7ed3\u675f",Live_Abrot:"\u5f53\u524d\u76f4\u64ad\u4fe1\u53f7\u4e2d\u65ad\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",Corss_Domain_Error:"\u8bf7\u786e\u8ba4\u60a8\u7684\u57df\u540d\u5df2\u5b8c\u6210\u5907\u6848\u548cCNAME\u7ed1\u5b9a\uff0c\r\n\u5e76\u5904\u4e8e\u542f\u7528\u72b6\u6001\uff0c\u6216\u8d44\u6e90\u5141\u8bb8\u8de8\u8d8a\u8bbf\u95ee",Url_Timeout_Error:"\u60a8\u6240\u89c2\u770b\u7684\u89c6\u9891\u5730\u5740\u8fde\u63a5\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0\u540e\u91cd\u8bd5",Connetction_Error:"\u62b1\u6b49,\u8be5\u89c6\u9891\u7531\u4e8e\u8fde\u63a5\u9519\u8bef\u6682\u65f6\u4e0d\u80fd\u64ad\u653e,\u8bf7\u89c2\u770b\u5176\u5b83\u89c6\u9891",Fetch_MTS_Error:"\u83b7\u53d6\u89c6\u9891\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4",Token_Expired_Error:"\u8bf7\u6c42\u63a5\u53e3\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4Token\u662f\u5426\u8fc7\u671f",Video_Lists_Empty_Error:"\u83b7\u53d6\u89c6\u9891\u5217\u8868\u4e3a\u7a7a\uff0c\u8bf7\u786e\u8ba4\u64ad\u653e\u6570\u636e\u4e0e\u683c\u5f0f",Encrypted_Failed_Error:"\u83b7\u53d6\u89c6\u9891\u52a0\u5bc6\u79d8\u94a5\u9519\u8bef\uff0c\u8bf7\u786e\u8ba4\u64ad\u653e\u6743\u9650",Fetch_Failed_Permission_Error:"\u83b7\u53d6\u89c6\u9891\u5217\u8868\u5931\u8d25\uff0c\u8bf7\u786e\u8ba4\u64ad\u653e\u6743\u9650",Invalidate_Param_Error:"\u65e0\u8f93\u5165\u89c6\u9891\uff0c\u8bf7\u786e\u8ba4\u8f93\u5165\u53c2\u6570",AutoPlayDelayDisplayText:"$$\u79d2\u4ee5\u540e\u5f00\u59cb\u64ad\u653e",Fetch_MTS_NOT_NotStream_Error:"\u6b64vid\u6ca1\u6709\u53ef\u64ad\u653e\u89c6\u9891",Cancel_Text:"\u53d6\u6d88",OK_Text:"\u786e\u8ba4",Auto_Stream_Tip_Text:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u662f\u5426\u5207\u6362\u5230$$",Fetch_Playauth_Error:"\u83b7\u53d6\u64ad\u653e\u51ed\u8bc1\u51fa\u9519\u5566\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Open_Html_By_File:"\u4e0d\u80fd\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u6253\u5f00html\u6587\u4ef6\uff0c\u8bf7\u90e8\u7f72\u5230\u670d\u52a1\u7aef",Cant_Use_Flash_On_Mobile:"\u79fb\u52a8\u7aef\u4e0d\u652f\u6301Flash\u64ad\u653e\u5668\uff0c\u8bf7\u4f7f\u7528h5\u64ad\u653e\u5668",Flash_Not_Ready:"Flash Player\u63d2\u4ef6\u672a\u5b89\u88c5<a href='https://www.flash.cn/' target='_blank'>\u5b89\u88c5\u63d2\u4ef6</a>\uff0c\u5982\u679c\u5df2\u7ecf\u5b89\u88c5\u8bf7\u68c0\u67e5\u662f\u5426\u88ab\u7981\u7528"}},{}],23:[function(o,e,t){function n(){var e;return((void 0!==window[l]&&window[l])||((e=(e=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<e.indexOf("zh")?"zh-cn":"en-us"),(window[l]=e)),window[l])}function a(e,t){var r=p(e),i="",n=u(),i="flash"==e?"en-us"==n?o("./flash/en-us"):"zh-cn"==n?o("./flash/zh-cn"):t[n]:"en-us"==n?o("./en-us"):"zh-cn"==n?o("./zh-cn"):t[n];s.set(r,JSON.stringify(i)),c(e,i)}var r=o("../config"),s=o("../lib/storage"),i=(o("../lib/io"),"aliplayer_lang_data"),l="aliplayer_lang",c=function(e,t){e=p(e);window[e]=t},u=function(){return n()},p=function(e){var t=u();return(i+"_"+(e=e||"h5")+"_"+r.h5Version.replace(/\./g,"_")+"_"+t)};(e.exports.setCurrentLanguage=function(e,t,r){var i=window[l];if(!("en-us"==(e=void 0!==e&&e?e:n())||"zh-cn"==e||(r&&r[e])))throw new Error("There is not language resource for "+e+", please specify the language resource by languageTexts property");(window[l]=e),a(t,r),e!=i&&o("../lib/constants").updateByLanguage()}),(e.exports.getCurrentLanguage=n),(e.exports.getLanguageData=function(e,t){e=p(e);return window[e]}),(e.exports.load=a),(e.exports.get=function(e,t){(t=p((t=t||"h5"))),(t=window[t]);if(t)return t[e]})},{"../config":14,"../lib/constants":28,"../lib/io":40,"../lib/storage":48,"./en-us":20,"./flash/en-us":21,"./flash/zh-cn":22,"./zh-cn":24}],24:[function(e,t,r){t.exports=t.exports={OD:"\u539f\u753b",FD:"\u6d41\u7545",LD:"\u6807\u6e05",SD:"\u9ad8\u6e05",HD:"\u8d85\u6e05","2K":"2K","4K":"4K",FHD:"\u5168\u9ad8\u6e05",XLD:"\u6781\u901f",SQ:"\u666e\u901a\u97f3\u8d28",HQ:"\u9ad8\u97f3\u8d28",Speed:"\u500d\u901f",Speed_05X_Text:"0.5X",Speed_1X_Text:"\u6b63\u5e38",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Quality_Change_Fail_Switch_Text:"\u4e0d\u80fd\u64ad\u653e\uff0c\u5207\u6362\u4e3a",Quality_Change_Text:"\u6b63\u5728\u4e3a\u60a8\u5207\u6362\u5230 ",Quality_The_Url:"\u6b64\u5730\u5740",Refresh_Text:"\u5237\u65b0",Detection_Text:"\u8bca\u65ad",Cancel:"\u53d6\u6d88",Mute:"\u9759\u97f3",Snapshot:"\u622a\u56fe",Play_DateTime:"\u64ad\u653e\u65f6\u95f4",AutoPlayDelayDisplayText:"$$\u79d2\u4ee5\u540e\u5f00\u59cb\u64ad\u653e",Error_Load_Abort_Text:"\u83b7\u53d6\u6570\u636e\u8fc7\u7a0b\u88ab\u4e2d\u6b62",Error_Network_Text:"\u7f51\u7edc\u9519\u8bef\u52a0\u8f7d\u6570\u636e\u5931\u8d25",Error_Decode_Text:"\u89e3\u7801\u9519\u8bef",Error_Server_Network_NotSupport_Text:"\u670d\u52a1\u5668\u3001\u7f51\u7edc\u9519\u8bef\u6216\u683c\u5f0f\u4e0d\u652f\u6301",Error_Offline_Text:"\u7f51\u7edc\u4e0d\u53ef\u7528\uff0c\u8bf7\u786e\u5b9a",Error_Play_Text:"\u64ad\u653e\u51fa\u9519\u5566",Error_Retry_Text:"\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_AuthKey_Text:"\u53ef\u80fd\u9274\u6743\u8fc7\u671f\u3001\u57df\u540d\u4e0d\u5728\u767d\u540d\u5355\u6216\u8bf7\u6c42\u88ab\u62e6\u622a",Error_H5_Not_Support_Text:"h5\u4e0d\u652f\u6301\u6b64\u683c\u5f0f\uff0c\u8bf7\u4f7f\u7528flash\u64ad\u653e\u5668",Error_Not_Support_M3U8_Text:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301m3u8\u89c6\u9891\u64ad\u653e",Error_Not_Support_MP4_Text:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301mp4\u89c6\u9891\u64ad\u653e",Error_Not_Support_encrypt_Text:"\u64ad\u653e\u52a0\u5bc6\u89c6\u9891\uff0c\u8bf7\u8bbe\u7f6e\u5c5e\u6027encryptType to 1",Error_Vod_URL_Is_Empty_Text:"\u83b7\u53d6\u64ad\u653e\u5730\u5740\u4e3a\u7a7a",Error_Vod_Fetch_Urls_Text:"\u83b7\u53d6\u5730\u5740\u51fa\u9519\u5566\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Fetch_Playauth_Error:"\u83b7\u53d6\u64ad\u653e\u51ed\u8bc1\u51fa\u9519\u5566\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_Playauth_Decode_Text:"playauth\u89e3\u6790\u9519\u8bef",Error_Vid_Not_Same_Text:"\u4e0d\u80fd\u66f4\u65b0\u5730\u5740\uff0cvid\u548c\u64ad\u653e\u4e2d\u7684\u4e0d\u4e00\u81f4",Error_Playauth_Expired_Text:"\u51ed\u8bc1\u5df2\u8fc7\u671f\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_MTS_Fetch_Urls_Text:"MTS\u83b7\u53d6\u53d6\u6570\u5931\u8d25",Error_Load_M3U8_Failed_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u5931\u8d25,\u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u914d\u7f6e\u4e86https\u8bc1\u4e66\u6216\u8005\u662f\u5426\u5f00\u542f\u4e86\u5141\u8bb8\u8de8\u57df\u8bbf\u95ee",Error_Load_M3U8_Timeout_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u8d85\u65f6",Error_Liveshift_M3U8_Not_Found_Text:"\u6ca1\u6709\u66f4\u591a\u65f6\u79fb\u89c6\u9891\u4e86",Error_M3U8_Decode_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u89e3\u6790\u5931\u8d25",Error_TX_Decode_Text:"\u89e3\u6790\u6570\u636e\u51fa\u9519",Error_Waiting_Timeout_Text:"\u7f13\u51b2\u6570\u636e\u8d85\u65f6\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_Invalidate_Source:"\u64ad\u653e\u5730\u5740\u683c\u5f0f\u9700\u8981\u4e3amp4\u3001mp3\u3001m3u8\u3001mpd\u6216flv",Error_Empty_Source:"\u64ad\u653e\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a",Error_Vid_Empty_Source:"vid\u5bf9\u5e94\u7684\u89c6\u9891\u5730\u5740\u8fd8\u672a\u83b7\u53d6\u5230",Error_Mediaauth_Empty_Source:"mediaAuth\u5bf9\u5e94\u7684\u89c6\u9891\u5730\u5740\u8fd8\u672a\u83b7\u53d6\u5230",Error_Fetch_NotStream:"\u6b64vid\u6ca1\u6709\u53ef\u64ad\u653e\u89c6\u9891",Error_Fetch_Media_Not_Found:"\u6570\u636e\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664",Error_Not_Found:"\u64ad\u653e\u5730\u5740\u4e0d\u5b58\u5728",Error_Drm_License_Request_Failed:"DRM License \u8bf7\u6c42\u5931\u8d25",Error_Drm_Not_Supported:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 DRM \u64ad\u653e",Error_Drm_Load:"DRM \u64ad\u653e\u9519\u8bef",Error_Region_Block_Text:"\u60a8\u6240\u5728\u7684\u5730\u533a\u65e0\u6cd5\u89c2\u770b\u8be5\u89c6\u9891",Live_End:"\u4eb2\uff0c\u76f4\u64ad\u5df2\u7ed3\u675f",Play_Before_Fullscreen:"\u64ad\u653e\u540e\u518d\u5168\u5c4f",Can_Not_Seekable:"\u4e0d\u80fdseek\u5230\u8fd9\u91cc",Cancel_Text:"\u53d6\u6d88",OK_Text:"\u786e\u8ba4",Auto_Stream_Tip_Text:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u662f\u5426\u5207\u6362\u5230$$",Request_Block_Text:"\u6d4f\u89c8\u5668\u5b89\u5168\u7b56\u7565\u89c6\u9891\u5730\u5740\u4e0d\u80fd\u4e3ahttp\u534f\u8bae\uff0c\u4e0e\u7f51\u7ad9https\u534f\u8bae\u4e0d\u4e00\u81f4",Open_Html_By_File:"\u4e0d\u80fd\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u6253\u5f00html\u6587\u4ef6\uff0c\u8bf7\u90e8\u7f72\u5230\u670d\u52a1\u7aef",Maybe_Cors_Error:"\u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u914d\u7f6e\u4e86https\u8bc1\u4e66\u6216\u8005\u662f\u5426\u5f00\u542f\u4e86\u5141\u8bb8\u8de8\u57df\u8bbf\u95ee",Speed_Switch_To:"\u500d\u901f\u5207\u6362\u5230 ",Curent_Volume:"\u5f53\u524d\u97f3\u91cf\uff1a",Volume_Mute:"\u8bbe\u7f6e\u4e3a\u9759\u97f3",Volume_UnMute:"\u8bbe\u7f6e\u4e3a\u975e\u9759\u97f3",ShiftLiveTime_Error:"\u76f4\u64ad\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u76f4\u64ad\u7ed3\u675f\u65f6\u95f4",Error_Not_Support_Format_On_Mobile:"\u79fb\u52a8\u7aef\u4e0d\u652f\u6301flv\u3001rmtp\u89c6\u9891\uff0c\u8bf7\u4f7f\u7528m3u8",SessionId_Ticket_Invalid:"DRM\u89c6\u9891\u64ad\u653e\uff0csessionId\u548cticket\u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a",Http_Error:"Http\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25",Http_Timeout:"http\u8bf7\u6c42\u8d85\u65f6",DRM_License_Expired:"DRM license\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0",Not_Support_DRM:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301DRM\u89c6\u9891\u7684\u64ad\u653e\u6216\u672a\u53d7\u5230\u7528\u6237\u8bb8\u53ef",CC_Switch_To:"\u5b57\u5e55\u5207\u6362\u5230 ",AudioTrack_Switch_To:"\u97f3\u8f68\u5207\u6362\u5230 ",Subtitle:"\u5b57\u5e55",AudioTrack:"\u97f3\u8f68",Quality:"\u6e05\u6670\u5ea6",Auto:"\u81ea\u52a8",Quality_Switch_To:"\u6e05\u6670\u5ea6\u5207\u6362\u5230 ",Fullscreen:"\u5168\u5c4f",Setting:"\u8bbe\u7f6e",Volume:"\u97f3\u91cf",Play:"\u64ad\u653e",Pause:"\u6682\u505c",CloseSubtitle:"\u5173\u95ed\u5b57\u5e55",OpenSubtitle:"\u6253\u5f00\u5b57\u5e55",ExistFullScreen:"\u9000\u51fa\u5168\u5c4f",Muted:"\u9759\u97f3",Retry:"\u91cd\u8bd5",SwitchToLive:"\u8fd4\u56de\u76f4\u64ad",iOSNotSupportVodEncription:"iOS\u4e0d\u652f\u6301\u963f\u91cc\u4e91\u89c6\u9891\u52a0\u5bc6\uff08\u52a0\u5bc6\uff09\u64ad\u653e\uff0c\u8bf7\u4f7f\u7528\u6807\u51c6\u52a0\u5bc6\u6216DRM",UseChromeForVodEncription:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u70b9\u64ad\u52a0\u5bc6\u64ad\u653e\uff0c\u8bf7\u4f7f\u7528\u6700\u65b0Chrome\u6d4f\u89c8\u5668",Record_Not_Allowed:"\u7981\u6b62\u5f55\u5c4f\u6216\u5c0f\u7a97\u53e3\u64ad\u653e\uff0c\u8bf7\u5173\u95ed\u63d2\u4ef6\u6216\u66f4\u6362\u6d4f\u89c8\u5668",License_No_Authorization:"\u64ad\u653e\u5668SDK\u672a\u6fc0\u6d3b",License_Click_To_Apply:"\u70b9\u51fb\u7533\u8bf7License",Rts_Err_Http_Signal_Error:"(RTS)\u4fe1\u4ee4\u8bf7\u6c42\u5931\u8d25",Rts_Err_Play_Failed:"(RTS)\u64ad\u653e\u5931\u8d25",Rts_Err_No_Data_For:"\u6beb\u79d2\u6ca1\u6709\u6570\u636e",Rts_Err_Browser_Not_Support:"(RTS)\u4e0d\u652f\u6301\u6b64\u6d4f\u89c8\u5668",Rts_Err_Not_Support_Webrtc:"(RTS)\u4e0d\u652f\u6301webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e",Rts_Err_Not_Support_H264:"(RTS)\u4e0d\u652f\u6301H264",Rts_Err_Create_Offer_Error:"(RTS)create offer\u5931\u8d25",Rts_Err_Play_Url_Error:"(RTS)\u64ad\u653eurl\u534f\u8bae\u9519\u8bef",Rts_Err_Subscribe_Nonthing:"(RTS)\u53c2\u6570\u8bbe\u7f6e\u9519\u8bef",Rts_Err_Http_Request_Failed:"(RTS)HTTP\u8bf7\u6c42\u5931\u8d25",Rts_Err_Http_Answer_Failed:"(RTS)answer\u5931\u8d25",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection\u5f02\u5e38",Splayer_Err_Env_Check:"(SP)\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301\u64ad\u653e\u8be5\u89c6\u9891",Splayer_Err_Coroutine:"(SP)Coroutine \u9519\u8bef",Splayer_Err_Decode:"(SP)\u89e3\u7801\u9519\u8bef",Splayer_Err_Buffering:"(SP)\u7f13\u51b2\u533a\u9519\u8bef",Splayer_Err_Parser_Not_Found:"(SP)\u4e0d\u652f\u6301\u7684\u5a92\u4f53\u5bb9\u5668"}},{}],25:[function(e,t,r){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var u=new Uint8Array(256),i=0;i<o.length;i++)u[o.charCodeAt(i)]=i;var s=function(e){for(var t="",r=0;r<e.length;r+=16e3){var i=e.subarray(r,r+16e3);t+=String.fromCharCode.apply(null,i)}return t};t.exports={decode:function(e){for(var t,r,i,n,o=0.75*e.length,a=e.length,s=0,o=("="===e[e.length-1]&&(o--,"="===e[e.length-2])&&o--,new ArrayBuffer(o)),l=new Uint8Array(o),c=0;c<a;c+=4)(t=u[e.charCodeAt(c)]),(r=u[e.charCodeAt(c+1)]),(i=u[e.charCodeAt(c+2)]),(n=u[e.charCodeAt(c+3)]),(l[s++]=(t<<2)|(r>>4)),(l[s++]=((15&r)<<4)|(i>>2)),(l[s++]=((3&i)<<6)|(63&n));return o},encode:function(e){for(var t=new Uint8Array(e),r=t.length,i="",n=0;n<r;n+=3)i=(i=(i=(i+=o[t[n]>>2])+o[((3&t[n])<<4)|(t[n+1]>>4)])+o[((15&t[n+1])<<2)|(t[n+2]>>6)])+o[63&t[n+2]];return(r%3==2?(i=i.substring(0,i.length-1)+"="):r%3==1&&(i=i.substring(0,i.length-2)+"=="),i)},unpackPlayReady:function(e){e=(function(e,t,r){if(!e)return"";r||e.byteLength%2==0||console.log("Data has an incorrect length, must be even."),(r=e instanceof ArrayBuffer?e:((r=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r.buffer));for(var i=Math.floor(e.byteLength/2),n=new Uint16Array(i),o=new DataView(r),a=0;a<i;a++)n[a]=o.getUint16(2*a,t);return s(n)})(e,!0,!0);if(-1!=e.indexOf("PlayReadyKeyMessage")){for(var e=new DOMParser().parseFromString(e,"application/xml"),t=e.getElementsByTagName("HttpHeader"),r={},i=0;i<t.length;++i){var n=t[i].querySelector("name"),o=t[i].querySelector("value");r[n.textContent]=o.textContent}return{header:r,changange:e.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],26:[function(e,t,r){var n=e("./videox-demux.min");function o(){}t.exports=function(e,t,r){void 0===t&&(t=o),void 0===r&&(r=o);var i=new n.Demuxer({progressive:!0});i.on("loadedmetadata",function(e){void 0===e&&(e={}),i.suspend(),i.destroy(),(i=null),t(e)}),i.on("error",function(e){r(e)}),i.load(e)}},{"./videox-demux.min":52}],27:[function(e,t,r){var i=e("./oo"),n=e("../player/base/event/eventtype");(t.exports.stopPropagation=function(e){window.event?(window.event.cancelBubble=!0):e.stopPropagation()}),(t.exports.register=function(e){(e.util={stopPropagation:t.exports.stopPropagation}),(e.Component=i.extend),(e.EventType=n.Player)})},{"../player/base/event/eventtype":70,"./oo":43}],28:[function(e,t,r){function i(){(t.exports.VideoErrorCodeText={1:n.get("Error_Load_Abort_Text"),2:n.get("Error_Network_Text"),3:n.get("Error_Decode_Text"),4:n.get("Error_Server_Network_NotSupport_Text")}),(t.exports.VideoLevels={0:n.get("OD"),640:n.get("FD"),960:n.get("LD"),1280:n.get("SD"),1920:n.get("HD"),2580:n.get("2K"),3840:n.get("4K")}),(t.exports.QualityLevels={OD:n.get("OD"),LD:n.get("LD"),FD:n.get("FD"),SD:n.get("SD"),HD:n.get("HD"),"2K":n.get("2K"),"4K":n.get("4K"),XLD:n.get("XLD"),FHD:n.get("FHD"),SQ:n.get("SQ"),HQ:n.get("HQ")}),(t.exports.SpeedLevels=[{key:0.5,text:n.get("Speed_05X_Text")},{key:1,text:n.get("Speed_1X_Text")},{key:1.25,text:n.get("Speed_125X_Text")},{key:1.5,text:n.get("Speed_15X_Text")},{key:2,text:n.get("Speed_2X_Text")}])}var n=e("../lang/index");(t.exports.LOAD_START="loadstart"),(t.exports.LOADED_METADATA="loadedmetadata"),(t.exports.LOADED_DATA="loadeddata"),(t.exports.PROGRESS="progress"),(t.exports.CAN_PLAY="canplay"),(t.exports.CAN_PLYA_THROUGH="canplaythrough"),(t.exports.PLAY="play"),(t.exports.PAUSE="pause"),(t.exports.ENDED="ended"),(t.exports.PLAYING="playing"),(t.exports.WAITING="waiting"),(t.exports.ERROR="error"),(t.exports.SUSPEND="suspend"),(t.exports.STALLED="stalled"),(t.exports.AuthKeyExpiredEvent="authkeyexpired"),(t.exports.USER_EVENT_NAME="__user_events__"),(t.exports.PLAYER_SDK_CODE=9201),(t.exports.FEATURE_ID_H265=30001),(t.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7}),(t.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"}),(t.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5}),(t.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5}),(t.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"}),(t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304}),(t.exports.AuthKeyExpired=7200),(t.exports.AuthKeyRefreshExpired=7e3),(t.exports.AuthInfoExpired=100),(t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400}),(t.exports.RegionBlockMessages=["black location","denied by region block"]),(t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"}),(t.exports.SelectedStreamLevel="selectedStreamLevel"),(t.exports.SelectedCC="selectedCC"),(t.exports.HWDetectHvc1="HWDetectHvc1"),(t.exports.HWDetectHev1="HWDetectHev1"),(t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"});i(),(t.exports.updateByLanguage=i)},{"../lang/index":23}],29:[function(e,t,r){(t.exports.get=function(e){for(var t=e+"",r=document.cookie.split(";"),i=0;i<r.length;i++){var n=r[i].trim();if(0==n.indexOf(t))return unescape(n.substring(t.length+1,n.length))}return""}),(t.exports.set=function(e,t,r){var i=new Date(),r=(i.setTime(i.getTime()+24*r*60*60*1e3),"expires="+i.toGMTString());document.cookie=e+"="+escape(t)+"; "+r})},{}],30:[function(e,r,t){var i=e("./object");(r.exports.cache={}),(r.exports.guid=function(e,t){var r,i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(((t=t||n.length),e))for(r=0;r<e;r++)o[r]=n[0|(Math.random()*t)];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||((i=0|(16*Math.random())),(o[r]=n[19==r?(3&i)|8:i]));return o.join("")}),(r.exports.expando="vdata"+new Date().getTime()),(r.exports.getData=function(e){var t=e[r.exports.expando];return(t||((t=e[r.exports.expando]=r.exports.guid()),(r.exports.cache[t]={})),r.exports.cache[t])}),(r.exports.hasData=function(e){var t="";return!(!(t=e?e[r.exports.expando]:t)||i.isEmpty(r.exports.cache[t]))}),(r.exports.removeData=function(t){var e="";if((e=t?t[r.exports.expando]:e)){delete r.exports.cache[e];try{delete t[r.exports.expando]}catch(e){t.removeAttribute?t.removeAttribute(r.exports.expando):(t[r.exports.expando]=null)}}})},{"./object":42}],31:[function(e,t,r){var i,d="undefined"==typeof Promise?e("es6-promise").Promise:Promise;(e="undefined"!=typeof self?self:this),(i=function(){return((r=[function(e,t,r){"use strict";!function(e){(t.b=function(e){for(var t=(e=void 0===e?{}:e).includes,e=e.excludes,e=void 0===e?[]:e,r=!1,i=!1,n=0,o=void 0===t?[]:t;n<o.length;n++)if(!0===o[n]){r=!0;break}for(var a=0,s=e;a<s.length;a++)if(!0===s[a]){i=!0;break}return r&&!i}),(t.c=function(e,t,r){e=n.a[e];return void 0!==e&&Object(i.compare)(e,t,r)}),(t.a=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this});var i=r(11),n=(r.n(i),r(4))}.call(t,r(10))},function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"d",function(){return o}),r.d(t,"b",function(){return a}),r.d(t,"f",function(){return s}),r.d(t,"a",function(){return l}),r.d(t,"e",function(){return c});var i,t=r(3),r=r(0),r=Object(r.a)(),n="InstallTrigger"in((null==r?void 0:r.window)||{})||/firefox/i.test(t.b),o=/trident/i.test(t.b)||/msie/i.test(t.b),a=/edge/i.test(t.b),s=/webkit/i.test(t.b)&&!a,l=void 0!==(null==(i=null==r?void 0:r.window)?void 0:i.chrome)||/chrome/i.test(t.b),c="[object SafariRemoteNotification]"===((null==(r=null==(i=null==r?void 0:r.window)?void 0:i.safari)?void 0:r.pushNotification)||!1).toString()||(/safari/i.test(t.b)&&!l)},function(e,t,r){"use strict";r.d(t,"b",function(){return o}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return s});var i=r(1);function n(r){if(console){if(!i.d&&!i.b)return console[r];if("log"===r||"clear"===r)return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console[r].apply(console,e)}}return function(){for(var e=0;e<arguments.length;e++)e,0}}var o=n("log"),a=n("table"),s=n("clear")},function(e,t,r){"use strict";(t.a=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return null!=i&&i.document?(e=i.document).createElement.apply(e,t):{}}),r.d(t,"b",function(){return n});var t=r(0),i=Object(t.a)(),n=(null==(r=null==i?void 0:i.navigator)?void 0:r.userAgent)||"xxxxx"},function(e,t,r){"use strict";r.d(t,"a",function(){return i});for(var i={},n=0,o=(r(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];n<o.length;n++){var a=o[n].split("/"),s=a[0],a=a[1];i[s]=a}},function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"d",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"a",function(){return a}),r.d(t,"e",function(){return s});var t=r(3),i=/ipad/i.test(t.b),n=/macintosh/i.test(t.b),o=/iphone/i.test(t.b),a=/android/i.test(t.b),s=/windows/i.test(t.b)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.addListener=function(e){p.addListener(e)}),(t.removeListener=function(e){p.removeListener(e)}),(t.isLaunch=function(){return p.isLaunch()}),(t.launch=function(){p.launch()}),(t.stop=function(){p.stop()}),(t.setDetectDelay=function(e){p.setDetectDelay(e)});var i=r(7),n=r(8),o=(r.d(t,"DevtoolsDetector",function(){return i.a}),r.d(t,"checkers",function(){return n}),r(0)),a=(r.d(t,"match",function(){return o.b}),r.d(t,"specificVersionMatch",function(){return o.c}),r(1)),s=(r.d(t,"isFirefox",function(){return a.c}),r.d(t,"isIE",function(){return a.d}),r.d(t,"isEdge",function(){return a.b}),r.d(t,"isWebkit",function(){return a.f}),r.d(t,"isChrome",function(){return a.a}),r.d(t,"isSafari",function(){return a.e}),r(2)),l=(r.d(t,"log",function(){return s.b}),r.d(t,"table",function(){return s.c}),r.d(t,"clear",function(){return s.a}),r(17)),c=(r.d(t,"isMobile",function(){return l.a}),r(4)),u=(r.d(t,"versionMap",function(){return c.a}),r(5)),p=(r.d(t,"isIpad",function(){return u.b}),r.d(t,"isMac",function(){return u.d}),r.d(t,"isIphone",function(){return u.c}),r.d(t,"isAndroid",function(){return u.a}),r.d(t,"isWindows",function(){return u.e}),new i.a({checkers:[n.elementIdChecker,n.regToStringChecker,n.functionToStringChecker,n.depRegToStringChecker,n.dateToStringChecker,n.debuggerChecker]}));t.default=p},function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=(this&&this.__awaiter)||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e));}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=(this&&this.__generator)||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return("function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e);function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(((o=1),a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done))return s;switch(((a=0),(t=s?[2&t[0],s.value]:t)[0])){case 0:case 1:s=t;break;case 4:return(l.label++,{value:t[1],done:!1});case 5:l.label++,(a=t[1]),(t=[0]);continue;case 7:(t=l.ops.pop()),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||(t[1]>s[0]&&t[1]<s[3])))l.label=t[1];else if(6===t[0]&&l.label<s[1])(l.label=s[1]),(s=t);else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}(l.label=s[2]),l.ops.push(t)}}t=n.call(i,l)}catch(e){(t=[6,e]),(a=0)}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=((o.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&((this._detectLoopStopped=!1),this._detectLoop())}),(o.prototype.stop=function(){this._detectLoopStopped||((this._detectLoopStopped=!0),clearTimeout(this._timer))}),(o.prototype.isLaunch=function(){return!this._detectLoopStopped}),(o.prototype.setDetectDelay=function(e){this._detectLoopDelay=e}),(o.prototype.addListener=function(e){this._listeners.push(e)}),(o.prototype.removeListener=function(t){this._listeners=this._listeners.filter(function(e){return e!==t})}),(o.prototype._broadcast=function(e){for(var t=0,r=this._listeners;t<r.length;t++){var i=r[t];try{i(e.isOpen,e)}catch(e){}}}),(o.prototype._detectLoop=function(){return i(this,void 0,void 0,function(){var t,r,i,n,o,a=this;return s(this,function(e){switch(e.label){case 0:(t=!1),(r=""),(i=0),(n=this._checkers),(e.label=1);case 1:return i<n.length?[4,(o=n[i]).isEnable()]:[3,6];case 2:return e.sent()?((r=o.name),[4,o.isOpen()]):[3,4];case 3:(t=e.sent()),(e.label=4);case 4:if(t)return[3,6];e.label=5;case 5:return i++,[3,1];case 6:return(t!=this._isOpen&&((this._isOpen=t),this._broadcast({isOpen:t,checkerName:r})),0<this._detectLoopDelay?(this._timer=setTimeout(function(){return a._detectLoop()},this._detectLoopDelay)):this.stop(),[2])}})})}),o);function o(e){e=e.checkers;(this._listeners=[]),(this._isOpen=!1),(this._detectLoopStopped=!0),(this._detectLoopDelay=500),(this._checkers=e.slice())}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),n=(r.d(t,"depRegToStringChecker",function(){return i.a}),r(12)),o=(r.d(t,"elementIdChecker",function(){return n.a}),r(13)),a=(r.d(t,"functionToStringChecker",function(){return o.a}),r(14)),s=(r.d(t,"regToStringChecker",function(){return a.a}),r(15)),l=(r.d(t,"debuggerChecker",function(){return s.a}),r(16));r.d(t,"dateToStringChecker",function(){return l.a})},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),a=(this&&this.__awaiter)||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e));}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=(this&&this.__generator)||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return("function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e);function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(((o=1),a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done))return s;switch(((a=0),(t=s?[2&t[0],s.value]:t)[0])){case 0:case 1:s=t;break;case 4:return(l.label++,{value:t[1],done:!1});case 5:l.label++,(a=t[1]),(t=[0]);continue;case 7:(t=l.ops.pop()),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||(t[1]>s[0]&&t[1]<s[3])))l.label=t[1];else if(6===t[0]&&l.label<s[1])(l.label=s[1]),(s=t);else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}(l.label=s[2]),l.ops.push(t)}}t=n.call(i,l)}catch(e){(t=[6,e]),(a=0)}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=/ /,c=!1,u=((l.toString=function(){return(c=!0),u.name}),{name:"dep-reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return((c=!1),Object(n.c)({dep:l}),Object(n.a)(),[2,c])})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[i.c,i.d]})]})})}})},function(e,t){var r=(function(){return this})();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var i;void 0!==(t="function"==typeof(i=function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function p(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),r=(function(e,t){return-1===e.indexOf(t)?e.length:e.indexOf(t)})(t,"-"),i=t.substring(0,r).split(".");return i.push(t.substring(r+1)),i}function d(e){return isNaN(Number(e))?e:Number(e)}function h(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!t.test(e))throw new Error("Invalid argument not valid semver ('"+e+"' received)");}function n(e,t){[e,t].forEach(h);for(var r=p(e),i=p(t),n=0;n<Math.max(r.length-1,i.length-1);n++){var o=parseInt(r[n]||0,10),a=parseInt(i[n]||0,10);if(o>a)return 1;if(a>o)return-1}var s=r[r.length-1],l=i[i.length-1];if(s&&l){var c=s.split(".").map(d),u=l.split(".").map(d);for(n=0;n<Math.max(c.length,u.length);n++){if(void 0===c[n]||("string"==typeof u[n]&&"number"==typeof c[n]))return-1;if(void 0===u[n]||("string"==typeof c[n]&&"number"==typeof u[n]))return 1;if(c[n]>u[n])return 1;if(u[n]>c[n])return-1}}else if(s||l)return s?-1:1;return 0}var o=[">",">=","=","<","<="],a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return((n.validate=function(e){return"string"==typeof e&&t.test(e)}),(n.compare=function(e,t,r){!(function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"));})(r);var i=n(e,t);return a[r].indexOf(i)>-1}),n)})?i.apply(t,[]):i)&&(e.exports=t)},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),t=r(3),a=(this&&this.__awaiter)||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e));}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=(this&&this.__generator)||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return("function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e);function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(((o=1),a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done))return s;switch(((a=0),(t=s?[2&t[0],s.value]:t)[0])){case 0:case 1:s=t;break;case 4:return(l.label++,{value:t[1],done:!1});case 5:l.label++,(a=t[1]),(t=[0]);continue;case 7:(t=l.ops.pop()),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||(t[1]>s[0]&&t[1]<s[3])))l.label=t[1];else if(6===t[0]&&l.label<s[1])(l.label=s[1]),(s=t);else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}(l.label=s[2]),l.ops.push(t)}}t=n.call(i,l)}catch(e){(t=[6,e]),(a=0)}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=Object(t.a)("div"),c=!1,u=(Object.defineProperty(l,"id",{get:function(){return(c=!0),u.name},configurable:!0}),{name:"element-id",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return((c=!1),Object(n.b)(l),Object(n.a)(),[2,c])})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[i.d,i.b,i.c]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return p});var i=r(1),n=r(2),o=r(5),a=r(0),s=(this&&this.__awaiter)||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e));}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},l=(this&&this.__generator)||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return("function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e);function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(((o=1),a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done))return s;switch(((a=0),(t=s?[2&t[0],s.value]:t)[0])){case 0:case 1:s=t;break;case 4:return(l.label++,{value:t[1],done:!1});case 5:l.label++,(a=t[1]),(t=[0]);continue;case 7:(t=l.ops.pop()),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||(t[1]>s[0]&&t[1]<s[3])))l.label=t[1];else if(6===t[0]&&l.label<s[1])(l.label=s[1]),(s=t);else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}(l.label=s[2]),l.ops.push(t)}}t=n.call(i,l)}catch(e){(t=[6,e]),(a=0)}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function c(){}var u=0,p=((c.toString=function(){return u++,""}),{name:"function-to-string",isOpen:function(){return s(this,void 0,void 0,function(){return l(this,function(e){return((u=0),Object(n.b)(c),Object(n.a)(),[2,2===u])})})},isEnable:function(){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,Object(a.b)({includes:[!0],excludes:[i.c,(o.b||o.c)&&i.a]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(2),n=r(1),o=r(0),a=(this&&this.__awaiter)||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e));}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=(this&&this.__generator)||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return("function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e);function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(((o=1),a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done))return s;switch(((a=0),(t=s?[2&t[0],s.value]:t)[0])){case 0:case 1:s=t;break;case 4:return(l.label++,{value:t[1],done:!1});case 5:l.label++,(a=t[1]),(t=[0]);continue;case 7:(t=l.ops.pop()),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||(t[1]>s[0]&&t[1]<s[3])))l.label=t[1];else if(6===t[0]&&l.label<s[1])(l.label=s[1]),(s=t);else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}(l.label=s[2]),l.ops.push(t)}}t=n.call(i,l)}catch(e){(t=[6,e]),(a=0)}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=/ /,c=!1,u=((l.toString=function(){return(c=!0),u.name}),{name:"reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return((c=!1),Object(i.b)(l),Object(i.a)(),[2,c])})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[n.f]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=(this&&this.__awaiter)||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e));}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},n=(this&&this.__generator)||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return("function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e);function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(((o=1),a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done))return s;switch(((a=0),(t=s?[2&t[0],s.value]:t)[0])){case 0:case 1:s=t;break;case 4:return(l.label++,{value:t[1],done:!1});case 5:l.label++,(a=t[1]),(t=[0]);continue;case 7:(t=l.ops.pop()),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||(t[1]>s[0]&&t[1]<s[3])))l.label=t[1];else if(6===t[0]&&l.label<s[1])(l.label=s[1]),(s=t);else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}(l.label=s[2]),l.ops.push(t)}}t=n.call(i,l)}catch(e){(t=[6,e]),(a=0)}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function o(){return(performance||Date).now()}var a={name:"debugger-checker",isOpen:function(){return i(this,void 0,void 0,function(){var t;return n(this,function(e){return((t=o()),function(){}.constructor("debugger")(),[2,100<o()-t])})})},isEnable:function(){return i(this,void 0,void 0,function(){return n(this,function(e){return[2,!0]})})}}},function(e,t,r){"use strict";r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),a=(this&&this.__awaiter)||function(e,a,s,l){return new(s=s||d)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e));}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=(this&&this.__generator)||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return("function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e);function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(((o=1),a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done))return s;switch(((a=0),(t=s?[2&t[0],s.value]:t)[0])){case 0:case 1:s=t;break;case 4:return(l.label++,{value:t[1],done:!1});case 5:l.label++,(a=t[1]),(t=[0]);continue;case 7:(t=l.ops.pop()),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||(t[1]>s[0]&&t[1]<s[3])))l.label=t[1];else if(6===t[0]&&l.label<s[1])(l.label=s[1]),(s=t);else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}(l.label=s[2]),l.ops.push(t)}}t=n.call(i,l)}catch(e){(t=[6,e]),(a=0)}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=new Date(),c=0,u=((l.toString=function(){return c++,""}),{name:"date-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return((c=0),Object(n.b)(l),Object(n.a)(),[2,2===c])})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[i.a],excludes:[]})]})})}})},function(e,t,r){"use strict";r.d(t,"a",function(){return i});var t=r(3),i=/mobile/i.test(t.b)}]),(n={}),(i.m=r),(i.c=n),(i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})}),(i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t}),(i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}),(i.p=""),i((i.s=6)));function i(e){var t;return(n[e]||((t=n[e]={i:e,l:!1,exports:{}}),r[e].call(t.exports,t,t.exports,i),(t.l=!0),t)).exports}var r,n}),"object"==typeof r&&"object"==typeof t?(t.exports=i()):"function"==typeof define&&define.amd?define([],i):"object"==typeof r?(r.devtoolsDetector=i()):(e.devtoolsDetector=i())},{"es6-promise":8}],32:[function(e,l,t){var i=e("./object");(l.exports.el=function(e){return document.getElementById(e)}),(l.exports.createEl=function(e,t){var r;return((e=e||"div"),(t=t||{}),(r=document.createElement(e)),i.each(t,function(e,t){-1!==e.indexOf("aria-")||"role"==e?r.setAttribute(e,t):(r[e]=t)}),r)}),(l.exports.addClass=function(e,t){-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)}),(l.exports.removeClass=function(e,t){var r,i;if(-1!=e.className.indexOf(t)){for(i=(r=e.className.split(" ")).length-1;0<=i;i--)r[i]===t&&r.splice(i,1);e.className=r.join(" ")}}),(l.exports.hasClass=function(e,t){return-1!=e.className.indexOf(t)}),(l.exports.getClasses=function(e){return e.className?e.className.split(" "):[]}),(l.exports.getElementAttributes=function(e){var t,r,i={};if(e&&e.attributes&&0<e.attributes.length)for(var n,o=(n=e.attributes).length-1;0<=o;o--)(t=n[o].name),(r=n[o].value),("boolean"!=typeof e[t]&&-1===",autoplay,controls,loop,muted,default,".indexOf(","+t+","))||(r=null!==r),(i[t]=r);return i}),(l.exports.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}),(l.exports.blockTextSelection=function(){document.body.focus(),(document.onselectstart=function(){return!1})}),(l.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}}),(l.exports.css=function(r,e,t){return(!(!r||!r.style)&&(e&&t?((r.style[e]=t),!0):t||"string"!=typeof e?!t&&"object"==typeof e&&(i.each(e,function(e,t){r.style[e]=t}),!0):r.style[e]))}),(l.exports.getTransformName=function(e){for(var t=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],r=t[0],i=0,n=t.length;i<n;i++)if(void 0!==e.style[t[i]]){r=t[i];break}return r}),(l.exports.getTransformEventName=function(e,t){for(var r=["","Webkit","Moz","ms","O"],i=t.toLowerCase(),n=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],o=0,a=n.length;o<a;o++)if(void 0!==e.style[n[o]]){0!=o&&(i=r[o]+t);break}return i}),(l.exports.addCssByStyle=function(e){var t=document,r=t.createElement("style"),e=(r.setAttribute("type","text/css"),r.styleSheet?(r.styleSheet.cssText=e):((e=t.createTextNode(e)),r.appendChild(e)),t.getElementsByTagName("head"));(e.length?e[0]:t.documentElement).appendChild(r)}),(l.exports.getTranslateX=function(e){var t=0;if(e)try{var r=window.getComputedStyle(e),i=l.exports.getTransformName(e),t=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(r[i]).m41}catch(e){console.log(e)}return t}),(l.exports.getPointerPosition=function(e,t){var r={},i=l.exports.findPosition(e),n=e.offsetWidth,e=e.offsetHeight,o=i.top,i=i.left,a=t.pageY,s=t.pageX;return(t.changedTouches&&((s=t.changedTouches[0].pageX),(a=t.changedTouches[0].pageY)),(r.y=Math.max(0,Math.min(1,(o-a+e)/e))),(r.x=Math.max(0,Math.min(1,(s-i)/n))),r)}),(l.exports.findPosition=function(e){var t,r,i,n;return(t=e.getBoundingClientRect&&e.parentNode?e.getBoundingClientRect():t)?((e=document.documentElement),(n=document.body),(i=e.clientLeft||n.clientLeft||0),(r=window.pageXOffset||n.scrollLeft),(r=t.left+r-i),(i=e.clientTop||n.clientTop||0),(e=window.pageYOffset||n.scrollTop),(n=t.top+e-i),{left:Math.round(r),top:Math.round(n)}):{left:0,top:0}})},{"./object":42}],33:[function(e,l,t){var c=e("./object"),u=e("./data"),r=e("./ua"),i=e("./fastclick");function p(t,r,e,i){c.each(e,function(e){t(r,e,i)})}(l.exports.on=function(o,e,t){if(o){if(c.isArray(e))return p(l.exports.on,o,e,t);r.IS_MOBILE&&"click"==e&&i.attach(o);var a=u.getData(o);a.handlers||(a.handlers={}),a.handlers[e]||(a.handlers[e]=[]),t.guid||(t.guid=u.guid()),a.handlers[e].push(t),a.dispatcher||((a.disabled=!1),(a.dispatcher=function(e){if(!a.disabled){e=l.exports.fixEvent(e);var t=a.handlers[e.type];if(t)for(var r=t.slice(0),i=0,n=r.length;i<n&&!e.isImmediatePropagationStopped();i++)r[i].call(o,e)}})),1==a.handlers[e].length&&(o.addEventListener?o.addEventListener(e,a.dispatcher,!1):o.attachEvent&&o.attachEvent("on"+e,a.dispatcher))}}),(l.exports.off=function(t,e,r){if(t&&u.hasData(t)){var i=u.getData(t);if(i.handlers){if(c.isArray(e))return p(l.exports.off,t,e,r);function n(e){(i.handlers[e]=[]),l.exports.cleanUpEvents(t,e)}if(e){var o=i.handlers[e];if(o)if(r){if(r.guid)for(var a=0;a<o.length;a++)o[a].guid===r.guid&&o.splice(a--,1);l.exports.cleanUpEvents(t,e)}else n(e)}else for(var s in i.handlers)n(s)}}}),(l.exports.cleanUpEvents=function(e,t){var r=u.getData(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),c.isEmpty(r.handlers)&&(delete r.handlers,delete r.dispatcher,delete r.disabled),c.isEmpty(r)&&u.removeData(e)}),(l.exports.fixEvent=function(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var i,n,o,a=e||window.event;for(i in((e={}),a))"layerX"===i||"layerY"===i||"keyboardEvent.keyLocation"===i||("returnValue"==i&&a.preventDefault)||(e[i]=a[i]);e.target||(e.target=e.srcElement||document),(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),(e.preventDefault=function(){a.preventDefault&&a.preventDefault(),(e.returnValue=!1),(e.isDefaultPrevented=t),(e.defaultPrevented=!0)}),(e.isDefaultPrevented=r),(e.defaultPrevented=!1),(e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),(e.cancelBubble=!0),(e.isPropagationStopped=t)}),(e.isPropagationStopped=r),(e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),(e.isImmediatePropagationStopped=t),e.stopPropagation()}),(e.isImmediatePropagationStopped=r),null!=e.clientX&&((n=document.documentElement),(o=document.body),(e.pageX=e.clientX+((n&&n.scrollLeft)||(o&&o.scrollLeft)||0)-((n&&n.clientLeft)||(o&&o.clientLeft)||0)),(e.pageY=e.clientY+((n&&n.scrollTop)||(o&&o.scrollTop)||0)-((n&&n.clientTop)||(o&&o.clientTop)||0))),(e.which=e.charCode||e.keyCode),null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}),(l.exports.trigger=function(e,t){var r,i,n;if(e)return((r=u.hasData(e)?u.getData(e):{}),(i=e.parentNode||e.ownerDocument),"string"==typeof t&&((n=null),(!e.paramData&&0!=e.paramData)||((n=e.paramData),(e.paramData=null),e.removeAttribute(n)),(t={type:t,target:e,paramData:n})),(t=l.exports.fixEvent(t)),r.dispatcher&&r.dispatcher.call(e,t),i&&!t.isPropagationStopped()&&!1!==t.bubbles?l.exports.trigger(i,t):i||t.defaultPrevented||((n=u.getData(t.target)),t.target[t.type]&&((n.disabled=!0),"function"==typeof t.target[t.type]&&t.target[t.type](),(n.disabled=!1))),!t.defaultPrevented)}),(l.exports.one=function(e,t,r){if(e){if(c.isArray(t))return p(l.exports.one,e,t,r);function i(){l.exports.off(e,t,i),r.apply(this,arguments)}(i.guid=r.guid=r.guid||u.guid()),l.exports.on(e,t,i)}})},{"./data":30,"./fastclick":34,"./object":42,"./ua":49}],34:[function(e,t,r){function a(n,e){var t;if(((e=e||{}),(this.trackingClick=!1),(this.trackingClickStart=0),(this.targetElement=null),(this.touchStartX=0),(this.touchStartY=0),(this.lastTouchIdentifier=0),(this.touchBoundary=e.touchBoundary||10),(this.layer=n),(this.tapDelay=e.tapDelay||200),(this.tapTimeout=e.tapTimeout||700),!a.notNeeded(n))){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=0,o=r.length;i<o;i++)this[r[i]]=(function(e,t){return function(){return e.apply(t,arguments)}})(this[r[i]],this);s&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||((n.removeEventListener=function(e,t,r){var i=Node.prototype.removeEventListener;"click"===e?i.call(n,e,t.hijacked||t,r):i.call(n,e,t,r)}),(n.addEventListener=function(e,t,r){var i=Node.prototype.addEventListener;"click"===e?i.call(n,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),r):i.call(n,e,t,r)})),"function"==typeof n.onclick&&((t=n.onclick),n.addEventListener("click",function(e){t(e)},!1),(n.onclick=null))}}var i=0<=navigator.userAgent.indexOf("Windows Phone"),s=0<navigator.userAgent.indexOf("Android")&&!i,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!i,l=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),c=o&&/OS [6-7]_\d/.test(navigator.userAgent),n=0<navigator.userAgent.indexOf("BB10");(a.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if((o&&"file"===e.type)||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)}),(a.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}}),(a.prototype.sendClick=function(e,t){var r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),(t=t.changedTouches[0]),(r=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),(r.forwardedTouchEvent=!0),e.dispatchEvent(r)}),(a.prototype.determineEventType=function(e){return s&&"select"===e.tagName.toLowerCase()?"mousedown":"click"}),(a.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type?((t=e.value.length),e.setSelectionRange(t,t)):e.focus()}),(a.prototype.updateScrollParent=function(e){var t,r=e.fastClickScrollParent;if(!r||!r.contains(e)){t=e;do{if(t.scrollHeight>t.offsetHeight){(r=t),(e.fastClickScrollParent=t);break}}while((t=t.parentElement))}r&&(r.fastClickLastScrollTop=r.scrollTop)}),(a.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e}),(a.prototype.onTouchStart=function(e){var t,r,i;if(!(1<e.targetTouches.length)){if(((t=this.getTargetElementFromEventTarget(e.target)),(r=e.targetTouches[0]),o)){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!l){if(r.identifier&&r.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;(this.lastTouchIdentifier=r.identifier),this.updateScrollParent(t)}}(this.trackingClick=!0),(this.trackingClickStart=e.timeStamp),(this.targetElement=t),(this.touchStartX=r.pageX),(this.touchStartY=r.pageY),e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault()}return!0}),(a.prototype.touchHasMoved=function(e){var e=e.changedTouches[0],t=this.touchBoundary;return(Math.abs(e.pageX-this.touchStartX)>t||Math.abs(e.pageY-this.touchStartY)>t)}),(a.prototype.onTouchMove=function(e){return(this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&((this.trackingClick=!1),(this.targetElement=null)),!0)}),(a.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")}),(a.prototype.onTouchEnd=function(e){var t,r,i,n=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return(this.cancelNextClick=!0);if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(((this.cancelNextClick=!1),(this.lastClickTime=e.timeStamp),(t=this.trackingClickStart),(this.trackingClick=!1),(this.trackingClickStart=0),c&&((i=e.changedTouches[0]),((n=document.elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset)||n).fastClickScrollParent=this.targetElement.fastClickScrollParent)),"label"===(i=n.tagName.toLowerCase()))){if((r=this.findControl(n))){if((this.focus(n),s))return!1;n=r}}else if(this.needsFocus(n))return(100<e.timeStamp-t||(o&&window.top!==window&&"input"===i)?(this.targetElement=null):(this.focus(n),this.sendClick(n,e),(o&&"select"===i)||((this.targetElement=null),e.preventDefault())),!1);return(!(!o||l||!(r=n.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(n)||(e.preventDefault(),this.sendClick(n,e)),!1))}),(a.prototype.onTouchCancel=function(){(this.trackingClick=!1),(this.targetElement=null)}),(a.prototype.onMouse=function(e){return(!this.targetElement||!(!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(e.stopImmediatePropagation?e.stopImmediatePropagation():(e.propagationStopped=!0),e.stopPropagation(),e.preventDefault(),1)))}),(a.prototype.onClick=function(e){return this.trackingClick?((this.targetElement=null),!(this.trackingClick=!1)):("submit"===e.target.type&&0===e.detail)||((e=this.onMouse(e))||(this.targetElement=null),e)}),(a.prototype.destroy=function(){var e=this.layer;s&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)}),(a.notNeeded=function(e){var t,r;if(void 0===window.ontouchstart)return!0;if((r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1])){if(!s)return!0;if((t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<r&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(n&&10<=(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=r[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return("none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction)}),(a.attach=function(e,t){return new a(e,t)}),(t.exports=a)},{}],35:[function(e,t,r){var n=e("./data");t.exports.bind=function(e,t,r){t.guid||(t.guid=n.guid());function i(){return t.apply(e,arguments)}return(i.guid=r?r+"_"+t.guid:t.guid),i}},{"./data":30}],36:[function(e,t,r){function w(){"use strict";w=function(){return a};var a={},e=Object.prototype,l=e.hasOwnProperty,c=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function o(e,t,r){return(Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t])}try{o({},"")}catch(e){o=function(e,t,r){return(e[t]=r)}}function s(e,t,r,i){var n,o,a,s,t=t&&t.prototype instanceof d?t:d,t=Object.create(t.prototype),i=new b(i||[]);return(c(t,"_invoke",{value:((n=e),(o=r),(a=i),(s="suspendedStart"),function(e,t){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===e)throw t;return E()}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=(function e(t,r){var i=t.iterator[r.method];if(void 0===i){if(((r.delegate=null),"throw"===r.method)){if(t.iterator.return&&((r.method="return"),(r.arg=void 0),e(t,r),"throw"===r.method))return p;(r.method="throw"),(r.arg=new TypeError("The iterator does not provide a 'throw' method"))}return p}i=u(i,t.iterator,r.arg);if("throw"===i.type)return((r.method="throw"),(r.arg=i.arg),(r.delegate=null),p);i=i.arg;return i?i.done?((r[t.resultName]=i.value),(r.next=t.nextLoc),"return"!==r.method&&((r.method="next"),(r.arg=void 0)),(r.delegate=null),p):i:((r.method="throw"),(r.arg=new TypeError("iterator result is not an object")),(r.delegate=null),p)})(r,a);if(r){if(r===p)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw((s="completed"),a.arg);a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";r=u(n,o,a);if("normal"===r.type){if(((s=a.done?"completed":"suspendedYield"),r.arg===p))continue;return{value:r.arg,done:a.done}}"throw"===r.type&&((s="completed"),(a.method="throw"),(a.arg=r.arg))}})}),t)}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var p={};function d(){}function h(){}function f(){}var t={},y=(o(t,i,function(){return this}),Object.getPrototypeOf),y=y&&y(y(T([]))),_=(y&&y!==e&&l.call(y,i)&&(t=y),(f.prototype=d.prototype=Object.create(t)));function g(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function v(a,s){var t;c(this,"_invoke",{value:function(r,i){function e(){return new s(function(e,t){!(function t(e,r,i,n){var o,e=u(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==typeof r&&l.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,i,n)},function(e){t("throw",e,i,n)}):s.resolve(r).then(function(e){(o.value=e),i(o)},function(e){return t("throw",e,i,n)});n(e.arg)})(r,i,e,t)})}return(t=t?t.then(e,e):e())}})}function m(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&((t.finallyLoc=e[2]),(t.afterLoc=e[3])),this.tryEntries.push(t)}function S(e){var t=e.completion||{};(t.type="normal"),delete t.arg,(e.completion=t)}function b(e){(this.tryEntries=[{tryLoc:"root"}]),e.forEach(m,this),this.reset(!0)}function T(t){if(t){var r,e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return((r=-1),((e=function e(){for(;++r<t.length;)if(l.call(t,r))return(e.value=t[r]),(e.done=!1),e;return(e.value=void 0),(e.done=!0),e}).next=e))}return{next:E}}function E(){return{value:void 0,done:!0}}return(c(_,"constructor",{value:(h.prototype=f),configurable:!0}),c(f,"constructor",{value:h,configurable:!0}),(h.displayName=o(f,n,"GeneratorFunction")),(a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return(!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name)))}),(a.mark=function(e){return(Object.setPrototypeOf?Object.setPrototypeOf(e,f):((e.__proto__=f),o(e,n,"GeneratorFunction")),(e.prototype=Object.create(_)),e)}),(a.awrap=function(e){return{__await:e}}),g(v.prototype),o(v.prototype,r,function(){return this}),(a.AsyncIterator=v),(a.async=function(e,t,r,i,n){void 0===n&&(n=Promise);var o=new v(s(e,t,r,i),n);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})}),g(_),o(_,n,"Generator"),o(_,i,function(){return this}),o(_,"toString",function(){return"[object Generator]"}),(a.keys=function(e){var t,r=Object(e),i=[];for(t in r)i.push(t);return(i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in r)return(e.value=t),(e.done=!1),e}return(e.done=!0),e})}),(a.values=T),(b.prototype={constructor:b,reset:function(e){if(((this.prev=0),(this.next=0),(this.sent=this._sent=void 0),(this.done=!1),(this.delegate=null),(this.method="next"),(this.arg=void 0),this.tryEntries.forEach(S),!e))for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function e(e,t){return((o.type="throw"),(o.arg=r),(i.next=e),t&&((i.method="next"),(i.arg=void 0)),!!t)}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],o=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=l.call(n,"catchLoc"),s=l.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&l.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var o=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return((o.type=e),(o.arg=t),n?((this.method="next"),(this.next=n.finallyLoc),p):this.complete(o))},complete:function(e,t){if("throw"===e.type)throw e.arg;return("break"===e.type||"continue"===e.type?(this.next=e.arg):"return"===e.type?((this.rval=this.arg=e.arg),(this.method="return"),(this.next="end")):"normal"===e.type&&t&&(this.next=t),p)},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,i,n=this.tryEntries[t];if(n.tryLoc===e)return("throw"===(r=n.completion).type&&((i=r.arg),S(n)),i)}throw new Error("illegal catch attempt");},delegateYield:function(e,t,r){return((this.delegate={iterator:T(e),resultName:t,nextLoc:r}),"next"===this.method&&(this.arg=void 0),p)}}),a)}function l(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function a(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var i=s.apply(e,a);function n(e){l(i,t,r,n,o,"next",e)}function o(e){l(i,t,r,n,o,"throw",e)}n(void 0)})}}var i,s="undefined"==typeof Promise?e("es6-promise").Promise:Promise;(e=self),(i=function(){"use strict";function f(i,l,c,e){void 0===l&&(l=!1),void 0===c&&(c="");var u=performance.now(),p=e;return new s(function(o){(e=i),void 0===(t=l?100:0)&&(t=100),(r=document.createElement("video")).setAttribute("width",""+t),r.setAttribute("height",""+t),r.setAttribute("muted","muted"),r.setAttribute("crossorigin","anonymous"),r.setAttribute("preload","preload"),r.setAttribute("autoplay","autoplay"),r.setAttribute("webkit-playsinline","webkit-playsinline"),r.setAttribute("playsinline","playsinline"),r.setAttribute("x-webkit-airplay","x-webkit-airplay"),r.setAttribute("playsinline","playsinline"),(r.src=e);var e,t,r,a=r,s=setInterval(function(){var e,t,r,i,n;(performance.now()-u>p||0!==a.videoWidth)&&(clearInterval(s),(e=0!==a.videoWidth),l?(a.setAttribute("controls","controls"),(t=a),void 0===(r=c)&&(r=""),(i=document.createElement("dv")),((n=document.createElement("h3")).innerText=r),i.appendChild(t),i.appendChild(n),document.body.appendChild(i)):(a.pause(),(a=null)),o(e))})})}var i={d:function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},e={},t=(i.d(e,{default:function(){return o}}),navigator.userAgent),r=/qqbrowser/i.test(t.toLowerCase()),n=/Edge/i.test(t),n=/Chrome/i.test(t)&&!n&&!r,y=/Safari/i.test(t)&&!n,r=t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),n=r&&r[1],_=n&&Number(n.split(".")[0]),g=(function(){var t=a(w().mark(function e(t){var r;return w().wrap(function(e){for(;;)switch((e.prev=e.next)){case 0:return(e.next=2),fetch(t);case 2:return(r=e.sent),(e.next=5),r.blob();case 5:return((r=e.sent),e.abrupt("return",URL.createObjectURL(r)));case 7:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}})(),v={includeSystemHijack:!0,showVideo:!1,codecTags:["hev1","hvc1"],timeout:2e3},o=function(h){return(void 0===h&&(h={}),new s((function(){var t=a(w().mark(function e(t){var r,i,n,o,a,s,l,c,u,p,d;return w().wrap(function(e){for(;;)switch((e.prev=e.next)){case 0:if(((n=Object.assign({},v,h)),(r=n.includeSystemHijack),(i=n.showVideo),(s=n.codecTags),(n=n.timeout),(o=performance.now()),(a=-1<s.indexOf("hvc1")),(s=-1<s.indexOf("hev1")),(l="https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4"),(p=u=!(c="https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4")),!(y&&_&&11<=_))){e.next=13;break}if(((e.t0=r),e.t0)){e.next=8;break}return(e.next=7),g(l);case 7:l=e.sent;case 8:return(e.next=10),f(l,i,"hvc1",n);case 10:(u=e.sent),(e.next=33);break;case 13:if(((e.t1=a),!e.t1)){e.next=23;break}if(((e.t2=r),e.t2)){e.next=20;break}return(e.next=19),g(l);case 19:l=e.sent;case 20:return(e.next=22),f(l,i,"hvc1",n);case 22:u=e.sent;case 23:if(((e.t3=s),!e.t3)){e.next=33;break}if(((e.t4=r),e.t4)){e.next=30;break}return(e.next=29),g(c);case 29:c=e.sent;case 30:return(e.next=32),f(c,i,"hev1",n);case 32:p=e.sent;case 33:(d=performance.now()),t({isHvc1Supported:u,isHev1Supported:p,time:Math.ceil(d-o)});case 35:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}})()))};return e.default}),"object"==typeof r&&"object"==typeof t?(t.exports=i()):"function"==typeof define&&define.amd?define([],i):"object"==typeof r?(r.hevcDetector=i()):(e.hevcDetector=i())},{"es6-promise":8}],37:[function(e,t,r){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(((r=r||{}),(e=e.trim()),!(t=t.trim()))){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(i)return((i.path=s.normalizePath(i.path)),s.buildURLFromParts(i));throw new Error("Error trying to parse base URL.");}i=s.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?((i.path=s.normalizePath(i.path)),s.buildURLFromParts(i)):t;t=s.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&((e=o.exec(t.path)),(t.netLoc=e[1]),(t.path=e[2])),t.netLoc&&!t.path&&(t.path="/");var n,e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return(i.netLoc||((e.netLoc=t.netLoc),"/"!==i.path[0]&&(i.path?((n=(n=t.path).substring(0,n.lastIndexOf("/")+1)+i.path),(e.path=s.normalizePath(n))):((e.path=t.path),i.params||((e.params=t.params),i.query)||(e.query=t.query)))),null===e.path&&(e.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(e))},parseURL:function(e){e=i.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return(e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment)}};t.exports=s},{}],38:[function(e,t,r){function i(e){for(var t in(e="string"==typeof e?this.parseAttrList(e):e))e.hasOwnProperty(t)&&(this[t]=e[t])}var n=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;(i.prototype={decimalInteger:function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},hexadecimalInteger:function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},hexadecimalIntegerAsNumber:function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},decimalFloatingPoint:function(e){return parseFloat(this[e])},enumeratedString:function(e){return this[e]},decimalResolution:function(e){e=n.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},parseAttrList:function(e){var t,r={};for(o.lastIndex=0;null!==(t=o.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),(r[t[1]]=i)}return r}}),(t.exports=i)},{}],39:[function(e,t,r){function S(){(this.method=null),(this.key=null),(this.iv=null),(this._uri=null)}function b(){(this._url=null),(this._byteRange=null),(this._decryptdata=null),(this.tagList=[])}function i(){this.loaders={}}var n=e("../constants"),l=e("../playerutil"),T=e("./attrlist"),c=e("../io"),o=e("./URLToolkit"),u=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,p=/#EXT-X-MEDIA:(.*)/g,E=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),w=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,d="RegionBlock";(b.prototype.getUrl=function(){return(!this._url&&this.relurl&&(this._url=o.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url)}),(b.prototype.Seturl=function(e){this._url=e}),(b.prototype.getProgramDateTime=function(){return(!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime)}),(b.prototype.GetbyteRange=function(){var e,t,r;return(this._byteRange||((e=this._byteRange=[]),this.rawByteRange&&(1===(t=this.rawByteRange.split("@",2)).length?((r=this.lastByteRangeEndOffset),(e[0]=r||0)):(e[0]=parseInt(t[1])),(e[1]=parseInt(t[0])+e[0]))),this._byteRange)}),(b.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]}),(b.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]}),(b.prototype.getDecryptdata=function(){return(this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata)});(i.prototype=(((e={parseMasterPlaylist:function(e,t){var r=[];for(u.lastIndex=0;null!=(o=u.exec(e));){var i={},n=(i.attrs=new T(o[1])),o=((i.url=this.resolve(o[2],t)),n.decimalResolution("RESOLUTION"));if((o&&((i.width=o.width),(i.height=o.height)),(i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH")),(i.name=n.NAME),(a=n.CODECS)))for(var a=a.split(/[ ,]+/),s=0;s<a.length;s++){var l=a[s];-1!==l.indexOf("avc1")?(i.videoCodec=this.avc1toavcoti(l)):-1!==l.indexOf("hvc1")?(i.videoCodec=l):(i.audioCodec=l)}r.push(i)}return r},parseMasterPlaylistMedia:function(e,t,r,i){var n=[],o=0;for(p.lastIndex=0;null!=(s=p.exec(e));){var a={},s=new T(s[1]);s.TYPE===r&&((a.groupId=s["GROUP-ID"]),(a.name=s.NAME),(a.type=r),(a.default="YES"===s.DEFAULT),(a.autoselect="YES"===s.AUTOSELECT),(a.forced="YES"===s.FORCED),s.URI&&(a.url=this.resolve(s.URI,t)),(a.lang=s.LANGUAGE),a.name||(a.name=a.lang),i&&(a.audioCodec=i),(a.id=o++),n.push(a))}return n},avc1toavcoti:function(e){var t=e.split("."),r=2<t.length?((r=t.shift()+"."),(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r},load:function(o,a,i){var s=this;c.get(o,function(e){var t,r,i,n=s.parseMasterPlaylist(e,o);n.length&&((t=s.parseMasterPlaylistMedia(e,o,"AUDIO",n[0].audioCodec)),(r=s.parseMasterPlaylistMedia(e,o,"SUBTITLES")),t.length)&&((i=!1),t.forEach(function(e){e.url||(i=!0)}),!1===i)&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),t.unshift({type:"main",name:"main"})),a({levels:n,audioTracks:t,subtitles:r,url:o,string:e})},function(e,t,r){i&&((r=l.parseHttpHeaders(r)["x-tengine-error"])&&-1<n.RegionBlockMessages.indexOf(r)&&(e=d),i(e,t))})},loadMediaPlaylist:function(e,t,r){var i=this,n=(e=e||{}).string,o=e.url;n?((e=i.parseLevelPlaylist(n,o)),t(e)):c.get(o,function(e){e=i.parseLevelPlaylist(e,o);t(e)},function(e){r&&r(e)})},resolve:function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(e,t){var r=[];for(u.lastIndex=0;null!=(o=u.exec(e));){var i={},n=(i.attrs=new T(o[1])),o=((i.url=this.resolve(o[2],t)),n.decimalResolution("RESOLUTION"));if((o&&((i.width=o.width),(i.height=o.height)),(i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH")),(i.name=n.NAME),(a=n.CODECS)))for(var a=a.split(/[ ,]+/),s=0;s<a.length;s++){var l=a[s];-1!==l.indexOf("avc1")?(i.videoCodec=this.avc1toavcoti(l)):-1!==l.indexOf("hvc1")?(i.videoCodec=l):(i.audioCodec=l)}r.push(i)}return r}),(e.parseMasterPlaylistMedia=function(e,t,r,i){var n=[],o=0;for(p.lastIndex=0;null!=(s=p.exec(e));){var a={},s=new T(s[1]);s.TYPE===r&&((a.groupId=s["GROUP-ID"]),(a.name=s.NAME),(a.type=r),(a.default="YES"===s.DEFAULT),(a.autoselect="YES"===s.AUTOSELECT),(a.forced="YES"===s.FORCED),s.URI&&(a.url=this.resolve(s.URI,t)),(a.lang=s.LANGUAGE),a.name||(a.name=a.lang),i&&(a.audioCodec=i),(a.id=o++),n.push(a))}return n}),(e.avc1toavcoti=function(e){var t=e.split("."),r=2<t.length?((r=t.shift()+"."),(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r}),(e.parseLevelPlaylist=function(e,t,r,i){var n,o,a=0,s=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new S(),u=0,p=null,d=new b();for(E.lastIndex=0;null!==(n=E.exec(e));){var h=n[1];if(h){d.duration=parseFloat(h);var f=(" "+n[2]).slice(1);(d.title=f||null),d.tagList.push(f?["INF",h,f]:["INF",h])}else if(n[3])isNaN(d.duration)||((f=a++),(d.type=i),(d.start=s),(d.levelkey=c),(d.sn=f),(d.level=r),(d.cc=u),(d.baseurl=t),(d.relurl=(" "+n[3]).slice(1)),l.fragments.push(d),(s+=(p=d).duration),(d=new b()));else if(n[4])(d.rawByteRange=(" "+n[4]).slice(1)),p&&(h=p.byteRangeEndOffset)&&(d.lastByteRangeEndOffset=h);else if(n[5])(d.rawProgramDateTime=(" "+n[5]).slice(1)),d.tagList.push(["PROGRAM-DATE-TIME",d.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(n[5]))-1e3*s));else{for(n=n[0].match(w),o=1;o<n.length&&void 0===n[o];o++);var y=(" "+n[o+1]).slice(1),_=(" "+n[o+2]).slice(1);switch(n[o]){case"#":d.tagList.push(_?[y,_]:[y]);break;case"PLAYLIST-TYPE":l.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(y);break;case"TARGETDURATION":l.targetduration=parseFloat(y);break;case"VERSION":l.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,d.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(y);break;case"KEY":var g=new T(y),v=g.enumeratedString("METHOD"),m=g.URI,g=g.hexadecimalInteger("IV");v&&((c=new S()),m)&&0<=["AES-128","SAMPLE-AES"].indexOf(v)&&((c.method=v),(c.baseuri=t),(c.reluri=m),(c.key=null),(c.iv=g));break;case"START":v=new T(y).decimalFloatingPoint("TIME-OFFSET");isNaN(v)||(l.startTimeOffset=v);break;case"MAP":m=new T(y);(d.relurl=m.URI),(d.rawByteRange=m.BYTERANGE),(d.baseurl=t),(d.level=r),(d.type=i),(d.sn="initSegment"),(l.initSegment=d),(d=new b());break;case"PART-INF":g=new T(y);l.partTarget=g.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+n)}}}return((d=p)&&!d.relurl&&(l.fragments.pop(),(s-=d.duration)),(l.totalduration=s),(l.averagetargetduration=s/l.fragments.length),(l.endSN=a-1),l)}),e)),(i.ERROR_REGION_BLOCK=d),(t.exports=i)},{"../constants":28,"../io":40,"../playerutil":46,"./URLToolkit":37,"./attrlist":38}],40:[function(e,s,t){var h=e("./url");(s.exports.get=function(e,t,r,i,n){s.exports.ajax("GET",e,{},t,r,i,n)}),(s.exports.post=function(e,t,r,i,n,o){var a={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};s.exports.ajax("POST",e,t,r,i,n,o,a)}),(s.exports.postWithHeader=function(e,t,r,i,n){s.exports.ajax("POST",e,t,i,n,!0,!1,r)}),(s.exports.ajax=function(e,t,r,i,n,o,a,s){var l,c,u,p;(n=n||function(){}),"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.");}),(c=new XMLHttpRequest()),(u=h.parseUrl(t)),(p=window.location),!(u.protocol+u.host!==p.protocol+p.host)||!window.XDomainRequest||"withCredentials"in c?((l="file:"==u.protocol||"file:"==p.protocol),(c.onreadystatechange=function(){4===c.readyState&&(200===c.status||(l&&0===c.status)?i(c.responseText):n(c.responseText,c.status,c))})):(((c=new window.XDomainRequest()).onload=function(){i(c.responseText)}),(c.onerror=n),(c.onprogress=function(){}),(c.ontimeout=n));try{if((void 0===o&&(o=!0),c.open(e,t,o),a&&(c.withCredentials=!0),s))for(var d in s)s.hasOwnProperty(d)&&c.setRequestHeader(d,s[d])}catch(e){return void n(e)}try{c.send(r)}catch(e){n(e)}}),(s.exports.jsonp=function(e,t,r){var i="jsonp_callback_"+Math.round(1e5*Math.random()),n=document.createElement("script");e&&((n.src=e+(0<=e.indexOf("?")?"&":"?")+"callback="+i+"&cb="+i),(n.onerror=function(){delete window[i],document.body.removeChild(n),r()}),(n.onload=function(){setTimeout(function(){window[i]&&(delete window[i],document.body.removeChild(n))},0)}),(window[i]=function(e){delete window[i],document.body.removeChild(n),t(e)}),document.body.appendChild(n))}),(s.exports.loadJS=function(e,t,r){var i=document.getElementsByTagName("HEAD").item(0),n=document.createElement("script");e&&e.toLowerCase().indexOf("https://")<0&&e.toLowerCase().indexOf("http://")<0&&(e=document.URL.replace(/(\/[^\/]*?)$/i,"")+e),(n.type="text/javascript"),(n.src=e),(n.onload=function(){t&&t()}),(n.onerror=function(){r&&r()}),i.appendChild(n)})},{"./url":50}],41:[function(e,t,r){var a=e("./dom");t.exports.render=function(e,t){var r=t.align||(t.className?"":"tl"),i=t.x||0,t=t.y||0,n=i.indexOf&&0<i.indexOf("%")?"":"px",o=t.indexOf&&0<t.indexOf("%")?"":"px";"tl"===r?a.css(e,{float:"left","margin-left":i+n,"margin-top":t+o}):"tr"===r?a.css(e,{float:"right","margin-right":i+n,"margin-top":t+o}):"tlabs"===r?a.css(e,{position:"absolute",left:i+n,top:t+o}):"trabs"===r?a.css(e,{position:"absolute",right:i+n,top:t+o}):"blabs"===r?a.css(e,{position:"absolute",left:i+n,bottom:t+o}):"brabs"===r?a.css(e,{position:"absolute",right:i+n,bottom:t+o}):"cc"===r&&a.addClass(e,"loading-center")}},{"./dom":32}],42:[function(e,a,t){var s=Object.prototype.hasOwnProperty;(a.exports.create=Object.create||function(e){function t(){}return(t.prototype=e),new t()}),(a.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(arg)}),(a.exports.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0}),(a.exports.each=function(e,t,r){if(a.exports.isArray(e))for(var i=0,n=e.length;i<n&&!1!==t.call(r||this,e[i],i);++i);else for(var o in e)if(s.call(e,o)&&!1===t.call(r||this,o,e[o]))break;return e}),(a.exports.merge=function(e,t){if(t)for(var r in t)s.call(t,r)&&(e[r]=t[r]);return e}),(a.exports.deepMerge=function(e,t){var r,i,n;for(r in((e=a.exports.copy(e)),t))s.call(t,r)&&((i=e[r]),(n=t[r]),a.exports.isPlain(i)&&a.exports.isPlain(n)?(e[r]=a.exports.deepMerge(i,n)):(e[r]=t[r]));return e}),(a.exports.copy=function(e){return a.exports.merge({},e)}),(a.exports.isPlain=function(e){return(!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object)}),(a.exports.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}),(a.exports.unescape=function(e){return e.replace(/&([^;]+);/g,function(e,t){return({amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[t.toLowerCase()]||e)})})},{}],43:[function(e,t,r){var n,o=e("./object");((n=function(){}).extend=function(e){var t,r,i=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){};for(r in(((((t=function(){i.apply(this,arguments)}).prototype=o.create(this.prototype)).constructor=t).extend=n.extend),(t.create=n.create),e))e.hasOwnProperty(r)&&(t.prototype[r]=e[r]);return t}),(n.create=function(){var e=o.create(this.prototype);return this.apply(e,arguments),e}),(t.exports=n)},{"./object":42}],44:[function(e,t,r){var i=!new Function("try {return this===window;}catch(e){ return false;}")();t.exports.isSSR=i},{}],45:[function(e,f,t){var y=e("./object"),r=e("../config"),i=e("./dom"),n=e("./cookie"),o=e("./constants"),a=e("../lang/index"),s=e("./ua"),l=e("./io"),_=e("../player/base/plugin/defaultemptycomponent"),c=e("./hardware-decoding-detector"),g={preload:!0,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],snapshotWatermark:{left:"500",top:"100",text:"",font:"16px \u5b8b\u4f53",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,flvOption:{accurateSeek:!0},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,lowLatencyMode:!1,useHls2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsFallbackSource:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+r.domain+"/de/prismplayer-flash/"+r.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null},u=((f.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}]),(f.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}]),(f.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]),(f.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""}),(f.exports.canPlayHls=function(){return""!=f.exports.canPlayType("application/x-mpegURL")}),(f.exports.isUsedHlsPluginOnMobile=function(e){return!!(s.IS_MOBILE&&(s.IS_CHROME||s.IS_FIREFOX||s.IS_X5||s.IS_EDGE_NEW)&&f.exports.isSupportHls())}),(f.exports.isSafariUsedHlsPlugin=function(e){return!!(s.os.pc&&s.browser.safari&&e)}),(f.exports.hasUIComponent=function(e,t){if(void 0!==e&&e&&0!=e.length)for(var r=0,i=e.length;r<i;r++){var n=e[r].name;if(n==t)return!0;if("controlBar"==n)return f.exports.hasUIComponent(e[r].children,t)}return!1}),(f.exports.validateSource=function(e){return!0}),(f.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType}),(f.exports.createWrapper=function(e){var t=e.id,t="string"==typeof t?(0===t.indexOf("#")&&(t=t.slice(1)),i.el(t)):t;if(t&&t.nodeName)return f.exports.adjustContainerLayout(t,e),t;throw new TypeError("\u6ca1\u6709\u4e3a\u64ad\u653e\u5668\u6307\u5b9a\u5bb9\u5668");}),(f.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)}),(f.exports.isSupportHls=function(){var e=(window.MediaSource=window.MediaSource||window.WebKitMediaSource),t=(window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer),e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||(t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove);return e&&t}),(f.exports.isSupportFlv=function(){return f.exports.isSupportHls()}),(f.exports.isSupportMSE=function(){return(!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&f.exports.isSupportedMediaSource())}),(f.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported}),(f.exports.isSupportedDrm=function(){return(!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&f.exports.isSupportMSE())}),(f.exports.isAudio=function(e){return e&&0<e.toLowerCase().indexOf(".mp3")}),(f.exports.isLiveShift=function(e){return e.isLive&&e.liveStartTime&&e.liveOverTime}),(f.exports.isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")}),(f.exports.isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")}),(f.exports.isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")}),(f.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")}),(f.exports.isRts=function(e){return e&&-1<e.toLowerCase().indexOf("artc:")}),(f.exports.isMp4=function(e){return e&&-1<e.toLowerCase().indexOf(".mp4")}),(f.exports.checkSecuritSupport=function(){return f.exports.isSupportHls()?"":s.IS_IOS?a.get("iOSNotSupportVodEncription"):a.get("UseChromeForVodEncription")}),(f.exports.nativeSupportH265=function(){return s.IS_IOS||s.IS_MAC_SAFARI}),(f.exports.findSelectedStreamLevel=function(e,t){var r=t;if(r||(r=n.get(o.SelectedStreamLevel))){for(var i=0;i<e.length;i++)if(e[i].definition==r)return i}else n.set(o.SelectedStreamLevel,e[0].definition,365);return 0}),(f.exports.getHistoryDetectResult=function(e){if(e)return"hvc1"===e?n.get(o.HWDetectHvc1):"hev1"===e?n.get(o.HWDetectHev1):void 0}),(f.exports.setHistoryDetectResult=function(e,t){var r="unknownCodec";"hvc1"===e?(r=o.HWDetectHvc1):"hev1"===e&&(r=o.HWDetectHev1),n.set(r,t)}),(f.exports.handleOption=function(e,t){f.exports.isRts(e.source)&&(e.isLive=!0);var r,i=y.merge(y.copy(g),e),n=[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}],o=!1;if((e.useFlashPrism||f.exports.isRTMP(e.source)?((o=!0),(n=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}])):(r=f.exports.isLiveShift(i))?(n.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),n.push({name:"playButton",align:"tl",x:15,y:12}),n.push({name:"liveDisplay",align:"tl",x:15,y:6})):n.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),e.isLive))if(void 0===e.skinLayout)i.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:f.exports.isRts(e.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:n}];else if(0!=e.skinLayout){for(var a=e.skinLayout.length,s=[],l=-1,c=0;c<a;c++)if("controlBar"==i.skinLayout[c].name){for(var l=c,u=i.skinLayout[c].children.length,p=0;p<u;p++){var d,h=i.skinLayout[c].children[p].name;("liveDisplay"!=h&&"liveIco"!=h&&"fullScreenButton"!=h&&"volume"!=h&&"snapshot"!=h&&"setting"!=h&&"subtitle"!=h&&(!r||("progress"!=h&&"playButton"!=h&&"timeDisplay"!=h)))||((d=i.skinLayout[c].children[p]),"progress"==h?(d.name="liveShiftProgress"):"timeDisplay"==h?(d.name="liveShiftTimeDisplay"):o&&"liveDisplay"==h&&(d.name="liveIco"),s.push(d))}break}-1!=l&&(i.skinLayout[l].children=s)}return((void 0===e.components||!e.components||(y.isArray(e.components)&&0==e.components.length))&&"false"!=e.components&&(i.components=[_]),i)}),(f.exports.getLiveHostByRegion=function(e){var t="live.aliyuncs.com";return e&&-1<["ap-southeast-1","eu-central-1"].indexOf(e)?"live."+e+".aliyuncs.com":t}),(f.exports.isVideoTag=function(e){return(e&&"string"==typeof e.nodeName&&"video"===e.nodeName.toLowerCase())}),(f.exports.unqiueTextTracks=function(e){var t=[],t=(e=void 0===e?[]:e).reduce(function(e,t){var r;return e.some(function(e){return e.srclang===t.srclang})?e:(((r=t).label=t.label||t.srclang),[].concat(e,[r]))},[]),r={};return(t.forEach(function(e,t){r[e.label]?r[e.label].push(t):(r[e.label]=[t])}),Object.keys(r).forEach(function(e){e=r[e]||[];1<e.length&&e.forEach(function(e){t[e].label=t[e].label+"("+t[e].srclang+")"})}),t)}),(f.exports.isHvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hvc1")}),(f.exports.isHev1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hev1")}),(f.exports.isH265Codec=function(e){return(f.exports.isHvc1Codec((e=void 0===e?"":e))||f.exports.isHev1Codec(e))}),(f.exports.getVideoTrack=function(e){var t;return((e=void 0===e?[]:e).forEach(function(e){1===Number(e.type)&&(t=e)}),t)}),(s.IS_ANDROID&&(s.dingTalk()||s.IS_UC||s.is_X5||s.IS_HUAWEI||s.IS_XIAOMI||s.IS_OPPO||s.IS_VIVO||s.IS_MEIZU||s.IS_SAMSUNG||s.IS_WEBVIEW))||(s.os&&"windows"===s.os.name&&s.IS_UC));(f.exports.shouldUseBasePlayer=function(t,r){var e,i="supported",n="unsupported";return!t||((e=f.exports.isHvc1Codec(t)),f.exports.nativeSupportH265()&&e)||(function(){if(!(!u&&(s.IS_CHROME||s.IS_EDGE_NEW)))return!1;var t=0;try{t=s.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch(e){t=0}return!(parseInt(t)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))})()?r(!0):u?(e=f.exports.getHistoryDetectResult(t))===i?r(!0):e===n?r(!1):void c({codecTags:[t],timeout:2e3}).then(function(e){e=e.isHev1Supported||e.isHvc1Supported;if((f.exports.setHistoryDetectResult(t,e?i:n),e))return r(!0);r(!1)}).catch(function(e){console.log("hevcDetector ERROR",e),r(!1)}):r(!1)}),(f.exports.parseHttpHeaders=function(e){if(e)try{var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return(t.forEach(function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");r[t]=e}),r)}catch(e){}}),(f.exports.detectRegionBlock=function(e,i){l.get(e,function(){i(!1)},function(e,t,r){r=f.exports.parseHttpHeaders(r)["x-tengine-error"];403===t&&r&&-1<o.RegionBlockMessages.indexOf(r)?i(!0):i(!1)})})},{"../config":14,"../lang/index":23,"../player/base/plugin/defaultemptycomponent":92,"./constants":28,"./cookie":29,"./dom":32,"./hardware-decoding-detector":36,"./io":40,"./object":42,"./ua":49}],46:[function(e,f,t){var y=e("./object"),r=e("../config"),i=e("./dom"),n=e("./cookie"),o=e("./constants"),a=e("../lang/index"),s=e("./ua"),l=e("./io"),_=e("../player/base/plugin/defaultemptycomponent"),c=e("./hardware-decoding-detector"),g={preload:!0,autoplay:!0,useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],snapshotWatermark:{left:"500",top:"100",text:"",font:"16px \u5b8b\u4f53",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!0,stashInitialSizeForFlv:32,flvOption:{accurateSeek:!0},hlsOption:{stopLoadAsPaused:!1},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,lowLatencyMode:!1,useHls2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsFallbackSource:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+r.domain+"/de/prismplayer-flash/"+r.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null},u=((f.exports.defaultH5Layout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}]),(f.exports.defaultAudioLayout=[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}]),(f.exports.defaultFlashLayout=[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]),(f.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""}),(f.exports.canPlayHls=function(){return""!=f.exports.canPlayType("application/x-mpegURL")}),(f.exports.isUsedHlsPluginOnMobile=function(e){return!!(s.IS_MOBILE&&(s.IS_CHROME||s.IS_FIREFOX||s.IS_X5||s.IS_EDGE_NEW)&&f.exports.isSupportHls())}),(f.exports.isSafariUsedHlsPlugin=function(e){return!!(s.os.pc&&s.browser.safari&&e)}),(f.exports.hasUIComponent=function(e,t){if(void 0!==e&&e&&0!=e.length)for(var r=0,i=e.length;r<i;r++){var n=e[r].name;if(n==t)return!0;if("controlBar"==n)return f.exports.hasUIComponent(e[r].children,t)}return!1}),(f.exports.validateSource=function(e){return!0}),(f.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType}),(f.exports.createWrapper=function(e){var t=e.id,t="string"==typeof t?(0===t.indexOf("#")&&(t=t.slice(1)),i.el(t)):t;if(t&&t.nodeName)return f.exports.adjustContainerLayout(t,e),t;throw new TypeError("\u6ca1\u6709\u4e3a\u64ad\u653e\u5668\u6307\u5b9a\u5bb9\u5668");}),(f.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)}),(f.exports.isSupportHls=function(){var e=(window.MediaSource=window.MediaSource||window.WebKitMediaSource),t=(window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer),e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=!t||(t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove);return e&&t}),(f.exports.isSupportFlv=function(){return f.exports.isSupportHls()}),(f.exports.isSupportMSE=function(){return(!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach&&f.exports.isSupportedMediaSource())}),(f.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported}),(f.exports.isSupportedDrm=function(){return(!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&f.exports.isSupportMSE())}),(f.exports.isAudio=function(e){return e&&0<e.toLowerCase().indexOf(".mp3")}),(f.exports.isLiveShift=function(e){return e.isLive&&e.liveStartTime&&e.liveOverTime}),(f.exports.isHls=function(e){return e&&0<e.toLowerCase().indexOf(".m3u8")}),(f.exports.isDash=function(e){return e&&0<e.toLowerCase().indexOf(".mpd")}),(f.exports.isFlv=function(e){return e&&0<e.toLowerCase().indexOf(".flv")}),(f.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")}),(f.exports.isRts=function(e){return e&&-1<e.toLowerCase().indexOf("artc:")}),(f.exports.isMp4=function(e){return e&&-1<e.toLowerCase().indexOf(".mp4")}),(f.exports.checkSecuritSupport=function(){return f.exports.isSupportHls()?"":s.IS_IOS?a.get("iOSNotSupportVodEncription"):a.get("UseChromeForVodEncription")}),(f.exports.nativeSupportH265=function(){return s.IS_IOS||s.IS_MAC_SAFARI}),(f.exports.findSelectedStreamLevel=function(e,t){var r=t;if(r||(r=n.get(o.SelectedStreamLevel))){for(var i=0;i<e.length;i++)if(e[i].definition==r)return i}else n.set(o.SelectedStreamLevel,e[0].definition,365);return 0}),(f.exports.getHistoryDetectResult=function(e){if(e)return"hvc1"===e?n.get(o.HWDetectHvc1):"hev1"===e?n.get(o.HWDetectHev1):void 0}),(f.exports.setHistoryDetectResult=function(e,t){var r="unknownCodec";"hvc1"===e?(r=o.HWDetectHvc1):"hev1"===e&&(r=o.HWDetectHev1),n.set(r,t)}),(f.exports.handleOption=function(e,t){f.exports.isRts(e.source)&&(e.isLive=!0);var r,i=y.merge(y.copy(g),e),n=[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}],o=!1;if((e.useFlashPrism||f.exports.isRTMP(e.source)?((o=!0),(n=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}])):(r=f.exports.isLiveShift(i))?(n.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),n.push({name:"playButton",align:"tl",x:15,y:12}),n.push({name:"liveDisplay",align:"tl",x:15,y:6})):n.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),e.isLive))if(void 0===e.skinLayout)i.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:f.exports.isRts(e.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:n}];else if(0!=e.skinLayout){for(var a=e.skinLayout.length,s=[],l=-1,c=0;c<a;c++)if("controlBar"==i.skinLayout[c].name){for(var l=c,u=i.skinLayout[c].children.length,p=0;p<u;p++){var d,h=i.skinLayout[c].children[p].name;("liveDisplay"!=h&&"liveIco"!=h&&"fullScreenButton"!=h&&"volume"!=h&&"snapshot"!=h&&"setting"!=h&&"subtitle"!=h&&(!r||("progress"!=h&&"playButton"!=h&&"timeDisplay"!=h)))||((d=i.skinLayout[c].children[p]),"progress"==h?(d.name="liveShiftProgress"):"timeDisplay"==h?(d.name="liveShiftTimeDisplay"):o&&"liveDisplay"==h&&(d.name="liveIco"),s.push(d))}break}-1!=l&&(i.skinLayout[l].children=s)}return((void 0===e.components||!e.components||(y.isArray(e.components)&&0==e.components.length))&&"false"!=e.components&&(i.components=[_]),i)}),(f.exports.getLiveHostByRegion=function(e){var t="live.aliyuncs.com";return e&&-1<["ap-southeast-1","eu-central-1"].indexOf(e)?"live."+e+".aliyuncs.com":t}),(f.exports.isVideoTag=function(e){return(e&&"string"==typeof e.nodeName&&"video"===e.nodeName.toLowerCase())}),(f.exports.unqiueTextTracks=function(e){var t=[],t=(e=void 0===e?[]:e).reduce(function(e,t){var r;return e.some(function(e){return e.srclang===t.srclang})?e:(((r=t).label=t.label||t.srclang),[].concat(e,[r]))},[]),r={};return(t.forEach(function(e,t){r[e.label]?r[e.label].push(t):(r[e.label]=[t])}),Object.keys(r).forEach(function(e){e=r[e]||[];1<e.length&&e.forEach(function(e){t[e].label=t[e].label+"("+t[e].srclang+")"})}),t)}),(f.exports.isHvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hvc1")}),(f.exports.isHev1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hev1")}),(f.exports.isH265Codec=function(e){return(f.exports.isHvc1Codec((e=void 0===e?"":e))||f.exports.isHev1Codec(e))}),(f.exports.getVideoTrack=function(e){var t;return((e=void 0===e?[]:e).forEach(function(e){1===Number(e.type)&&(t=e)}),t)}),(s.IS_ANDROID&&(s.dingTalk()||s.IS_UC||s.is_X5||s.IS_HUAWEI||s.IS_XIAOMI||s.IS_OPPO||s.IS_VIVO||s.IS_MEIZU||s.IS_SAMSUNG||s.IS_WEBVIEW))||(s.os&&"windows"===s.os.name&&s.IS_UC));(f.exports.shouldUseBasePlayer=function(t,r){var e,i="supported",n="unsupported";return!t||((e=f.exports.isHvc1Codec(t)),f.exports.nativeSupportH265()&&e)||(function(){if(!(!u&&(s.IS_CHROME||s.IS_EDGE_NEW)))return!1;var t=0;try{t=s.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch(e){t=0}return!(parseInt(t)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))})()?r(!0):u?(e=f.exports.getHistoryDetectResult(t))===i?r(!0):e===n?r(!1):void c({codecTags:[t],timeout:2e3}).then(function(e){e=e.isHev1Supported||e.isHvc1Supported;if((f.exports.setHistoryDetectResult(t,e?i:n),e))return r(!0);r(!1)}).catch(function(e){console.log("hevcDetector ERROR",e),r(!1)}):r(!1)}),(f.exports.parseHttpHeaders=function(e){if(e)try{var t=e.getAllResponseHeaders().trim().split(/[\r\n]+/),r={};return(t.forEach(function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");r[t]=e}),r)}catch(e){}}),(f.exports.detectRegionBlock=function(e,i){l.get(e,function(){i(!1)},function(e,t,r){r=f.exports.parseHttpHeaders(r)["x-tengine-error"];403===t&&r&&-1<o.RegionBlockMessages.indexOf(r)?i(!0):i(!1)})})},{"../config":14,"../lang/index":23,"../player/base/plugin/defaultemptycomponent":92,"./constants":28,"./cookie":29,"./dom":32,"./hardware-decoding-detector":36,"./io":40,"./object":42,"./ua":49}],47:[function(e,o,t){var i=e("./object"),a=e("../player/adaptiveplayer"),s=e("./constants").USER_EVENT_NAME;(o.exports.reloadInstance=function(e,t,r){r.dispose();var i=e.readyCallback,n=e._readyCallbackCalled,e=a.create(e,function(e){t(e),n||i(e)});o.exports.restoreUserEvents(e),o.exports.removeAllProps(r),((r.__proto__=e)[s]=r[s])}),(o.exports.storeUserEvents=function(e){var r=e,i=r.__proto__.on,n={};(r.on=function(e,t){"function"==typeof t&&(n[e]?n[e].push(t):(n[e]=[t]),this._el)&&((t.binded=!0),i.call(r,e,t))}),(r[s]=n)}),(o.exports.restoreUserEvents=function(r){var e=player[s];e&&i.each(e,function(t){e[t].forEach(function(e){r.on(t,e)})})}),(o.exports.removeAllProps=function(e,t){for(var r in((t=[].concat((t=t||[]),[s])),e))e.hasOwnProperty(r)&&-1===t.indexOf(r)&&delete e[r]})},{"../player/adaptiveplayer":67,"./constants":28,"./object":42}],48:[function(e,t,r){(t.exports.set=function(t,r){try{window.localStorage&&localStorage.setItem(t,r)}catch(e){window[t+"_localStorage"]=r}}),(t.exports.get=function(t){try{if(window.localStorage)return localStorage.getItem(t)}catch(e){return window[t+"_localStorage"]}return""})},{}],49:[function(e,x,t){var r,i,n,o;if(((x.exports.USER_AGENT=navigator.userAgent),(x.exports.IS_IPHONE=/iPhone/i.test(x.exports.USER_AGENT)),(x.exports.IS_IPAD=/iPad/i.test(x.exports.USER_AGENT)),(x.exports.IS_IPOD=/iPod/i.test(x.exports.USER_AGENT)),(x.exports.IS_MAC=/mac/i.test(x.exports.USER_AGENT)),(x.exports.IS_EDGE=/Edge/i.test(x.exports.USER_AGENT)),(x.exports.IS_EDGE_NEW=/Edg/i.test(x.exports.USER_AGENT)&&!x.exports.IS_EDGE),(x.exports.IS_IE11=/Trident\/7.0/i.test(x.exports.USER_AGENT)),(x.exports.IS_X5=/qqbrowser/i.test(x.exports.USER_AGENT.toLowerCase())),(x.exports.IS_CHROME=/Chrome/i.test(x.exports.USER_AGENT)&&!x.exports.IS_EDGE&&!x.exports.IS_EDGE_NEW&&!x.exports.IS_X5),(x.exports.IS_SAFARI=/Safari/i.test(x.exports.USER_AGENT)&&!x.exports.IS_CHROME&&!x.exports.IS_EDGE_NEW),(x.exports.IS_FIREFOX=/Firefox/i.test(x.exports.USER_AGENT)),(x.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(x.exports.USER_AGENT)),(x.exports.IS_HUAWEI=/HuaweiBrowser/i.test(x.exports.USER_AGENT)),(x.exports.IS_XIAOMI=/MiuiBrowser/i.test(x.exports.USER_AGENT)),(x.exports.IS_OPPO=/HeyTapBrowser/i.test(x.exports.USER_AGENT)),(x.exports.IS_VIVO=/VivoBrowser/i.test(x.exports.USER_AGENT)),(x.exports.IS_MEIZU=/MZBrowser/i.test(x.exports.USER_AGENT)),(x.exports.IS_SAMSUNG=/samsungbrowser/i.test(x.exports.USER_AGENT)),document.all))try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");x.exports.HAS_FLASH=!!a}catch(e){x.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?((a=navigator.plugins["Shockwave Flash"]),(x.exports.HAS_FLASH=!!a)):(x.exports.HAS_FLASH=!1);(x.exports.IS_MAC_SAFARI=x.exports.IS_MAC&&x.exports.IS_SAFARI&&!x.exports.IS_CHROME&&!x.exports.HAS_FLASH),(x.exports.IS_IOS=x.exports.IS_IPHONE||x.exports.IS_IPAD||x.exports.IS_IPOD),(x.exports.IOS_VERSION=(function(){var e=x.exports.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]})()),(x.exports.IS_ANDROID=/Android/i.test(x.exports.USER_AGENT)),(x.exports.ANDROID_VERSION=(a=x.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?((i=a[1]&&parseFloat(a[1])),(r=a[2]&&parseFloat(a[2])),i&&r?parseFloat(a[1]+"."+a[2]):i||null):null),(x.exports.IS_OLD_ANDROID=x.exports.IS_ANDROID&&/webkit/i.test(x.exports.USER_AGENT)&&x.exports.ANDROID_VERSION<2.3),(x.exports.TOUCH_ENABLED=!!("ontouchstart"in window||(window.DocumentTouch&&document instanceof window.DocumentTouch))),(x.exports.IS_MOBILE=x.exports.IS_IOS||x.exports.IS_ANDROID),(x.exports.IS_H5=x.exports.IS_MOBILE||!x.exports.HAS_FLASH),(x.exports.IS_PC=!x.exports.IS_MOBILE),(x.exports.is_X5=/micromessenger/i.test(x.exports.USER_AGENT)||/qqbrowser/i.test(x.exports.USER_AGENT)),(x.exports.IS_ANDROID_FIREFOX=x.exports.IS_ANDROID&&x.exports.IS_FIREFOX),(x.exports.CHROME_VERSION=x.exports.IS_CHROME&&x.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1]),(x.exports.getHost=function(e){var t,r,i="";return void 0===e||null==e||""==e?"":((t=e.indexOf("//")),(r=e),(i=r=-1<t?e.substring(t+2):r),(e=(i=(e=r.split("/"))&&0<e.length?e[0]:i).split(":"))&&0<e.length?e[0]:i)}),(x.exports.dingTalk=function(){var e=x.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(e)}),(x.exports.IS_DINGTALK=x.exports.dingTalk()),(x.exports.wechat=function(){var e=x.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(e)}),(x.exports.inIFrame=function(){return self!=top}),(x.exports.getReferer=function(){var t=document.referrer;if(x.exports.inIFrame())try{t=top.document.referrer}catch(e){t=document.referrer}return t}),(x.exports.getHref=function(){location.href;if(x.exports.inIFrame())try{top.location.href}catch(e){location.href}return location.href}),(x.exports.check360=function(){return-1!=navigator.userAgent.indexOf("Safari")?(function(){var e=navigator.userAgent.split(" ");if(-1!=e[e.length-1].indexOf("Safari"))for(var t in navigator.plugins)if("np-mswmp.dll"==navigator.plugins[t].filename)return!0;return!1})():(null==navigator.msPointerEnabled||navigator.msPointerEnabled)&&(1==navigator.msDoNotTrack||1==window.doNotTrack)&&((!!Number(window.screenX)&&window.screenLeft-window.screenX!=8)||((-1!=navigator.userAgent.indexOf("MSIE 7.0")||-1!=navigator.userAgent.indexOf("MSIE 8.0"))&&null==console.count))}),(r=x.exports),function(e,t){var r=(this.os={}),i=(this.browser={}),n=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=!!e.match(/\(Macintosh\; Intel /),s=e.match(/(iPad).*OS\s([\d_]+)/),l=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),t=/Win\d{2}|Windows/.test(t),p=e.match(/Windows Phone ([\d.]+)/),d=u&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),y=e.match(/(BlackBerry).*Version\/([\d.]+)/),_=e.match(/(BB10).*Version\/([\d.]+)/),g=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),S=e.match(/Firefox\/([\d.]+)/),b=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),T=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),E=!m&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),w=E||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(i.webkit=!!n)&&(i.version=n[1]),o&&((r.android=!0),(r.version=o[2])),c&&!l&&((r.ios=r.iphone=!0),(r.version=c[2].replace(/_/g,"."))),s&&((r.ios=r.ipad=!0),(r.version=s[2].replace(/_/g,"."))),l&&((r.ios=r.ipod=!0),(r.version=l[3]?l[3].replace(/_/g,"."):null)),p&&((r.wp=!0),(r.version=p[1])),u&&((r.webos=!0),(r.version=u[2])),d&&(r.touchpad=!0),y&&((r.blackberry=!0),(r.version=y[2])),_&&((r.bb10=!0),(r.version=_[2])),g&&((r.rimtabletos=!0),(r.version=g[2])),v&&(i.playbook=!0),h&&((r.kindle=!0),(r.version=h[1])),f&&((i.silk=!0),(i.version=f[1])),!f&&r.android&&e.match(/Kindle Fire/)&&(i.silk=!0),m&&((i.chrome=!0),(i.version=m[1])),S&&((i.firefox=!0),(i.version=S[1])),b&&((r.firefoxos=!0),(r.version=b[1])),T&&((i.ie=!0),(i.version=T[1])),w&&(a||r.ios||t||o)&&((i.safari=!0),r.ios||r.android||(i.version=w[1])),r.ios&&(i.version=r.version),E&&(i.webview=!0),a&&((n=e.match(/[\d]*_[\d]*_[\d]*/))&&0<n.length&&n[0]&&(r.version=n[0].replace(/_/g,".")),/MQBHD/.test(e))&&(i.version=((e.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),(r.tablet=!!(s||v||(o&&!e.match(/Mobile/))||(S&&e.match(/Tablet/))||(T&&!e.match(/Phone/)&&e.match(/Touch/)))),(r.phone=!(r.tablet||r.ipod||!(o||c||u||y||_||(m&&e.match(/Android/))||(m&&e.match(/CriOS\/([\d.]+)/))||(S&&e.match(/Mobile/))||(T&&e.match(/Touch/))))),(r.pc=!r.tablet&&!r.phone),a?(r.name="macOS"):t?((r.name="windows"),(r.version=(function(){var e=navigator.userAgent,t="";(-1<e.indexOf("Windows NT 5.0")||-1<e.indexOf("Windows 2000"))&&(t="2000");(-1<e.indexOf("Windows NT 5.1")||-1<e.indexOf("Windows XP"))&&(t="XP");(-1<e.indexOf("Windows NT 5.2")||-1<e.indexOf("Windows 2003"))&&(t="2003");(-1<e.indexOf("Windows NT 6.0")||-1<e.indexOf("Windows Vista"))&&(t="Vista");(-1<e.indexOf("Windows NT 6.1")||-1<e.indexOf("Windows 7"))&&(t="7");(-1<e.indexOf("Windows NT 6.2")||-1<e.indexOf("Windows 8"))&&(t="8");(-1<e.indexOf("Windows NT 6.3")||-1<e.indexOf("Windows 8.1"))&&(t="8.1");(-1<e.indexOf("Windows NT 10")||-1<e.indexOf("Windows 10"))&&(t="10");return t})())):(r.name=(function(){var e=navigator.userAgent,t="other",r=x.exports.os;if(r.ios)return"iOS";if(r.android)return"android";if(-1<e.indexOf("Baiduspider"))return"Baiduspider";if(-1<e.indexOf("PlayStation"))return"PS4";(r="Win32"==navigator.platform||"Windows"==navigator.platform||-1<e.indexOf("Windows")),(e="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform);e&&(t="macOS");"X11"!=navigator.platform||r||e||(t="Unix");-1<String(navigator.platform).indexOf("Linux")&&(t="Linux");if(r)return"windows";return t})()),(i.name=((l=navigator.userAgent.toLowerCase()),(p=x.exports.browser).firefox?"Firefox":p.ie?/edge/.test(l)?"Edge":"IE":x.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(l)?"\u5fae\u4fe1\u5185\u7f6e\u6d4f\u89c8\u5668":/qqbrowser/.test(l)?"QQ\u6d4f\u89c8\u5668":x.exports.IS_UC?"UC":x.exports.IS_DINGTALK?"Dingtalk":x.exports.IS_HUAWEI?"HuaweiBrowser":x.exports.IS_XIAOMI?"MiBrowser":x.exports.IS_OPPO?"OppoBrowser":x.exports.IS_VIVO?"VivoBrowser":x.exports.IS_MEIZU?"MeizuBrowser":x.exports.IS_SAMSUNG?"SamsungBrowser":x.exports.IS_WEBVIEW||/MQBHD/.test(l)?"webview":p.chrome?"Chrome":p.safari?"Safari":/baiduspider/.test(l)?"Baiduspider":/opera/.test(l)?"Opera":/360se/.test(l)?"360\u6d4f\u89c8\u5668":/bidubrowser/.test(l)?"\u767e\u5ea6\u6d4f\u89c8\u5668":/metasr/.test(l)?"\u641c\u72d7\u6d4f\u89c8\u5668":/lbbrowser/.test(l)?"\u730e\u8c79\u6d4f\u89c8\u5668":/playstation/.test(l)?"PS4\u6d4f\u89c8\u5668":void 0))}.call(r,navigator.userAgent,navigator.platform),(x.exports.IS_WEBVIEW=((i=x.exports.USER_AGENT),(n=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig")),(o=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig")),!!i.match(n)&&!i.match(o)))},{}],50:[function(e,t,r){var s=e("./dom");(t.exports.getAbsoluteURL=function(e){return(e=e.match(/^https?:\/\//)?e:s.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href)}),(t.exports.parseUrl=function(e){var t,r=["protocol","hostname","port","pathname","search","hash","host"],i=s.createEl("a",{href:e}),n=""===i.host&&"file:"!==i.protocol;n&&(((t=s.createEl("div")).innerHTML='<a href="'+e+'"></a>'),(i=t.firstChild),t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t));for(var o={},a=0;a<r.length;a++)o[r[a]]=i[r[a]];return((o.segments=i.pathname.replace(/^\//,"").split("/")),n&&document.body.removeChild(t),o)})},{"./dom":32}],51:[function(e,r,t){var i=e("./dom"),n=e("./ua"),o=e("./playerutil");(r.exports.formatTime=function(e){var t,e=Math.floor(e),r=Math.floor(e/3600);return((e%=3600),(t=Math.floor(e/60)),(e=e%60),!(r===1/0||isNaN(r)||t===1/0||isNaN(t)||e==1/0||isNaN(e))&&("00"===(r=10<=r?r:"0"+r)?"":r+":")+(10<=t?t:"0"+t)+":"+(10<=e?e:"0"+e))}),(r.exports.extractTime=function(e){var t;return e?("00"===(t=10<=(t=parseInt(e.getHours()))?t:"0"+t)?"":t+":")+(t=10<=(t=parseInt(e.getMinutes()))?t:"0"+t)+":"+(t=10<=(t=parseInt(e.getSeconds()))?t:"0"+t):""}),(r.exports.convertToTimestamp=function(e,t){var r="";return(e&&(t?(r=e.gettime()):((r=Date.parse(e)),(r/=1e3))),r)}),(r.exports.convertToDate=function(e,t){var r="";return e&&(r=new Date()).setTime(1e3*e),r}),(r.exports.parseTime=function(e){var t,r,i;return e?((i=r=t=0),3===(e=e.split(":")).length?((t=e[0]),(r=e[1]),(i=e[2])):2===e.length?((r=e[0]),(i=e[1])):1===e.length&&(i=e[0]),3600*(t=parseInt(t,10))+60*(r=parseInt(r,10))+(i=Math.ceil(parseFloat(i)))):"00:00:00"}),(r.exports.formatDate=function(e,t){var r,i={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(r in(/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i))new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t}),(r.exports.sleep=function(e){for(var t=Date.now();Date.now()-t<=e;);}),(r.exports.htmlEncodeAll=function(e){return null==e?"":e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}),(r.exports.toBinary=function(e){if(!window.atob)return"";for(var t=atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i}),(r.exports.readyBinary=function(e){for(var t=new Uint8Array(e),r=t.length,i="",n=0;n<r;n++)i+=t[n];return i}),(r.exports.delayHide=function(e,t){e&&(void 0===t&&(t=1e3),e.delayHanlder&&clearTimeout(e.delayHanlder),(e.delayHanlder=setTimeout(function(){i.css(e,"display","none")},t)))}),(r.exports.openInFile=function(){return(-1!=window.location.protocol.toLowerCase().indexOf("file"))}),(r.exports.contentProtocolMixed=function(e,t){return!!(((n.os.pc&&((o.isHls(e)&&!n.browser.safari)||o.isFlv(e)))||t)&&"https:"==window.location.protocol.toLowerCase()&&e&&-1<e.toLowerCase().indexOf("http://"))}),(r.exports.queryString=function(e){var t,r,i;return 2===(e=(e=decodeURIComponent(e)).split("?")).length&&((e=e[1]),(t=e.split("&")))?((r={}),(i=0),$(t).each(function(){var e=t[i].split("=");2===e.length&&(r[e[0]]=e[1].replace(/\+/g," ")),i++}),r):{}}),(r.exports.log=function(e){var t=window.location.href,t=r.exports.queryString(t);t&&1==t.debug&&console.log(e)})},{"./dom":32,"./playerutil":46,"./ua":49}],52:[function(e,t,r){var i,Ln="undefined"==typeof Promise?e("es6-promise").Promise:Promise;(e=this),(i=function(){return((r={926:function(e){var n=Object.prototype.hasOwnProperty;function o(e){return"[Throws: "+(e?e.message:"?")+"]"}function i(e){var t=[];return(function r(i){if(null===i||"object"!=typeof i)return i;if(-1!==t.indexOf(i))return"[Circular]";if((t.push(i),"function"==typeof i.toJSON))try{var e=r(i.toJSON());return t.pop(),e}catch(r){return o(r)}return((e=Array.isArray(i)?i.map(r):Object.keys(i).reduce(function(e,t){return((e[t]=r((function(e,t){if(n.call(e,t))try{}catch(e){return o(e)}return e[t]})(i,t))),e)},{})),t.pop(),e)})(e)}(e.exports=function(e,t,r){return JSON.stringify(i(e),t,r)}),(e.exports.ensureProperties=i)}}),(i={}),(Cn.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return Cn.d(t,{a:t}),t}),(Cn.d=function(e,t){for(var r in t)Cn.o(t,r)&&!Cn.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}),(Cn.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}),(Cn.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}),(In={}),(function(){"use strict";Cn.r(In),Cn.d(In,{AACParser:function(){return M},AvcSPS:function(){return re},BasicLoader:function(){return Fe},BitBuffer:function(){return p},Box:function(){return f},ByteBuffer:function(){return g},CTrackTypeMap:function(){return ce},Demuxer:function(){return yn},DiscardType:function(){return m},EFormatType:function(){return n},EH264NALType:function(){return z},EH265NALType:function(){return v},EHandlerType:function(){return Q},ELoaderStatus:function(){return y},ESampleFlag:function(){return le},ETrackType:function(){return S},ErrorCode:function(){return d},ExpGolomb:function(){return Z},FLVParser:function(){return dt},FullBox:function(){return a},H264NAL:function(){return Y},H265NAL:function(){return b},HevcSPS:function(){return oe},Loader:function(){return Be},MP4Parser:function(){return qi}});var M={},H=(Cn.r(M),Cn.d(M,{AAC_DURATION:function(){return F},AAC_SAMPLING_FREQUENCIES:function(){return U},addADTSHeader:function(){return B},getADTSHeaderLength:function(){return V},getADTSLength:function(){return q},isADTS:function(){return j},readAACSamples:function(){return G}}),{}),g=(Cn.r(H),Cn.d(H,{Box:function(){return f},avc1:function(){return ht},avcC:function(){return he},btrt:function(){return yt},co64:function(){return Ri},ctts:function(){return Ii},dinf:function(){return x},dref:function(){return _t},edts:function(){return x},elst:function(){return At},esds:function(){return Gt},ftyp:function(){return Wt},hdlr:function(){return Kt},hev1:function(){return ft},hvc1:function(){return ft},hvcC:function(){return be},mdat:function(){return Xt},mdhd:function(){return zt},mdia:function(){return x},mfhd:function(){return or},mfra:function(){return x},minf:function(){return x},moof:function(){return ir},moov:function(){return x},mp4a:function(){return $t},mvex:function(){return ar},mvhd:function(){return Yt},pasp:function(){return Zt},sdtp:function(){return sr},sidx:function(){return lr},stbl:function(){return x},stco:function(){return Li},stsc:function(){return Ai},stsd:function(){return Di},stss:function(){return Oi},stsz:function(){return Ni},stts:function(){return Hi},tfdt:function(){return Yr},tfhd:function(){return Si},tkhd:function(){return er},traf:function(){return nr},trak:function(){return x},trex:function(){return xi},trun:function(){return Ci},url:function(){return tr},vmhd:function(){return rr}}),(i.concatUint8s=function(e){return this.concatUint8.apply(this,e)}),(i.concatUint8=function(){for(var t,r,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.length<=1?e[0]||new Uint8Array(0):((t=new Uint8Array(e.reduce(function(e,t){return e+t.byteLength},0))),(r=0),e.forEach(function(e){t.set(e,r),(r+=e.byteLength)}),t)}),(i.concat=function(e,t){return i.concatUint8(new Uint8Array(e),new Uint8Array(t)).buffer}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.dv.buffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"unreadLength",{get:function(){return Math.max(this.end-this.offset,0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),(i.prototype.readFloat=function(e){var t=0;switch(e){case 4:t=this.dv.getFloat32(this.offset);break;case 8:t=this.dv.getFloat64(this.offset);break;default:throw new Error("not supported for read float byte with "+e);}return(this.offset+=e),t}),(i.prototype.back=function(e){this.offset-=e}),(i.prototype.skip=function(e){this.offset+=e}),(i.prototype.readInt=function(e){var t=this.offset;switch(((this.offset+=e),e)){case 1:return this.dv.getInt8(t);case 2:return this.dv.getInt16(t);case 4:return this.dv.getInt32(t);default:throw new Error("not supported for read byte with "+e);}}),(i.prototype.read=function(e){var t=this.offset;switch(((this.offset+=e),e)){case 1:return this.dv.getUint8(t);case 2:return this.dv.getUint16(t);case 3:return((this.dv.getUint16(t)<<8)+this.dv.getUint8(t+2));case 4:return this.dv.getUint32(t);default:return(this.back(e-4),this.read(e-4)+this.dv.getUint32(t)*Math.pow(256,e-4))}}),(i.prototype.writeInt=function(e,t){var r=this.offset;switch(((this.offset+=e),e)){case 1:return this.dv.setInt8(r,t);case 2:return this.dv.setInt16(r,t);case 3:return(this.dv.setInt8(r,t>>16),this.dv.setInt16(r+1,65535&t));case 4:return this.dv.setInt32(r,t);default:throw new Error("\u4e0d\u652f\u6301Byte write "+e);}}),(i.prototype.write=function(e,t){var r=this.offset;switch(((this.offset+=e),e)){case 1:return this.dv.setUint8(r,t);case 2:return this.dv.setUint16(r,t);case 3:return(this.dv.setUint8(r,t>>>16),this.dv.setUint16(r+1,65535&t));case 4:return this.dv.setUint32(r,t);default:throw new Error("\u4e0d\u652f\u6301Byte write "+e);}}),(i.prototype.readToUint8=function(e){e=new Uint8Array(this.dv.buffer,this.offset,e||this.unreadLength);return(this.offset+=e.byteLength),e}),(i.prototype.readToBuffer=function(e){e=this.offset||e?this.dv.buffer.slice(this.offset,e?this.offset+e:void 0):this.dv.buffer;return(this.offset+=e.byteLength),e}),i),U=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],F=1024,B=function(e,t){var r=t.audioObjectType,i=t.sampleRate,n=t.channelCount,t=void 0===(t=t.numberOfRawDataBlocksInFrame)?0:t,o=e.byteLength+7,i=U.indexOf(i),a=new Uint8Array(7);return((a[0]=255),(a[1]=241),(a[2]=(r-1)<<6),(a[2]|=i<<2),(a[2]|=(4&n)>>2),(a[3]=(3&n)<<6),(a[3]|=(6144&o)>>11),(a[4]=(2047&o)>>3),(a[5]=(7&o)<<5),(a[5]|=31),(a[6]=252),(a[6]|=3&t),g.concatUint8(a,e))},j=function(e,t){return(t<e.byteLength-1&&255===e[t]&&240==(246&e[t+1]))},V=function(e,t){return 1&e[t+1]?7:9},q=function(e,t){return(((3&e[t+3])<<11)|(e[t+4]<<3)|((224&e[t+5])>>>5))},G=function(e){for(var t,r,i=[],n=0,o=e.byteLength;n+5<o;)j(e,n)?((t=V(e,n)),(r=q(e,n)),i.push({audioObjectType:1+(e[2]>>>6),sampleRate:U[(e[2]>>>2)&15],samplingFrequencyIndex:(e[2]>>>2)&15,channelCount:((1&e[2])<<2)|(e[3]>>>6),numberOfRawDataBlocksInFrame:0,data:e.subarray(n+t,n+r)}),(n+=r)):n++;return i},p=((r.fromByte=function(e,t){return new r(e.read(t),t<<3)}),(r.prototype.skip=function(e){this.offset+=e}),(r.prototype.read=function(e){var t=this.len-this.offset-e;if(0<=t){for(var r=0,i=0;i<e;i++)r+=1<<i;return(this.offset+=e),(this.num>>>t)&r}return(console.warn("bit \u8bfb\u53d6\u4f4d\u6570\u8d85\u8fc7\u9650\u5236"),0)}),r);function r(e,t){(this.num=e),(this.len=t),(this.offset=0)}function i(e,t,r){(this.dv=new DataView(e)),(this.start=this.offset=t||this.dv.byteOffset),(this.end=r?this.start+r:this.dv.byteLength)}(K.createAnnexbStartCode=function(){return new Uint8Array([0,0,0,1])}),(K.createAVCCStartCode=function(e){return new Uint8Array([(e>>24)&255,(e>>16)&255,(e>>8)&255,255&e])}),(K.extractAVCCNAL=function(e,t){for(var r,i=[],n=new g(e.buffer,e.byteOffset,e.byteLength);n.unreadLength>t;){if((r=n.read(t+1))<=0||r>n.unreadLength){console.warn("extract avc nalu size wrong! lengthSizeMinusOne:",t,"size:",r);break}var o=n.offset-n.start;i.push(e.subarray(o,o+r)),n.skip(r)}return i}),(K.extractAnnexbNAL=function(r){for(var e=r.byteLength,i=[],t=0;t<e-3;)0===r[t]?0===r[t+1]?0===r[t+2]?0===r[t+3]?t++:(1===r[t+3]&&t+4<e&&i.push({prefixStart:t,start:t+4}),(t+=4)):(1===r[t+2]&&i.push({prefixStart:t,start:t+3}),(t+=3)):(t+=2):t++;return i.length?i.map(function(e,t){t=i[t+1];return t?r.subarray(e.start,t.prefixStart):r.subarray(e.start)}):[]});var W=K;function K(){}var X,z;X=function(e,t){return(X=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};((e=z=z||{})[(e.UNUSED=0)]="UNUSED"),(e[(e.NON_IDR_SLICE=1)]="NON_IDR_SLICE"),(e[(e.SLICE_DP_A=2)]="SLICE_DP_A"),(e[(e.SLICE_DP_B=3)]="SLICE_DP_B"),(e[(e.SLICE_DP_C=4)]="SLICE_DP_C"),(e[(e.SLICE_IDR=5)]="SLICE_IDR"),(e[(e.SEI=6)]="SEI"),(e[(e.SPS=7)]="SPS"),(e[(e.PPS=8)]="PPS"),(e[(e.DIVIDER=9)]="DIVIDER"),(e[(e.SEQUENCE_END=10)]="SEQUENCE_END"),(e[(e.STREAM_END=11)]="STREAM_END"),(e[(e.FILL=12)]="FILL");var v,$,Y=(function(r){function e(e){var t=r.call(this)||this,e=new p(e.read(1),8);return((t.forbiddenZeroBit=e.read(1)),(t.nalRefIdc=e.read(2)),(t.nalType=e.read(5)),t)}var t=e,i=r;if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}return(X(t,i),(t.prototype=null===i?Object.create(i):((n.prototype=i.prototype),new n())),(e.extractNALType=function(e){return 31&e[0]}),(e.isSlice=function(e){e=this.extractNALType(e);return e>=z.NON_IDR_SLICE&&e<=z.SLICE_IDR}),e)})(W),e=(($=function(e,t){return($=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)}),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}$(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))});((s=v=v||{})[(s.TRAIL_N=0)]="TRAIL_N"),(s[(s.TRAIL_R=1)]="TRAIL_R"),(s[(s.TSA_N=2)]="TSA_N"),(s[(s.TSA_R=3)]="TSA_R"),(s[(s.STSA_N=4)]="STSA_N"),(s[(s.STSA_R=5)]="STSA_R"),(s[(s.RADL_N=6)]="RADL_N"),(s[(s.RADL_R=7)]="RADL_R"),(s[(s.RASL_N=8)]="RASL_N"),(s[(s.RASL_R=9)]="RASL_R"),(s[(s.VCL_N10=10)]="VCL_N10"),(s[(s.VCL_R11=11)]="VCL_R11"),(s[(s.VCL_N12=12)]="VCL_N12"),(s[(s.VCL_R13=13)]="VCL_R13"),(s[(s.VCL_N14=14)]="VCL_N14"),(s[(s.VCL_R15=15)]="VCL_R15"),(s[(s.BLA_W_LP=16)]="BLA_W_LP"),(s[(s.BLA_W_RADL=17)]="BLA_W_RADL"),(s[(s.BLA_N_LP=18)]="BLA_N_LP"),(s[(s.IDR_W_RADL=19)]="IDR_W_RADL"),(s[(s.IDR_N_LP=20)]="IDR_N_LP"),(s[(s.CRA=21)]="CRA"),(s[(s.VPS=32)]="VPS"),(s[(s.SPS=33)]="SPS"),(s[(s.PPS=34)]="PPS"),(s[(s.ACCESS_UNIT_DELIMITER=35)]="ACCESS_UNIT_DELIMITER"),(s[(s.EOS=36)]="EOS"),(s[(s.EOB=37)]="EOB"),(s[(s.FILLER_DATA=38)]="FILLER_DATA"),(s[(s.SEI=39)]="SEI"),(s[(s.SEI_SUFFIX=40)]="SEI_SUFFIX"),(s[(s.INVALID=64)]="INVALID");e(o,(J=W)),(o.extractNALType=function(e,t){return(126&e[(t=void 0===t?0:t)])>>1}),(o.isNonRefNALType=function(e){switch(e){case v.TRAIL_N:case v.STSA_N:case v.RADL_N:case v.RASL_N:case v.VCL_N10:case v.VCL_N12:case v.VCL_N14:return!0;default:return!1}}),(o.isNonRef=function(e){return this.isNonRefNALType(this.extractNALType(e))}),(o.isSlice=function(e){e=this.extractNALType(e);return e>=v.TRAIL_N&&e<=v.CRA}),(o.littleEndian=function(){var e=new ArrayBuffer(2);return(new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0])}),(o.parseHVCVideoData=function(e,t){for(var r=e.byteLength,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=[],o=0,a=0+t,s=!1;o<r;){if(r<=o+4){console.warn("Malformed Nalu near timestamp "+a+", offset = "+o+", dataSize = "+r);break}var l=i.getUint32(o,!1);if(r-4<l)return void console.warn("Malformed Nalus near timestamp "+a+", NaluSize > DataSize!");var c=(i.getUint8(o+4)>>1)&63,u=(16<=c&&c<=23&&(s=!0),0+o+4),c={type:c,data:e.subarray(u,u+l)};n.push(c),(length+=e.byteLength),(o+=4+l)}return{keyframe:s,units:n}});var m,d,Q,n,S,J,b=o,Z=((t.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),t=Math.min(4,t);if(0===t)throw new Error("no bytes available");i.set(e.subarray(r,r+t)),(this.word=new DataView(i.buffer).getUint32(0)),(this.bitsAvailable=8*t),(this.bytesAvailable-=t)}),(t.prototype.skipBits=function(e){var t;this.bitsAvailable>e||((e=(e-=this.bitsAvailable)-((t=e>>3)<<3)),(this.bytesAvailable-=t),this.loadWord()),(this.word<<=e),(this.bitsAvailable-=e)}),(t.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>(32-t);return(32<e&&console.error("Cannot read more than 32 bits at a time"),(this.bitsAvailable-=t),0<this.bitsAvailable?(this.word<<=t):0<this.bytesAvailable&&this.loadWord(),0<(t=e-t)&&this.bitsAvailable?(r<<t)|this.readBits(t):r)}),(t.prototype.skipLZ=function(){for(var e=0;e<this.bitsAvailable;++e)if(0!=(this.word&(2147483648>>>e)))return((this.word<<=e),(this.bitsAvailable-=e),e);return this.loadWord(),e+this.skipLZ()}),(t.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())}),(t.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())}),(t.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1}),(t.prototype.readEG=function(){var e=this.readUEG();return 1&e?(1+e)>>>1:-1*(e>>>1)}),(t.prototype.readUByte=function(){return this.readBits(8)}),(t.prototype.readUShort=function(){return this.readBits(16)}),(t.prototype.readUInt=function(){return this.readBits(32)}),(t.prototype.skipScalingList=function(e){for(var t=8,r=8,i=0;i<e;i++)t=0===(r=0!==r?(t+this.readEG()+256)%256:r)?t:r}),t),ee=[100,110,122,244,44,83,86,118,128,138,144],te=[[0,1],[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]],re=((se.generateCodec=function(e){return("avc1."+[e.generalProfileIdc,e.generalProfileCompatibility,e.generalLevelIdc].map(function(e){return(e=e.toString(16)).length<2?"0"+e:e}).join(""))}),se),ie=[1,2,2,1],ne=[1,2,1,1],oe=((ae.generateCodec=function(e){var t=["hvc1"],r=e.generalProfileSpace;return(0<r&&r<4&&t.push(String.fromCharCode(64+r)),t.push(e.generalProfileIdc.toString()),t.push(e.generalProfileCompatibilityFlags.reverse().reduce(function(e,t){return(e<<1)|t},0).toString(16)),t.push((e.generalTierFlag?"H":"L")+e.generalLevelIdc),e.generalConstraintIndicatorFlags.forEach(function(e){e&&t.push(e.toString(16))}),t.join("."))}),ae);function ae(e){var t=this;(this.generalProfileSpace=0),(this.generalTierFlag=0),(this.generalProfileIdc=0),(this.generalProfileCompatibilityFlags=[]),(this.generalConstraintIndicatorFlags=[]),(this.subLayerProfilePresentFlags=[]),(this.subLayerLevelPresentFlags=[]),(this.separateColourPlaneFlag=0),(this.pixelRatio=[]),(this.codec=""),(this.checkProfileIdc=function(e){return(t.generalProfileIdc===e||t.generalProfileCompatibilityFlags[e])});var r,i,n,o,a=new Z(e);for(this.vpsId=a.readBits(4),this.maxSubLayersMinus1=a.readBits(3),this.temporalIdNestingFlag=a.readBits(1),this.generalProfileSpace=a.readBits(2),this.generalTierFlag=a.readBits(1),this.generalProfileIdc=a.readBits(5),r=0;r<32;r++)(this.generalProfileCompatibilityFlags[r]=a.readBits(1)),0===this.generalProfileIdc&&0<r&&this.generalProfileCompatibilityFlags[r]&&(this.generalProfileIdc=r);for(r=0;r<6;r++)this.generalConstraintIndicatorFlags.push(a.readUByte());for(this.generalLevelIdc=a.readUByte(),r=0;r<this.maxSubLayersMinus1;r++)(this.subLayerProfilePresentFlags[r]=a.readBits(1)),(this.subLayerLevelPresentFlags[r]=a.readBits(1));for(0<this.maxSubLayersMinus1&&a.skipBits(2*(8-this.maxSubLayersMinus1)),r=0;r<this.maxSubLayersMinus1;r++)this.subLayerProfilePresentFlags[r]&&a.skipBits(48),this.subLayerLevelPresentFlags[r]&&a.readUByte();(this.spsId=a.readUEG()),(this.codec=ae.generateCodec(this)),(this.chromaFormatIdc=a.readUEG()),3===this.chromaFormatIdc&&(this.separateColourPlaneFlag=a.readBits(1)),this.separateColourPlaneFlag&&(this.chromaFormatIdc=0),(this.width=a.readUEG()),(this.height=a.readUEG()),a.readBits(1)&&((e=ie[this.chromaFormatIdc]),(o=ne[this.chromaFormatIdc]),(i=a.readUEG()*e),(e=a.readUEG()*e),(n=a.readUEG()*o),(o=a.readUEG()*o),(this.width-=i+e),(this.height-=n+o))}function se(e){(this.generalProfileSpace=0),(this.generalTierFlag=0),(this.generalProfileIdc=0),(this.generalProfileCompatibility=0),(this.crop=0),(this.cropLeft=0),(this.cropRight=0),(this.cropTop=0),(this.cropBottom=0),(this.pixelRatio=[]),(this.codec="");var t,r,i=new Z(e);if(((this.generalProfileIdc=i.readUByte()),(this.generalProfileCompatibility=i.readUByte()),(this.generalLevelIdc=i.readUByte()),(this.spsId=i.readUEG()),(this.codec=se.generateCodec(this)),-1<ee.indexOf(this.generalProfileIdc))){if(((this.chromaFormatIdc=i.readUEG()),3===this.chromaFormatIdc&&i.skipBits(1),i.skipUEG(),i.skipUEG(),i.skipBits(1),i.readBits(1)))for(t=0,r=3===this.chromaFormatIdc?8:12;t<r;t++)i.readBits(1)&&(t<6?i.skipScalingList(16):i.skipScalingList(64))}else this.chromaFormatIdc=1;i.skipUEG();e=i.readUEG();if(0===e)i.skipUEG();else if(1===e)for(i.skipBits(1),i.skipEG(),i.skipEG(),t=0,r=i.readUEG();t<r;t++)i.skipEG();i.skipUEG(),i.skipBits(1);var n,e=i.readUEG()+1,o=i.readUEG()+1,a=i.readBits(1);a||i.skipBits(1),(this.height=o*(2-a)),i.skipBits(1),(this.crop=i.readBits(1)),this.crop&&((n=1<<(1===this.chromaFormatIdc||2===this.chromaFormatIdc?1:0)),(a=(2-a)<<(1===this.chromaFormatIdc?1:0)),(this.cropLeft=i.readUEG()*n),(this.cropRight=i.readUEG()*n),(this.cropTop=i.readUEG()*a),(this.cropBottom=i.readUEG()*a)),(this.width=16*e-(this.cropRight+this.cropLeft)),(this.height=16*o-(this.cropTop+this.cropBottom)),i.readBits(1)&&i.readBits(1)&&(255===(n=i.readUByte())?((this.pixelRatio[0]=(i.readUByte()<<8)|i.readUByte()),(this.pixelRatio[1]=(i.readUByte()<<8)|i.readUByte())):n<te.length&&(this.pixelRatio=te[n]))}function t(e){(this.data=e),(this.bytesAvailable=e.byteLength),(this.word=0),(this.bitsAvailable=0)}function o(e){var t=J.call(this)||this,e=new p(e.read(2),16);return((t.forbiddenZeroBit=e.read(1)),(t.nalType=e.read(6)),(t.nhLayerId=e.read(6)),(t.nhTimeId=e.read(3)),t)}((s=m=m||{})[(s.NONE=-16)]="NONE"),(s[(s.DEFAULT=0)]="DEFAULT"),(s[(s.NONREF=8)]="NONREF"),(s[(s.BIDIR=16)]="BIDIR"),(s[(s.NONINTRA=24)]="NONINTRA"),(s[(s.NONKEY=32)]="NONKEY"),(s[(s.ALL=48)]="ALL"),((e=d=d||{})[(e.ABORTED=1)]="ABORTED"),(e[(e.NETWORK=2)]="NETWORK"),(e[(e.DECODE=3)]="DECODE"),(e[(e.SRC_NOT_SUPPORTED=4)]="SRC_NOT_SUPPORTED"),(e[(e.PARSER=1001)]="PARSER"),(e[(e.COROUTINE=10001)]="COROUTINE"),(e[(e.WEBGL_NOT_SUPPORTED=10002)]="WEBGL_NOT_SUPPORTED"),(e[(e.BUFFERING=10004)]="BUFFERING"),(e[(e.RENDERER=10005)]="RENDERER"),((s=Q=Q||{}).VIDE="vide"),(s.SOUN="soun"),((e=n=n||{})[(e.FLV=0)]="FLV"),(e[(e.MP4=1)]="MP4"),(e[(e.HLS=2)]="HLS"),(e[(e.MPEGTS=3)]="MPEGTS"),((s=S=S||{})[(s.UNKNOWN=0)]="UNKNOWN"),(s[(s.VIDEO=1)]="VIDEO"),(s[(s.AUDIO=2)]="AUDIO");((e={})[Q.VIDE]=S.VIDEO),(e[Q.SOUN]=S.AUDIO);var le,ce=e;((s=le=le||{})[(s.DEGRADATION_PRIORITY_MASK=65535)]="DEGRADATION_PRIORITY_MASK"),(s[(s.IS_NON_SYNC=65536)]="IS_NON_SYNC"),(s[(s.PADDING_MASK=917504)]="PADDING_MASK"),(s[(s.REDUNDANCY_MASK=3145728)]="REDUNDANCY_MASK"),(s[(s.DEPENDED_MASK=12582912)]="DEPENDED_MASK"),(s[(s.DEPENDS_MASK=50331648)]="DEPENDS_MASK"),(s[(s.DEPENDS_NO=33554432)]="DEPENDS_NO"),(s[(s.DEPENDS_YES=16777216)]="DEPENDS_YES");function ue(e,t){var r=e.offset;(this.start=t),(this.size=e.read(4)),(this.type=String.fromCharCode(e.read(1),e.read(1),e.read(1),e.read(1)).trim()),1===this.size&&(this.size=e.read(8)),(this.length=e.offset-r)}Se=function(e,t){return(Se=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var u,e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Se(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))},pe=function(){return(pe=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in(t=arguments[r]))Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},de=new Date("1904-01-01T00:00:00Z").getTime(),f=((ke.prototype.append=function(e){this.children.push(e)}),(ke.mapBoxToJSON=function(e){return pe({box:e},e.children.reduce(function(e,t){var r=t.header.type,i=e[r],t=ke.mapBoxToJSON(t);return(i?Array.isArray(i)?i.push(t):(e[r]=[i,t]):(e[r]=t),e)},{}))}),ke),a=(e(Pe,(me=f)),Pe);ve=function(e,t){return(ve=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ve(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(xe,(ge=f));var he=xe;_e=function(e,t){return(_e=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};function fe(e){return e<10?"0"+e:e}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}_e(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(we,(ye=f));var ye,_e,ge,ve,me,Se,be=we,s=Cn(926),Te=Cn.n(s),Ee="undefined"!=typeof performance&&"function"==typeof performance.now;function we(e,t){var r,i=ye.call(this,e,t)||this;(i.nalus=[]),(i.vps=[]),(i.sps=[]),(i.pps=[]),(i.sei=[]),(i.configVersion=t.read(1)),(r=new p(t.read(1),8)),(i.generalProfileSpace=r.read(2)),(i.generalTierFlag=r.read(1)),(i.generalProfileIdc=r.read(5)),(r=new p(t.read(4),32)),(i.generalProfileCompatibilityFlags=Array.from(new Array(32)).map(function(){return r.read(1)})),(i.generalConstraintIndicatorFlags=Array.from(new Array(6)).map(function(){return t.read(1)})),(i.generalLevelIdc=t.read(1)),(i.minSpatialSegmentationIdc=4095&t.read(2)),(i.parallelismType=3&t.read(1)),(i.chromaFormatIdc=3&t.read(1)),(i.bitDepthLumaMinus8=7&t.read(1)),(i.bitDepthChromaMinus8=7&t.read(1)),(i.avgFrameRate=t.read(2)),(r=new p(t.read(1),8)),(i.constantFrameRate=r.read(2)),(i.numTemporalLayers=r.read(3)),(i.temporalIdNested=r.read(1)),(i.lengthSizeMinusOne=r.read(2)),(i.nalus=[]);for(var n=t.read(1),o=0;o<n;o++){var a=[],s=(r=new p(t.read(1),8)).read(1);r.read(1);for(var l=r.read(6),c=t.read(2),u=0;u<c;u++)a.push(new Uint8Array(t.read(2)).map(function(){return t.read(1)}));i.nalus.push({completeness:s,type:l,data:a}),l===v.VPS?a.forEach(function(e){return i.vps.push(e)}):l===v.SPS?a.forEach(function(e){return i.sps.push(e)}):l===v.PPS?a.forEach(function(e){return i.pps.push(e)}):l===v.SEI&&a.forEach(function(e){return i.sei.push(e)})}return(i.codec=oe.generateCodec(i)),i}function xe(e,t){var r=ge.call(this,e,t)||this;(r.sps=[]),(r.pps=[]),(r.configVersion=t.read(1)),(r.generalProfileIdc=t.read(1)),(r.generalProfileCompatibility=t.read(1)),(r.generalLevelIdc=t.read(1)),(r.lengthSizeMinusOne=3&t.read(1)),(r.numOfSequenceParameterSets=31&t.read(1));for(var i,n=0,o=[],n=0;n<r.numOfSequenceParameterSets;n++){for(i=t.read(2),o=[];i--;)o.push(t.read(1));r.sps.push(new Uint8Array(o))}for(r.numOfPictureParameterSets=31&t.read(1),n=0;n<r.numOfPictureParameterSets;n++){for(i=t.read(2),o=[];i--;)o.push(t.read(1));r.pps.push(new Uint8Array(o))}return(r.codec=re.generateCodec(r)),r}function Pe(e,t){e=me.call(this,e,t)||this;return(e.version=t.read(1)),(e.flag=t.read(3)),e}function ke(e,t){(this.children=[]),(this.isContainer=!1),(this.toStandardTime=function(e){return e&&de+1e3*e}),(this.header=e)}function Ce(){return(Ee?performance:Date).now()}((e=u=u||{})[(e.TRACE=-1)]="TRACE"),(e[(e.DEBUG=0)]="DEBUG"),(e[(e.LOG=1)]="LOG"),(e[(e.INFO=2)]="INFO"),(e[(e.WARN=10)]="WARN"),(e[(e.ERROR=11)]="ERROR"),(e[(e.NONE=1e3)]="NONE");var Ie=u.INFO,Le=u.ERROR,Re=2e3,Ae=Ce(),h=[],De=0,e=(((s=Oe.prototype)._print=function(e,t){var r,i,n,o,a,s,l,c;Ie<=e&&((r=Ce()-Ae),(n="["+u[e]+"]["+this.name+"]["+((i=r),void 0===(n=!0)&&(n=!0),(c=Math.floor(i/1e3)),(n=void 0!==n&&n),(o=c)===1/0?o:((s=Math.floor(o/60)),(s-=60*(a=Math.floor(s/60))),(o=Math.floor(o-60*(60*a+s))),(l=[]),(n||0<a)&&l.push(fe(a)),l.push(fe(s)),l.push(fe(o)),l.join(":")))+"."+Math.floor(1e3*(i-1e3*c))+"]"),h.push({id:De++,level:e,name:this.name,timestamp:r,args:t,prefix:n,message:""}),h.length>Re&&h.shift(),Le<=e)&&((a=(u[e]||"").toLowerCase()),(s=console[a]))&&s.apply(void 0,[n].concat(t))}),(s.getLogs=function(){return h.map(function(e){return((e.message=e.prefix+" "+e.args.map(function(e){return"string"==typeof e?e:Te()(e)}).join(" ")),e)})}),(s.clear=function(){h=[]}),(s.setSize=function(e){Re=e}),(s.setLevel=function(e){Ie=e}),(s.setPrintLevel=function(e){Le=e}),(s.reset=function(){(Ie=u.INFO),(Le=u.ERROR),(Re=2e3),(Ae=Ce()),(h=[]),(De=0)}),Oe);function Oe(e){var i=this;(this.trace=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.TRACE,t)}),(this.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.DEBUG,t)}),(this.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.LOG,t)}),(this.info=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.INFO,t)}),(this.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.WARN,t)}),(this.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i._print(u.ERROR,t)}),(this.name=e)}e.LogLevel=u;function Ne(){var o=this;(this._eventMap={}),(this.listeners=function(e){return o._eventMap[e]||[]}),(this.emit=function(e,t){e=o._eventMap[e];return(!!Array.isArray(e)&&(e.forEach(function(e){return e(t)}),!0))}),(this.off=function(e,t){var r=o._eventMap[e];return(Array.isArray(r)&&(o._eventMap[e]=r.filter(function(e){return e!==t})),o)}),(this.removeAllListeners=function(e){return(void 0===e?(o._eventMap={}):o._eventMap[e]&&(o._eventMap[e]=[]),o)}),(this.on=function(e,t){return(o._eventMap[e]?o._eventMap[e].push(t):(o._eventMap[e]=[t]),o)}),(this.once=function(i,n){return(o.on(i,function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];o.off(i,e),n.apply(o,t)}),o)}),(this.proxy=function(i,e){e.forEach(function(r){o.on(r,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(r),i.emit.apply(i,e)})})}),(this.proxyOnce=function(i,e){e.forEach(function(r){o.once(r,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift(r),i.emit.apply(i,e)})})})}var y,Me,He,Ue,T=new e("demuxer"),s=((Me=function(e,t){return(Me=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)}),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Me(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))}),Fe=(((e=y=y||{})[(e.IDLE=0)]="IDLE"),(e[(e.LOADING=1)]="LOADING"),(e[(e.SUSPENGING=2)]="SUSPENGING"),(e[(e.ERROR=3)]="ERROR"),s(c,(He=Ne)),Object.defineProperty(c.prototype,"eof",{get:function(){return this.offset===this.total},enumerable:!1,configurable:!0}),(c.prototype._changeStatus=function(e){this.status!==e&&(T.log("loader status changed: ".concat(y[this.status]," -> ").concat(y[e])),(this.status=e))}),(c.prototype.jump=function(e){this.offset=e}),(c.prototype.load=function(e,t,r){return(this.reset(),(this.url=e),this.loadRange(t,r))}),(c.prototype.resume=function(){return this.loadRange(this.offset)}),(c.prototype.suspend=function(){this.abort(),this._changeStatus(y.SUSPENGING)}),(c.prototype.reset=function(){this.abort(),(this.offset=0),(this.total=1/0),(this.url="")}),(c.prototype.destroy=function(){this.removeAllListeners(),this.reset()}),c),l={isIos:!1,isDingtalk:!1,isQQBrowser:!1},e=(window.navigator.userAgent||"").toLowerCase();function c(e){void 0===e&&(e={});var t=He.call(this)||this;return((t.timeout=15e3),(t.total=1/0),(t.offset=0),(t.status=y.IDLE),(t.url=""),(t._handleError=function(e){if("AbortError"===e.name)return!1;throw((t._changeStatus(y.ERROR),t.emit("error",{code:d.NETWORK,message:e.message,origin:e}),e))}),(t.timeout=e.timeout||t.timeout),t)}/(iPhone\sOS)\s([\d_]+)/i.test(e)&&(l.isIos=!0),-1<e.indexOf("dingtalk")?(l.isDingtalk=!0):-1<e.indexOf("qqbrowser")&&(l.isQQBrowser=!0),(Ke=function(e,t){return(Ke=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)});(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ke(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Ye,(We=Fe)),(Ye.isSupported=function(){return l.isIos&&(l.isDingtalk||l.isQQBrowser)?(console.log("ios","isDingtalk",l.isDingtalk,"isQQBrowser",l.isQQBrowser),!1):"undefined"!=typeof AbortController&&"undefined"!=typeof ReadableStream}),(Ye.prototype.loadRange=function(i,e){var n=this;if((void 0===i&&(i=0),void 0===e&&(e=1/0),!this.url||i>=this.total))return Ln.resolve(!1);if(this.status===y.LOADING||this.status===y.ERROR)return Ln.resolve(!1);T.info("\u6267\u884cload, from=".concat(i," to=").concat(e," url=").concat(this.url)),this.abort();var t=new Headers(),o=0<i||e<1/0;return(o&&((e=Math.min(this.total-1,e)),t.set("Range","bytes=".concat(i,"-").concat(e===1/0?"":e))),this._changeStatus(y.LOADING),(this.controller=new AbortController()),this.emit("loadstart",void 0),(this.timer=setTimeout(this.triggerTimeout,this.timeout)),fetch(this.url,{method:"GET",headers:t,signal:this.controller.signal}).then(function(e){var r,t;if((clearTimeout(n.timer),e.body&&200<=e.status&&e.status<300))return((r=e.body.getReader()),(n.offset=i),o?((t=e.headers.get("Content-Range")||""),(n.total=Number(t.split("/")[1])||n.total)):(n.total=Number(e.headers.get("Content-Length"))||n.total),(function t(){return r.read().then(function(e){return e.done?((n.controller=null),n._changeStatus(y.IDLE),n.emit("loadend",void 0),!0):((n.offset+=e.value.byteLength),n.emit("progress",{offset:n.offset-e.value.byteLength,data:e.value}),t())})})());throw new Error("\u5a92\u4f53\u6d41\u6570\u636e\u4e0d\u5b58\u5728");}).catch(function(e){return clearTimeout(n.timer),n._handleError(e)}))});s=Ye;Ge=function(e,t){return(Ge=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ge(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})($e,(qe=Fe)),($e.prototype.abort=function(){var e=this.xhr;e&&((e.onerror=null),(e.onprogress=null),(e.onloadend=null),(e.onreadystatechange=null),e.abort(),(this.xhr=null),this._resolve(!1)),this._changeStatus(y.IDLE)}),($e.prototype.loadRange=function(n,s){var l=this;return(void 0===n&&(n=0),void 0===s&&(s=1/0),!this.url||n>=this.total||this.status===y.LOADING||this.status===y.ERROR?Ln.resolve(!1):(this.abort(),new Ln(function(e,t){(l.xhr=new XMLHttpRequest()),(l._resolve=e);function r(){var r,e,t=o.responseText,i=t.length,n=a;0<i&&n<i&&((e=l.offset),(l.offset+=i-n),(a=i),l.emit("progress",{offset:e,data:((r=t.substring(n,i)),new Uint8Array(r.length).map(function(e,t){return r.charCodeAt(t)}))}))}var o=l.xhr,i=0<n||s<1/0,a=(o.open("GET",l.url),i&&o.setRequestHeader("Range","bytes=".concat(n,"-").concat(s===1/0?"":s)),(o.onreadystatechange=function(){var e;o.readyState===o.HEADERS_RECEIVED&&200<=o.status&&o.status<300&&(i?((e=o.getResponseHeader("Content-Range")||""),(l.total=Number(e.split("/")[1])||l.total)):(l.total=Number(o.getResponseHeader("Content-Length"))||l.total)),o.readyState>=o.HEADERS_RECEIVED&&clearTimeout(l._timer)}),(l.offset=n),0);(o.timeout=l.timeout),(o.onprogress=r),(o.onloadend=function(){r(),(l.xhr=null),l._changeStatus(y.IDLE),l.emit("loadend",void 0),e(!0)}),(o.onerror=function(e){l.xhr=null;try{l._handleError(new Error(e.constructor.name))}catch(e){t(e)}}),o.overrideMimeType("text/plain; charset=x-user-defined"),l._changeStatus(y.LOADING),l.emit("loadstart",void 0),(l._timer=setTimeout(l.triggerTimeout,l.timeout)),o.send()})))});var e=$e,Be=s.isSupported()?s:e;Ve=function(e,t){return(Ve=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ve(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(_,(je=Ne)),Object.defineProperty(_.prototype,"loader",{get:function(){return this.customLoader||this.originLoader},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"status",{get:function(){return this.loader.status},enumerable:!1,configurable:!0}),(_.probe=function(e){throw new Error("parser should implements static probe");}),(_.prototype.onProgress=function(e){}),(_.prototype.onLoadEnd=function(){}),(_.prototype.load=function(e){return this.reset(),this.loader.load(e)}),(_.prototype.suspend=function(){return this.loader.suspend()}),(_.prototype.resume=function(){return this.loader.resume()}),(_.prototype.reset=function(){this.loader.reset(),(this.metadata=null)}),(_.prototype.destroy=function(){this.reset(),this.loader.off("progress",this.onProgress),this.loader.off("loadend",this.onLoadEnd),this.originLoader.destroy(),this.removeAllListeners()});var je,Ve,qe,Ge,We,Ke,s=_,Xe=((ze.BUFFER_LENGTH=9),ze);function ze(e){(this.signature=String.fromCharCode(e.read(1),e.read(1),e.read(1))),(this.version=e.read(1));var t=e.read(1),e=((this.size=e.read(4)),new p(t,8));e.read(5),(this.hasAudio=!!e.read(1)),e.read(1),(this.hasVideo=!!e.read(1))}function _(e){var t=je.call(this)||this;return((t.skipFrame=m.DEFAULT),(t.metadata=null),(t.options=e),(t.onProgress=t.onProgress.bind(t)),(t.onLoadEnd=t.onLoadEnd.bind(t)),(t.originLoader=new Be(t.options)),(t.customLoader=e.loader),t.loader.on("progress",t.onProgress),t.loader.on("loadend",t.onLoadEnd),(t.skipFrame=e.skipFrame||m.DEFAULT),t)}function $e(){var e=(null!==qe&&qe.apply(this,arguments))||this;return((e.xhr=null),(e._timer=-1),(e._resolve=function(e){}),(e.triggerTimeout=function(){e.abort(),e._handleError(new Error("\u52a0\u8f7d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5"))}),e)}function Ye(){var e=(null!==We&&We.apply(this,arguments))||this;return((e.controller=null),(e.timer=-1),(e.abort=function(){clearTimeout(e.timer),e.controller&&!e.controller.signal.aborted&&(e.controller.abort(),(e.controller=null)),e._changeStatus(y.IDLE)}),(e.triggerTimeout=function(){e.abort(),e._handleError(new Error("\u52a0\u8f7d\u8d85\u65f6\uff0c\u8bf7\u91cd\u8bd5"))}),e)}((e=Ue=Ue||{})[(e.AUDIO=8)]="AUDIO"),(e[(e.VIDEO=9)]="VIDEO"),(e[(e.SCRIPT=18)]="SCRIPT");Je.BUFFER_LENGTH=11;var Qe=Je;function Je(e){(this.type=e.read(1)),(this.size=e.read(3)),(this.dts=e.read(3)),(this.dts|=e.read(1)<<24),e.skip(3)}var Ze,et=[5512,11025,22050,44100],tt=[8,16];((e=Ze=Ze||{})[(e.ADTS_HEADER=0)]="ADTS_HEADER"),(e[(e.RAW=1)]="RAW");it.readAudioSpecificConfig=function(e){e=p.fromByte(e,2);return{audioObjectType:e.read(5),sampleRate:U[e.read(4)],samplingFrequencyIndex:e.read(4),channelCount:e.read(4)}};var E,rt=it;function it(e){var t=new p(e.read(1),8);(this.codecId=t.read(4)),(this.sampleRate=et[t.read(2)]),(this.sampleSize=tt[t.read(1)]),(this.soundType=t.read(1)),(this.packetType=e.read(1)),(this.data=e.readToUint8())}function nt(t){var e=t.read(2);return Array.from(Array(e)).map(function(){var e=t.read(1);return 0<e?String.fromCharCode(e):""}).join("")}function ot(e){var t=nt(e),e=at(e);return{key:t,value:e.value,objectEnd:e.objectEnd}}function at(e){var t={value:null,objectEnd:!1},r=e.read(1);switch(r){case E.NUMBER:t.value=e.readFloat(8);break;case E.BOOLEAN:t.value=!!e.read(1);break;case E.LONG_STRING:case E.STRING:t.value=nt(e);break;case E.OBJECT_START:t.value=(function(e){for(var t={};0<e.unreadLength;){var r=ot(e);if(r.objectEnd)break;t[r.key]=r.value}return t})(e);break;case E.ECMA_ARRAY:t.value=(function(e){for(var t=e.read(4),r={};0<t--;){var i=ot(e);r[i.key]=i.value}return r})(e);break;case E.OBJECT_END:t.objectEnd=!0;break;case E.STRICT_ARRAY:t.value=(function(e){for(var t=e.read(4),r=[];0<t--;){var i=at(e);r.push(i.value)}return r})(e);break;case E.DATE:t.value=new Date(e.readFloat(8)+60*e.readInt(2)+1e3);break;default:console.warn("unknown AMF value type",r)}return t}((e=E=E||{})[(e.NUMBER=0)]="NUMBER"),(e[(e.BOOLEAN=1)]="BOOLEAN"),(e[(e.STRING=2)]="STRING"),(e[(e.OBJECT_START=3)]="OBJECT_START"),(e[(e.NULL=5)]="NULL"),(e[(e.UNDEFINED=6)]="UNDEFINED"),(e[(e.REFERENCE=7)]="REFERENCE"),(e[(e.ECMA_ARRAY=8)]="ECMA_ARRAY"),(e[(e.OBJECT_END=9)]="OBJECT_END"),(e[(e.STRICT_ARRAY=10)]="STRICT_ARRAY"),(e[(e.DATE=11)]="DATE"),(e[(e.LONG_STRING=12)]="LONG_STRING");function st(e){(this.name=at(e).value),(this.value=at(e).value)}var lt,ct,ut;((e=lt=lt||{})[(e.KEY=1)]="KEY"),(e[(e.INTER=2)]="INTER"),(e[(e.DISP_INTER=3)]="DISP_INTER"),(e[(e.GENERATED_KEY=4)]="GENERATED_KEY"),(e[(e.VIDEO_INFO_CMD=5)]="VIDEO_INFO_CMD"),((e=ct=ct||{})[(e.JPEG=1)]="JPEG"),(e[(e.H263=2)]="H263"),(e[(e.SCREEN=3)]="SCREEN"),(e[(e.VP6=4)]="VP6"),(e[(e.VP6A=5)]="VP6A"),(e[(e.SCREEN2=6)]="SCREEN2"),(e[(e.H264=7)]="H264"),(e[(e.REALH263=8)]="REALH263"),(e[(e.MPEG4=9)]="MPEG4"),(e[(e.H265=12)]="H265"),((e=ut=ut||{})[(e.AVC_SEQUENCE_HEADER=0)]="AVC_SEQUENCE_HEADER"),(e[(e.AVC_NALU=1)]="AVC_NALU"),(e[(e.AVC_END=2)]="AVC_END");function pt(e){var t=new p(e.read(1),8);(this.type=t.read(4)),(this.codecId=t.read(4)),(this.packetType=e.read(1)),(this.cts=(e.read(3)+4286578688)^4286578688),(this.data=e.readToUint8())}var w;Rt=function(e,t){return(Rt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Rt(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(P,(Lt=s)),(P.probe=function(e){return(!(e.byteLength<9)&&"FLV"===new Xe(new g(e.buffer,e.byteOffset,e.byteLength)).signature)}),(P.prototype.parse=function(e,t){var r=[];if(e.byteLength){this.unhandleBuffer&&((e=g.concat(this.unhandleBuffer,e)),(t-=this.unhandleBuffer.byteLength),(this.unhandleBuffer=null));var i=new g(e);for(!this.header&&i.unreadLength>=Xe.BUFFER_LENGTH&&((this.header=new Xe(i)),0==this.header.hasVideo&&(this.header.hasVideo=!0),i.skip(this.header.size-Xe.BUFFER_LENGTH));i.unreadLength>4+Qe.BUFFER_LENGTH;){i.skip(4);var n=new Qe(i);if(!(i.unreadLength>=n.size)){i.back(4+Qe.BUFFER_LENGTH);break}var o=new g(i.buffer,i.offset,n.size);switch((i.skip(n.size),n.type)){case Ue.VIDEO:r=r.concat(this.parseVideoBody(n,o,i.offset+t));break;case Ue.AUDIO:r=r.concat(this.parseAudioBody(n,o,i.offset+t));break;case Ue.SCRIPT:this.parseScriptBody(n,o);break;default:return T.warn("unknown tag type",n.type),r}}this.unhandleBuffer=i.unreadLength?i.readToBuffer():null}return r}),(P.prototype.checkMetadata=function(){var e=this.flvMetadata,t=this.header;if(t&&!this.metadata){var r=[];if(t.hasVideo){if(!this.videoTrackMeta||!this.videoLoaded)return void console.log("checkMetadata hasVideo no this.videoTrackMeta",this.videoTrackMeta,", this.videoLoaded",this.videoLoaded);(this.videoTrackMeta.baseDTS=this.baseVideoDTS),(this.videoTrackMeta.basePTS=this.baseVideoPTS),r.push(this.videoTrackMeta)}if(t.hasAudio){if(!this.audioTrackMeta||!this.audioLoaded)return void console.log("checkMetadata hasAudio no this.audioTrackMeta",this.audioTrackMeta,", this.audioLoaded",this.audioLoaded);(this.audioTrackMeta.baseDTS=this.baseAudioDTS),(this.audioTrackMeta.basePTS=this.baseAudioPTS),r.push(this.audioTrackMeta)}var t=this.options,i=t.live,t=t.progressive;(this.metadata={formatType:n.FLV,live:!!i,progressive:!i&&!!t,url:this.loader.url,basePTS:Math.min.apply(Math,r.map(function(e){return e.basePTS||0})),baseDTS:Math.min.apply(Math,r.map(function(e){return e.baseDTS||0})),timescale:1e3,duration:1e3*((null==e?void 0:e.duration)||1/0),tracks:r}),this.emit("loadedmetadata",this.metadata)}}),(P.prototype.parseVideoBody=function(e,t,r){var i=this,t=new pt(t),n=(this.emit("loadedtag",{header:e,body:t}),[]),o=t.type===lt.KEY,a=!1;if(t.data.length)if(t.packetType===ut.AVC_SEQUENCE_HEADER){var s=this.flvMetadata||{},l={type:S.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:s.width||0,height:s.height||0,codec:"",pixelRatio:[]};t.codecId===ct.H264?((_=new ue(new g(new ArrayBuffer(8)),0)),(u=new g(t.data.buffer,t.data.byteOffset,t.data.byteLength)),(s=new he(_,u)),(l.pps=s.pps),(l.sps=s.sps),(l.codec=s.codec),(s=s.sps[0])&&((s=new re(s.subarray(1))),(l.width=s.width),(l.height=s.height))):t.codecId===ct.H265&&(console.log("parseVideoBody AVC_SEQUENCE_HEADER EVideoCodecID:",t.codecId,"body.data:",t.data),(_=new ue(new g(new ArrayBuffer(8)),0)),(u=new g(t.data.buffer,t.data.byteOffset,t.data.byteLength)),(s=new be(_,u)),console.log("parseVideoBody hvccBox",s),s.vps.forEach(function(e){return l.vps.push(e)}),s.pps.forEach(function(e){return l.pps.push(e)}),s.sps.forEach(function(e){return l.sps.push(e)}),s.sei.forEach(function(e){return l.sei.push(e)}),(l.codec=s.codec),console.log("parseVideoBody AVC_SEQUENCE_HEADER trackMeta:",l)),(this.videoTrackMeta=l),this.checkMetadata()}else{var c=[];if(t.codecId===ct.H265){if(this.skipFrame===m.NONREF&&b.isNonRefNALType(b.extractNALType(t.data,4)))return console.error("isNonRefNALType"),[];var u,p,d,h,f,y,_=b.parseHVCVideoData(t.data.subarray(0),e.dts);null!=_&&_.units&&((u=_.units),(p={type:S.VIDEO,id:2,baseDTS:0,basePTS:0,timescale:1e3,vps:[],sps:[],pps:[],sei:[],width:(null==(s=this.flvMetadata)?void 0:s.width)||0,height:(null==(s=this.flvMetadata)?void 0:s.height)||0,codec:"",pixelRatio:[]}),(d=[]),(h=[]),(f=[]),(y=[]),u.forEach(function(e){var t;e.type===v.TRAIL_R||e.type===v.IDR_W_RADL?c.push(e.data):e.type===v.SPS?((o=!0),(t=new oe((function(e){for(var t=e.byteLength,r=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?r.push((i+=2)):i++;if(0===r.length)return e;for(var n=t-r.length,o=new Uint8Array(n),a=0,i=0;i<n;a++,i++)a===r[0]&&(a++,r.shift()),(o[i]=e[a]);return o})(e.data))),(p.width=t.width),(p.height=t.height),(p.pixelRatio=t.pixelRatio),(p.codec=t.codec),d.push(e.data)):e.type===v.VPS?h.push(e.data):e.type===v.PPS?f.push(e.data):e.type===v.SEI&&y.push(e.data),(a=b.isNonRefNALType(e.type)&&a)}),h.length&&(p.vps=h),d.length&&(p.sps=d),f.length&&(p.pps=f),y.length&&(p.sei=y),_.keyframe)&&(this.videoTrackMeta?(h.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.vps.push(e)}),d.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.sps.push(e)}),f.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.pps.push(e)}),y.forEach(function(e){var t;return null==(t=i.videoTrackMeta)?void 0:t.sei.push(e)})):(this.videoTrackMeta=p))}else c=W.extractAVCCNAL(t.data,3);if(!this.videoLoaded){if(!o)return[];(this.videoLoaded=!0),(this.baseVideoDTS=e.dts),(this.baseVideoPTS=t.cts+e.dts),this.checkMetadata()}this.videoTrackMeta&&o&&(this.videoTrackMeta.pps.forEach(function(e){return c.unshift(e)}),this.videoTrackMeta.sps.forEach(function(e){return c.unshift(e)}),this.videoTrackMeta.vps.forEach(function(e){return c.unshift(e)}),this.videoTrackMeta.sei.forEach(function(e){return c.unshift(e)})),c.length&&((u={trackId:2,codec:(null==(s=this.videoTrackMeta)?void 0:s.codec)||"",trackType:S.VIDEO,isSync:o||t.type===lt.KEY,isNonRef:a,data:c,dts:e.dts+t.cts,pts:e.dts+t.cts,offset:r,size:c.reduce(function(e,t){return e+t.byteLength},0)}),n.push(u))}else T.warn("[videox] flv parse empty data",e,t);return n}),(P.prototype.parseAudioBody=function(e,t,r){var i,t=new rt(t),n=(this.emit("loadedtag",{header:e,body:t}),[]);return(t.packetType===Ze.ADTS_HEADER?((i=new g(t.data.buffer,t.data.byteOffset,t.data.byteLength)),(i=rt.readAudioSpecificConfig(i)),(this.audioTrackMeta={id:1,baseDTS:0,basePTS:0,type:S.AUDIO,codec:"mp4a.40."+i.audioObjectType,timescale:1e3,audioObjectType:i.audioObjectType,sampleRate:i.sampleRate,samplingFrequencyIndex:i.samplingFrequencyIndex,sampleSize:t.sampleSize,channelCount:i.channelCount}),this.checkMetadata()):(this.audioLoaded||((this.audioLoaded=!0),(this.baseAudioDTS=e.dts),(this.baseAudioPTS=e.dts),this.checkMetadata()),n.push({codec:(null==(i=this.audioTrackMeta)?void 0:i.codec)||"",trackId:1,trackType:S.AUDIO,isSync:!0,isNonRef:!1,data:[t.data],dts:e.dts,pts:e.dts,offset:r,size:t.data.byteLength})),n)}),(P.prototype.parseScriptBody=function(e,t){(t=new st(t)),this.emit("loadedtag",{header:e,body:t}),(e=t.value);e&&"onMetaData"===t.name&&((this.flvMetadata=e),T.info("flv script tag loaded, flv metadata:",this.flvMetadata))}),(P.prototype.onProgress=function(e){var t=e.data,e=e.offset;t.byteLength&&(t=this.parse(t.buffer,e)).length&&((e=void 0),this.cachePackets.length?((e=this.cachePackets.concat(t)),(this.cachePackets=[])):(e=t),this.metadata&&this.loader.status!==y.SUSPENGING?this.emit("loadeddata",{packets:e}):(this.cachePackets=e))}),(P.prototype.onLoadEnd=function(){this.loader.eof&&this.emit("end",void 0)}),(P.prototype.seek=function(){}),(P.prototype.reset=function(){Lt.prototype.reset.call(this),(this.cachePackets=[]),(this.videoLoaded=!1),(this.audioLoaded=!1),(this.baseVideoDTS=0),(this.baseVideoPTS=0),(this.baseAudioDTS=0),(this.baseAudioPTS=0),(this.header=null),(this.unhandleBuffer=null),(this.flvMetadata=null),(this.videoTrackMeta=null),(this.audioTrackMeta=null)});var dt=P;It=function(e,t){return(It=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}It(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Ut,(Ct=f));var x=Ut;kt=function(e,t){return(kt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}kt(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Ht,(Pt=x));var ht=Ht;xt=function(e,t){return(xt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}xt(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Mt,(wt=ht));var ft=Mt;Et=function(e,t){return(Et=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Et(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Nt,(Tt=f));var yt=Nt;bt=function(e,t){return(bt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}bt(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Ot,(St=x));var _t=Ot;mt=function(e,t){return(mt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mt(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Dt,(vt=f));var gt,vt,mt,St,bt,Tt,Et,wt,xt,Pt,kt,Ct,It,Lt,Rt,At=Dt,e=((gt=function(e,t){return(gt=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)}),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gt(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))});function Dt(e,t){var r=vt.call(this,e,t)||this;(r.entries=[]),(r.version=t.read(1)),(r.flag=t.read(3)),(r.entryCount=t.read(4));for(var i=0;i<r.entryCount;i++){var n=1===r.version;r.entries.push({segmentDuration:t.read(n?8:4),mediaTime:t.read(n?8:4),mediaRateInteger:t.read(2),mediaRateFraction:t.read(2)})}return r}function Ot(e,t){e=St.call(this,e,t)||this;return((e.version=t.read(1)),(e.flag=t.read(3)),(e.entryCount=t.read(4)),e)}function Nt(e,t){e=Tt.call(this,e,t)||this;return((e.bufferSizeDB=t.read(4)),(e.maxBitrate=t.read(4)),(e.avgBitrate=t.read(4)),e)}function Mt(){return(null!==wt&&wt.apply(this,arguments))||this}function Ht(e,t){var e=Pt.call(this,e,t)||this,r=(t.skip(4),t.skip(2),(e.bitReferenceId=t.read(2)),(e.codeStreamVersion=t.read(4)),t.skip(4),t.skip(8),(e.width=t.read(2)),(e.heigth=t.read(2)),(e.horizontalResolution=t.read(4)),(e.verticalResolution=t.read(4)),t.skip(4),(e.frameCount=t.read(2)),Math.min(t.read(1),32));return((e.compressorName=Array.from(new Array(r)).map(function(){return String.fromCharCode(t.read(1))}).join("")),t.skip(32-(r+1)),(e.depth=t.read(2)),t.skip(2),e)}function Ut(){var e=(null!==Ct&&Ct.apply(this,arguments))||this;return(e.isContainer=!0),e}function P(){var e=(null!==Lt&&Lt.apply(this,arguments))||this;return((e.header=null),(e.flvMetadata=null),(e.videoTrackMeta=null),(e.audioTrackMeta=null),(e.unhandleBuffer=null),(e.cachePackets=[]),(e.videoLoaded=!1),(e.baseVideoPTS=0),(e.baseVideoDTS=0),(e.audioLoaded=!1),(e.baseAudioPTS=0),(e.baseAudioDTS=0),(e.formatType=n.FLV),e)}((I=w=w||{})[(I.OD=1)]="OD"),(I[(I.IOD=2)]="IOD"),(I[(I.ESD=3)]="ESD"),(I[(I.DCD=4)]="DCD"),(I[(I.DSD=5)]="DSD"),(I[(I.SLCD=6)]="SLCD");{(R.readSize=function(e){for(var t,r=0,i=4;i--&&((r=(r<<7)|(127&(t=e.read(1)))),128&t););return r}),(R.extractDescriptors=function(e){for(var t,r,i,n=[];e.unreadLength;){if(((t=new R(e)),(i=new g(e.buffer,e.offset,t.size)),e.skip(t.size),t.size<=0))return n;switch(t.tag){case w.ESD:r=new Bt(t,i);break;case w.DCD:r=new jt(t,i);break;case w.DSD:r=new Vt(t,i);break;case w.SLCD:r=new qt(t,i);break;default:r=null}r&&i.unreadLength&&(r.children=R.extractDescriptors(i)),n.push(r)}return n});var k,Ft=R,C=((mi.findDescriptor=function(e,t){var r;return(e.some(function(e){return!!(r=e.probe.tag===t?e:mi.findDescriptor(e.children,t))}),r)}),mi),Bt=(e(vi,($r=C)),vi),jt=(e(gi,(zr=C)),gi),Vt=(e(_i,(Xr=C)),_i),qt=(e(yi,(Kr=C)),yi);Wr=function(e,t){return(Wr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,Gt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Wr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(fi,(Gr=a)),fi);qr=function(e,t){return(qr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var e,Wt=((e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}qr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(hi,(Vr=f)),hi);jr=function(e,t){return(jr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,Kt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}jr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(di,(Br=f)),di);Fr=function(e,t){return(Fr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var e,Xt=((e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Fr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(pi,(Ur=f)),pi);Hr=function(e,t){return(Hr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,zt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Hr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ui,(Mr=f)),ui);Nr=function(e,t){return(Nr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var e,$t=((e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Nr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ci,(Or=x)),ci);Dr=function(e,t){return(Dr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var I,Yt=((I=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Dr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(li,(Ar=f)),li),Qt=((Rr=function(e,t){return(Rr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)}),si),L=(Lr=f);if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function Jt(){this.constructor=Qt}Rr(Qt,L),(Qt.prototype=null===L?Object.create(L):((Jt.prototype=L.prototype),new Jt()));var Zt=si}Ir=function(e,t){return(Ir=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ir(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ai,(Cr=f));var er=ai;kr=function(e,t){return(kr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}kr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(oi,(Pr=f));var tr=oi;xr=function(e,t){return(xr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}xr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ni,(wr=f));var rr=ni;Er=function(e,t){return(Er=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Er(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ii,(Tr=x));var ir=ii;br=function(e,t){return(br=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}br(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ri,(Sr=x));var nr=ri;mr=function(e,t){return(mr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}mr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ti,(vr=a));var or=ti;gr=function(e,t){return(gr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}gr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(ei,(_r=x));var ar=ei;yr=function(e,t){return(yr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}yr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Zr,(fr=a));var sr=Zr;hr=function(e,t){return(hr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}hr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Jr,(dr=a));var lr=Jr;pr=function(e,t){return(pr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}pr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Qr,(ur=a));var cr,ur,pr,dr,hr,fr,yr,_r,gr,vr,mr,Sr,br,Tr,Er,wr,xr,Pr,kr,Cr,Ir,Lr,Rr,Ar,Dr,Or,Nr,Mr,Hr,Ur,Fr,Br,jr,Vr,qr,Gr,Wr,Kr,Xr,zr,$r,Yr=Qr,e=((cr=function(e,t){return(cr=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)}),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}cr(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))});function Qr(e,t){e=ur.call(this,e,t)||this;return(1===e.version?(e.baseMediaDecodeTime=t.read(8)):(e.baseMediaDecodeTime=t.read(4)),e)}function Jr(e,t){var r=dr.call(this,e,t)||this;(r.references=[]),(r.trackId=t.read(4)),(r.timescale=t.read(4)),0===r.version?((r.pts=t.read(4)),(r.offset=t.read(4))):((r.pts=t.read(8)),(r.offset=t.read(8))),t.skip(2),(r.references=[]);for(var i=t.read(2),n=0;n<i;n++){var o=new p(t.read(4),32),a=t.read(4),s=new p(t.read(4),32);r.references.push({type:o.read(1),size:o.read(31),duration:a,startWithSap:s.read(1),sapType:s.read(3),sapDeltaTime:s.read(28)})}return r}function Zr(e,t){var r=fr.call(this,e,t)||this;(r.isLeadings=[]),(r.sampleDependsOns=[]),(r.sampleIsDependedOns=[]),(r.sampleHasRedundancys=[]);for(var i=0,n=void 0;i<t.unreadLength;i++)(n=new p(t.read(1),8)),(r.isLeadings[i]=n.read(2)),(r.sampleDependsOns[i]=n.read(2)),(r.sampleIsDependedOns[i]=n.read(2)),(r.sampleHasRedundancys[i]=n.read(2));return r}function ei(){return(null!==_r&&_r.apply(this,arguments))||this}function ti(){return(null!==vr&&vr.apply(this,arguments))||this}function ri(){return(null!==Sr&&Sr.apply(this,arguments))||this}function ii(){return(null!==Tr&&Tr.apply(this,arguments))||this}function ni(e,t){e=wr.call(this,e,t)||this;return((e.version=t.read(1)),(e.flag=t.read(3)),(e.graphicsMode=t.read(2)),(e.opcolor=[t.read(2),t.read(2),t.read(2)]),e)}function oi(e,t){e=Pr.call(this,e,t)||this;return(e.version=t.read(1)),(e.flag=t.read(3)),e}function ai(e,t){var r=Cr.call(this,e,t)||this;(r.matrix=[]),(r.version=t.read(1)),(r.flag=t.read(3)),(r.createTime=r.toStandardTime(t.read(4))),(r.modifyTime=r.toStandardTime(t.read(4))),(r.trackId=t.read(4)),t.skip(4),(r.duration=t.read(4)),t.skip(8),(r.layer=t.read(2)),(r.alternateGroup=t.read(2)),(r.volume=Number(t.read(1)+"."+t.read(1))),t.skip(2);for(var i=0;i<9;i++)r.matrix.push(Number(t.read(2)+"."+t.read(2)));return((r.width=Number(t.read(2)+"."+t.read(2))),(r.height=Number(t.read(2)+"."+t.read(2))),r)}function si(e,t){var r=Lr.call(this,e,t)||this;for(r.data=[];0<t.unreadLength;)r.data.push(t.read(1));return r}function li(e,t){var r=Ar.call(this,e,t)||this;(r.matrix=[]),(r.version=t.read(1)),(r.flag=t.read(3)),(r.createTime=r.toStandardTime(t.read(4))),(r.modifyTime=r.toStandardTime(t.read(4))),(r.timeScale=t.read(4)),(r.duration=t.read(4)),(r.rate=Number(t.read(2)+"."+t.read(2))),(r.volume=Number(t.read(1)+"."+t.read(1))),t.skip(10);for(var i=0;i<9;i++)r.matrix.push(Number(t.read(2)+"."+t.read(2)));return t.skip(24),(r.nextTrackId=t.read(4)),r}function ci(e,t){e=Or.call(this,e,t)||this;return(t.skip(6),(e.dataReferenceIndex=t.read(2)),t.skip(8),(e.channelCount=t.read(2)),(e.sampleSize=t.read(2)),t.skip(4),(e.sampleRate=t.read(4)>>>16),e)}function ui(e,t){function r(e){return 96+(31&e)}var e=Mr.call(this,e,t)||this,i=((e.version=t.read(1)),(e.flag=t.read(3)),1===e.version),i=((e.createTime=e.toStandardTime(t.read(i?8:4))),(e.modifyTime=e.toStandardTime(t.read(i?8:4))),(e.timeScale=t.read(4)),(e.duration=t.read(i?8:4)),t.read(2));return((e.language=String.fromCharCode(r(i>>10),r(i>>5),r(i))),(e.quality=Number(t.read(1)+"."+t.read(1))),e)}function pi(e,t){var r=Ur.call(this,e,t)||this;return(r.data=t.readToUint8(e.size-e.length)),r}function di(e,t){var r=Br.call(this,e,t)||this;for(r.name="",r.version=t.read(1),r.flag=t.read(3),r.preDefined=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),r.handleType=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),t.skip(12);0<t.unreadLength;)r.name+=String.fromCharCode(t.read(1));return r}function hi(e,t){var r=Vr.call(this,e,t)||this;for(r.compatibleBrands=[],r.majorBrand=String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)),r.minorVersion=t.read(4);4<=t.unreadLength;)r.compatibleBrands.push(String.fromCharCode(t.read(1),t.read(1),t.read(1),t.read(1)));return r}function fi(e,t){var e=Gr.call(this,e,t)||this,t=((e.descriptors=[]),(e.audioObjectType=0),(e.samplingfrequencyIndex=0),(e.descriptors=Ft.extractDescriptors(t)),C.findDescriptor(e.descriptors,w.DCD)),r=C.findDescriptor(e.descriptors,w.DSD);return(r&&((e.audioObjectType=r.audioObjectType),(e.samplingfrequencyIndex=r.samplingfrequencyIndex)),(e.codec=t&&r?"mp4a."+t.mepg4Audio.toString(16)+"."+r.audioObjectType.toString(16):"mp4a"),e)}function yi(e,t){e=Kr.call(this,e)||this;return(e.esId=t.read(2)),e}function _i(e,t){(e=Xr.call(this,e)||this),(t=new p(t.read(2),16));return((e.audioObjectType=t.read(5)),(e.samplingfrequencyIndex=t.read(4)),(e.channel=t.read(4)),(e.frameLengthFlag=t.read(1)),(e.dependsOnCoreCoder=t.read(1)),(e.extesionFlag=t.read(1)),e)}function gi(e,t){e=zr.call(this,e)||this;return((e.mepg4Audio=t.read(1)),(e.audioStream=t.read(1)),(e.bufferSize=t.read(3)),(e.maxBitrate=t.read(4)),(e.avgBitrate=t.read(4)),e)}function vi(e,t){e=$r.call(this,e)||this;return((e.streamDependenceFlag=0),(e.URLFlag=0),(e.OCRStreamFlag=0),(e.esId=t.read(2)),(e.esFlag=t.read(1)),128&e.esFlag&&(e.streamDependenceFlag=t.read(2)),64&e.esFlag&&((e.URLFlag=t.read(1)),t.skip(e.URLFlag)),32&e.esFlag&&(e.OCRStreamFlag=t.read(2)),e)}function mi(e){(this.children=[]),(this.probe=e)}function R(e){(this.tag=e.read(1)),(this.size=R.readSize(e))}((I=k=k||{})[(I.BASE_DATA_OFFSET=1)]="BASE_DATA_OFFSET"),(I[(I.SAMPLE_DESC=2)]="SAMPLE_DESC"),(I[(I.SAMPLE_DUR=8)]="SAMPLE_DUR"),(I[(I.SAMPLE_SIZE=16)]="SAMPLE_SIZE"),(I[(I.SAMPLE_FLAG=32)]="SAMPLE_FLAG"),(I[(I.DUR_EMPTY=65536)]="DUR_EMPTY"),(I[(I.DEFAULT_BASE_IS_MOOF=131072)]="DEFAULT_BASE_IS_MOOF");e(ki,(wi=a));var A,Si=ki;Ei=function(e,t){return(Ei=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Ei(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Pi,(Ti=a));var bi,Ti,Ei,wi,xi=Pi,I=((bi=function(e,t){return(bi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)}),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}bi(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))});function Pi(e,t){e=Ti.call(this,e,t)||this;return((e.trackId=t.read(4)),(e.defaultSampleDescriptionIndex=t.read(4)),(e.defaultSampleDuration=t.read(4)),(e.defaultSampleSize=t.read(4)),(e.defaultSampleFlag=t.read(4)),e)}function ki(e,t){e=wi.call(this,e,t)||this;return((e.baseDataOffset=0),(e.defaultSampleDescriptionIndex=0),(e.defaultSampleDuration=0),(e.defaultSampleSize=0),(e.defaultSampleFlag=0),(e.trackId=t.read(4)),e.flag&k.BASE_DATA_OFFSET&&(e.baseDataOffset=t.read(8)),e.flag&k.SAMPLE_DESC&&(e.defaultSampleDescriptionIndex=t.read(4)),e.flag&k.SAMPLE_DUR&&(e.defaultSampleDuration=t.read(4)),e.flag&k.SAMPLE_SIZE&&(e.defaultSampleSize=t.read(4)),e.flag&k.SAMPLE_FLAG&&(e.defaultSampleFlag=t.read(4)),e)}((e=A=A||{})[(e.DATA_OFFSET=1)]="DATA_OFFSET"),(e[(e.FIRST_FLAG=4)]="FIRST_FLAG"),(e[(e.DURATION=256)]="DURATION"),(e[(e.SIZE=512)]="SIZE"),(e[(e.FLAG=1024)]="FLAG"),(e[(e.CTS_OFFSET=2048)]="CTS_OFFSET");I(kn,(pn=a));var Ci=kn;un=function(e,t){return(un=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}un(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Pn,(cn=f));var Ii=Pn;ln=function(e,t){return(ln=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ln(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(xn,(sn=f));var Li=xn;an=function(e,t){return(an=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}an(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(wn,(on=f));var Ri=wn;nn=function(e,t){return(nn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}nn(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(En,(rn=f));var Ai=En;tn=function(e,t){return(tn=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}tn(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Tn,(en=x));var Di=Tn;Zi=function(e,t){return(Zi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Zi(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(bn,(Ji=x));var Oi=bn;Qi=function(e,t){return(Qi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Qi(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(Sn,(Yi=f));var Ni=Sn;$i=function(e,t){return($i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};function Mi(e){return Array.isArray(e)?e:e?[e]:[]}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}$i(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(mn,(zi=f));var Hi=mn,Ui=((vn.prototype.addTrack=function(e){this.tracks.push(e)}),(vn.prototype.getTracks=function(){return this.tracks}),(vn.prototype.getTrackById=function(t){return this.tracks.find(function(e){return e.options.id===t})}),vn),Fi=function(){return(Fi=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in(t=arguments[r]))Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},Bi=((N.prototype.getSamples=function(){return this.samples}),(N.prototype.getNextSampleOffset=function(){var e=this.samples[this.nextSampleIndex];return e?e.offset:0}),(N.prototype.addSample=function(e){this.samples.push(e),(this.duration+=e.duration)}),(N.prototype.processNextSample=function(e,t){void 0===t&&(t=0);var r=this.samples[this.nextSampleIndex];if(r)return this.processSample(e,t,r)}),(N.prototype.processSample=function(e,t,r){var i=(t=void 0===t?0:t)+e.byteLength,t=r.offset-t;if(0<=t&&r.offset+r.size<=i)return(this.nextSampleIndex++,Fi(Fi({},r),{data:e.subarray(t,t+r.size)}))}),(N.prototype.processSamples=function(e,t){void 0===t&&(t=0);for(var r=this.samples,i=[],n=this.nextSampleIndex,o=r.length;n<o;n++){var a=this.processSample(e,t,r[n]);if(!a)break;i.push(a)}return i}),(N.prototype.seek=function(e){for(var t,r=e*this.options.timeScale,i=-1,n=-1,o=0,a=this.samples.length;o<a;o++)if(((t=this.samples[o]).isSync&&(n=o),t.dts+t.cts>=r)){i=n;break}if(-1<i)return(this.nextSampleIndex=i),this.samples[i]}),N),ji=((gn.prototype.createMedia=function(e){return this._parseMoovJSON(e)}),(gn.prototype._parseMoovJSON=function(s){var l=this,e=s.mvhd.box,c=new Ui({duration:e.duration,timeScale:e.timeScale,rate:e.rate,modifyTime:e.modifyTime,createTime:e.createTime});return(s.trak&&[].concat(s.trak).forEach(function(e){var t=e.tkhd,e=e.mdia,r=e.mdhd,i=e.hdlr,e=e.minf.stbl,t=t.box,i=i.box,r=r.box,n=ce[i.handleType],e=l._buildSamples(e,n),o={id:t.trackId,name:i.name,handleType:i.handleType,type:n,createTime:t.createTime,modifyTime:t.modifyTime,layer:t.layer,volume:t.volume,matrix:t.matrix,duration:t.duration,width:t.width,height:t.height,timeScale:r.timeScale,language:r.language,quality:r.quality,defaultSampleDescriptionIndex:1,defaultSampleDuration:0,defaultSampleSize:0,defaultSampleFlag:0},n=null==(i=s.mvex)?void 0:i.trex,a=(n&&[].concat(n).forEach(function(e){e=e.box;(o.defaultSampleDescriptionIndex=e.defaultSampleDescriptionIndex),(o.defaultSampleDuration=e.defaultSampleDuration),(o.defaultSampleSize=e.defaultSampleSize),(o.defaultSampleFlag=e.defaultSampleFlag)}),new Bi(o));e.forEach(function(e){return a.addSample(e)}),c.addTrack(a)}),c)}),(gn.prototype._buildSamples=function(e,n){var o,a,s,l,c,u,p,d,h,f,y,_,g,v,m,S,b,t=e.stts,r=e.stss,i=e.ctts,T=e.stsc,E=e.stsz||e.stz2;return E?((u=e.stco||e.co64),(p=T.box),(d=null==r?void 0:r.box),(h=t.box),(f=null==i?void 0:i.box),(v=g=_=y=-1),(m=0),(S=[]),(b=E.box.sampleSizes).forEach(function(e,t){var r={},i=p.entries;(r.size=e),(r.trackType=n),0===t?((a=1),(o=0),(r.chunkIndex=a),(c=i[(r.chunkRunIndex=o)].samplePerChunk),(l=0),(s=o+1<i.length?i[o+1].firstChunk-1:1/0)):t<c?((r.chunkIndex=a),(r.chunkRunIndex=o)):(a++,(l=0),s<(r.chunkIndex=a)&&(s=++o+1<i.length?i[o+1].firstChunk-1:1/0),(c+=i[(r.chunkRunIndex=o)].samplePerChunk)),(r.descriptionIndex=i[o].sampleDescriptionIndex-1),(r.offset=u.box.chunkOffsets[r.chunkIndex-1]+l),(l+=r.size),y<t&&(_++,(y=Math.max(y,0)),(y+=h.sampleCounts[_])),0<t?(((e=S[t-1]).duration=h.sampleDurations[_]),(r.dts=S[t-1].dts+e.duration)):(r.dts=0),f?(g<=t&&(v++,(g=Math.max(g,0)),(g+=f.sampleCounts[v])),(r.cts=f.sampleOffsets[v])):(r.cts=0),d?t===d.sampleNumbers[m]-1?((r.isSync=!0),m++):(r.isSync=!1):(r.isSync=!0),(r.isLast=t===b.length-1),S.push(r)}),S):[]}),gn),Vi=((_n.prototype.init=function(e){this.options=e}),(_n.prototype.parse=function(t){var r=this;Mi(t.traf).forEach(function(e){return r._buildSamples(e,t.box)})}),(_n.prototype._buildSamples=function(e,t){var r=e.tfhd.box,i=this._getTrakById(r.trackId);if(i)for(var n=i.options,o=e.tfdt.box,a=r.flag,s=(a&k.SAMPLE_DESC?r:n).defaultSampleDescriptionIndex,l=(a&k.SAMPLE_DUR?r:n).defaultSampleDuration,c=(a&k.SAMPLE_SIZE?r:n).defaultSampleSize,u=(a&k.SAMPLE_FLAG?r:n).defaultSampleFlag,p=Mi(e.trun),d=n.id,h=n.type,f=a&k.BASE_DATA_OFFSET?r.baseDataOffset:a&k.DEFAULT_BASE_IS_MOOF?t.header.start:0,y=0,_=0;_<p.length;_++)for(var g=p[_].box,v=g.flag,m=g.dataOffset+f,S=0;S<g.sampleCount;S++){var b={},T=((b.trackId=d),(b.trackType=h),(b.descriptionIndex=s),v&A.SIZE?(b.size=g.sampleSizes[S]):(b.size=c),v&A.DURATION?(b.duration=g.sampleDurations[S]):(b.duration=l),(b.dts=0<y?y:o?o.baseMediaDecodeTime:0),(y=b.dts+b.duration),v&A.CTS_OFFSET?(b.cts=g.sampleCTSs[S]):(b.cts=0),u);v&A.FLAG?(T=g.sampleFlags[S]):0===S&&v&A.FIRST_FLAG&&(T=g.firstSampleFlag),(b.offset=m),(b.flag=T),(b.isSync=!(T&(le.IS_NON_SYNC|le.DEPENDS_YES))),(b.isLeading=(T>>26)&3),(b.dependsOn=(T>>24)&3),(b.isDependedOn=(T>>22)&3),(b.hasRedundancy=(T>>20)&3),(b.degradationPriority=65535&T),(m+=b.size),(b.isLast=_===p.length-1&&S===g.sampleCount-1),i.addSample(b)}}),(_n.prototype.destroy=function(){this.options=null}),_n);Xi=function(e,t){return(Xi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Xi(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(O,(Ki=s)),(O.probe=function(e){return(!(e.byteLength<8)&&"ftyp"===[e[4],e[5],e[6],e[7]].map(function(e){return String.fromCharCode(e)}).join(""))}),(O.prototype.processPackets=function(t,r){var e,i=this,n=[];return(this.media&&t.byteLength&&(this.media.getTracks().forEach(function(e){e.processSamples(t,r).forEach(function(e){e=i.convertSampleToPacket(e);e&&n.push(e)})}),(e=this.getMinNextSampleOffset()-r),(this.unhandleBuffer=e>=t.byteLength?null:t.slice(e).buffer)),n)}),Object.defineProperty(O.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),(O.prototype.seek=function(t){var e,r=this.options.progressive;(this.unhandleBuffer=null),r&&this.loader.suspend(),null!=(e=this.media)&&e.getTracks().map(function(e){return e.seek(t)}),r&&this.loader.loadRange(this.getMinNextSampleOffset())}),(O.prototype.onProgress=function(e){var t=e.data,e=e.offset;t.length&&(this.unhandleBuffer&&((t=g.concatUint8(new Uint8Array(this.unhandleBuffer),t)),(e-=this.unhandleBuffer.byteLength),(this.unhandleBuffer=null)),this.metadata||this.parse(new g(t.buffer,0),e),this.metadata)&&(t=this.processPackets(t,e)).length&&this.emit("loadeddata",{packets:t})}),(O.prototype.getMinNextSampleOffset=function(){return this.media?Math.min.apply(Math,this.media.getTracks().map(function(e){return e.getNextSampleOffset()})):0}),(O.prototype.parse=function(o,a){var s,l=this;void 0===a&&(a=0);for(var c=o.offset,u=0,p=this;8<=o.unreadLength;){var e=(function(){var e,t,r,i,n;return((u=o.offset-c),0===(e=new ue(o,a+u)).size?((r=new Error("box [".concat(e.type,"] size \u4e3a 0"))),console.error(r),p.emit("error",{code:d.PARSER,message:r.message,origin:r}),"break"):p.options.progressive&&"mdat"===e.type&&!p.metadata?((t=e.start+e.size),p.loader.suspend(),(p.unhandleBuffer=null),T.info("\u68c0\u6d4b\u5230mdat box\u5728moov box\u4e4b\u540e\uff0c\u8df3\u8f6cmoov\u8d77\u59cb\u504f\u79fb\u4f4d"),p.loader.loadRange(t).then(function(){(l.unhandleBuffer=null),l.loader.jump(e.start),l.loader.status!==y.SUSPENGING&&l.loader.loadRange(e.start,t)}),{value:void 0}):((r=e.size-e.length),o.unreadLength>=r?((n=H[e.type])?((i=new g(o.buffer,o.offset,r)),(s=new n(e,i)).isContainer&&((n=new O({sub:!0})).proxy(p,["loadedbox"]),n.parse(i,u+a+e.length),n.removeAllListeners(),n.boxes.forEach(function(e){s.append(e)}))):(s=new f(e)),o.skip(r),p.boxes.push(s),void p.emit("loadedbox",s)):(o.back(e.length),"break")))})();if("object"==typeof e)return e.value;if("break"===e)break}o.unreadLength&&(this.unhandleBuffer=o.readToBuffer())}),(O.prototype.reset=function(){Ki.prototype.reset.call(this),(this.boxes=[]),(this.unhandleBuffer=null),(this.avcCBox=void 0),(this.hvcCBox=void 0),(this.mp4aBox=void 0),(this.media=null),this.moofParser.destroy()});var qi=O;Wi=function(e,t){return(Wi=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};var Gi,Wi,Ki,Xi,zi,$i,Yi,Qi,Ji,Zi,en,tn,rn,nn,on,an,sn,ln,cn,un,pn,dn=function(){return(dn=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in(t=arguments[r]))Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},hn=["loadedcodecinfo","loadedmetadata","updatedmetadata","loadeddata","error"],fn=[qi,dt],yn=((function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}Wi(e,t),(e.prototype=null===t?Object.create(t):((r.prototype=t.prototype),new r()))})(D,(Gi=Ne)),(D.prototype.createLoader=function(){var e=new Be(this.options);return(e.proxy(this,["progress","error"]),e.proxyOnce(this,["loadstart","loadend"]),e.once("progress",this.handleFirstLoadData),e)}),(D.prototype.createParser=function(e){e=new e(dn(dn({},this.options),{loader:this.loader}));return e.proxy(this,hn),e}),Object.defineProperty(D.prototype,"skipFrame",{get:function(){return this.activeParser.skipFrame},set:function(e){T.info("\u8bbe\u7f6eskipFrame:",e),void 0!==e&&((this.options.skipFrame=e),(this.activeParser.skipFrame=e))},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"status",{get:function(){return this.activeParser.status},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"url",{get:function(){return this.loader.url},enumerable:!1,configurable:!0}),(D.prototype.parse=function(e){T.info("\u6267\u884cparse"),this.loader.reset(),this.handleFirstLoadData({offset:0,data:e}),this.activeParser.onLoadEnd()}),(D.prototype.load=function(e){return(T.info("\u6267\u884cload",e),this.loader.destroy(),(this.loader=this.createLoader()),this.loader.load(e))}),(D.prototype.seek=function(e){return(T.info("\u6267\u884cseek",e),this.activeParser.seek(e))}),(D.prototype.suspend=function(){return this.activeParser.suspend()}),(D.prototype.resume=function(){return this.activeParser.resume()}),(D.prototype.destroy=function(){T.info("\u6267\u884cdestory"),this.loader.destroy(),this.activeParser.destroy(),this.removeAllListeners()}),D);function D(e){void 0===e&&(e={});var i=Gi.call(this)||this;return((i.loader=new Be()),(i.parserClasses=fn),(i.logger=T),(i.handleFirstLoadData=function(t){var e,r;t&&((r=i.parserClasses.find(function(e){return e.probe(t.data)}))?((e=i.activeParser.formatType),i.activeParser.destroy(),(i.activeParser=i.createParser(r)),T.info("\u5207\u6362parser, ".concat(n[e]," -> ").concat(n[i.activeParser.formatType])),i.emit("parserchange",void 0),i.activeParser.onProgress(t)):((r="\u672a\u627e\u5230\u5bf9\u5e94\u7684Parser, Byte\u6570\u636e: "+t.data.slice(0,20).join(",")),T.error(r),i.emit("error",{code:d.PARSER,message:r})))}),(i.options=e),(i.loader=i.createLoader()),(i.activeParser=i.createParser(i.parserClasses[0])),i.logger.info("demuxer options",e),i)}function O(e){var h=Ki.call(this,(e=void 0===e?{}:e))||this;return((h.media=null),(h.unhandleBuffer=null),(h.formatType=n.MP4),(h.boxes=[]),(h._handleBoxLoad=function(e){var o,a,s,l,t,c,u,p,d,r,i=e.header.type;h._handleCodecBoxLoaded(i),"hvcC"===i?(h.hvcCBox=e):"hvc1"===i||"hev1"===i?h.hvcCBox&&(h.hvcCBox.codecTag=i):"avcC"===i?(h.avcCBox=e):"esds"===i?(h.esdsBox=e):"mp4a"===i?(h.mp4aBox=e):"moov"===i?((r=f.mapBoxToJSON(e)),(h.media=h.moovParser.createMedia(r)),h.moofParser.init({media:h.media}),(t=(r=h.mp4aBox||{}).sampleRate),(o=void 0===t?0:t),(t=r.sampleSize),(a=void 0===t?0:t),(t=r.channelCount),(s=void 0===t?0:t),(t=(r=h.esdsBox||{}).audioObjectType),(l=void 0===t?0:t),(t=r.codec),(c=void 0===t?"":t),(u=[]),(p=[]),(d=[]),h.hvcCBox?((p=h.hvcCBox.vps),(d=h.hvcCBox.pps),(u=h.hvcCBox.sps)):h.avcCBox&&((d=h.avcCBox.pps),(u=h.avcCBox.sps)),(h.metadata={formatType:n.MP4,live:!!h.options.live,progressive:!!h.options.progressive,url:h.loader.url,basePTS:0,baseDTS:0,duration:h.media.options.duration,timescale:h.media.options.timeScale,tracks:h.media.getTracks().map(function(e){var t,r,i,n={};switch(((n.id=e.options.id),(n.type=e.options.type),(n.timescale=e.options.timeScale),(n.baseDTS=0),(n.basePTS=0),n.type)){case S.VIDEO:(n.width=e.options.width),(n.height=e.options.height),(n.vps=p),(n.sps=u),(n.pps=d),(n.rotate=(t=e.options.matrix).length<5||((r=Math.hypot(t[0],t[3])),(i=Math.hypot(t[1],t[4])),0===r)||0===i?0:(180*Math.atan2(t[1]/i,t[0]/r))/Math.PI),(n.pixelRatio=[]),(n.codec=h.hvcCBox?h.hvcCBox.codec:(null==(i=h.avcCBox)?void 0:i.codec)||""),(n.codecTag=h.hvcCBox?h.hvcCBox.codecTag:void 0);break;case S.AUDIO:(n.audioObjectType=l),(n.sampleRate=o),(n.sampleSize=a),(n.channelCount=s),(n.codec=c);break;default:n.type=S.UNKNOWN}return n})}),(r=Number(h.options.offsetTime)),h.metadata.progressive&&0<r&&h.seek(r),T.info("loadedmetadata metadata:",h.metadata),h.emit("loadedmetadata",h.metadata)):"moof"===i&&(T.info("\u68c0\u6d4b\u5230moof box\u88ab\u52a0\u8f7d\uff0c\u5f53\u524d\u7d20\u6750\u4e3afMP4"),h.moofParser.parse(f.mapBoxToJSON(e)))}),(h._handleCodecBoxLoaded=function(t){var e=["hvc1","hev1","avc1"].find(function(e){return e===t});e&&h.emit("loadedcodecinfo",e)}),(h.convertSampleToPacket=function(e){var t,r,i,n,o;return e.trackType===S.VIDEO&&(h.hvcCBox||h.avcCBox)?((o=e.data),(t=e.isSync),(r=(i=h.hvcCBox||h.avcCBox).lengthSizeMinusOne),(i=i.codec),(n=W.extractAVCCNAL(o,r)),(o=!1),h.hvcCBox&&(o=n.every(function(e){return b.isNonRef(e)})),t&&(h.hvcCBox?(h.hvcCBox.pps.forEach(function(e){return n.unshift(e)}),h.hvcCBox.sps.forEach(function(e){return n.unshift(e)}),h.hvcCBox.vps.forEach(function(e){return n.unshift(e)})):h.avcCBox&&(h.avcCBox.pps.forEach(function(e){return n.unshift(e)}),h.avcCBox.sps.forEach(function(e){return n.unshift(e)}))),{codec:i,trackId:e.trackId,trackType:e.trackType,isLast:e.isLast,dts:e.dts,pts:e.cts+e.dts,isSync:e.isSync,isNonRef:o,data:n,size:n.reduce(function(e,t){return e+t.byteLength},0),offset:e.offset}):e.trackType===S.AUDIO&&h.esdsBox?{codec:h.esdsBox.codec,trackId:e.trackId,trackType:e.trackType,dts:e.dts,pts:e.cts+e.dts,isLast:e.isLast,isSync:!0,isNonRef:!1,data:[e.data],size:e.data.byteLength,offset:e.offset}:void 0}),(h.options=e),(h.moovParser=new ji()),(h.moofParser=new Vi()),e.sub||h.on("loadedbox",h._handleBoxLoad),h)}function _n(){var r=this;(this.options=null),(this._getTrakById=function(t){var e;return null==(e=r.options)?void 0:e.media.getTracks().find(function(e){return e.options.id===t})})}function gn(){}function N(e){(this.samples=[]),(this.nextSampleIndex=0),(this.duration=0),(this.options=e)}function vn(e){(this.tracks=[]),(this.options=e)}function mn(e,t){var r=zi.call(this,e,t)||this;(r.sampleCounts=[]),(r.sampleDurations=[]),(r.version=t.read(1)),(r.flag=t.read(3));for(var i=t.read(4),n=0;n<i;n++)(r.sampleCounts[n]=t.read(4)),(r.sampleDurations[n]=t.read(4));return r}function Sn(e,t){var r=Yi.call(this,e,t)||this;(r.isContainer=!0),(r.sampleSizes=[]),(r.version=t.read(1)),(r.flag=t.read(3)),(r.sampleSize=t.read(4));for(var i=t.read(4),n=0;n<i;n++)0===r.sampleSize?r.sampleSizes.push(t.read(4)):r.sampleSizes.push(r.sampleSize);return r}function bn(e,t){var r=Ji.call(this,e,t)||this;(r.sampleNumbers=[]),(r.version=t.read(1)),(r.flag=t.read(3));for(var i=t.read(4),n=0;n<i;n++)r.sampleNumbers.push(t.read(4));return r}function Tn(e,t){e=en.call(this,e,t)||this;return((e.version=t.read(1)),(e.flag=t.read(3)),(e.entryCount=t.read(4)),e)}function En(e,t){var r=rn.call(this,e,t)||this;(r.entries=[]),(r.version=t.read(1)),(r.flag=t.read(3));for(var i=t.read(4),n=0;n<i;n++)r.entries.push({firstChunk:t.read(4),samplePerChunk:t.read(4),sampleDescriptionIndex:t.read(4)});return r}function wn(e,t){var r=on.call(this,e,t)||this;(r.chunkOffsets=[]),(r.version=t.read(1)),(r.flag=t.read(3));for(var i=t.read(4),n=0;n<i;n++)r.chunkOffsets.push(t.read(8));return r}function xn(e,t){var r=sn.call(this,e,t)||this;(r.chunkOffsets=[]),(r.version=t.read(1)),(r.flag=t.read(3));for(var i=t.read(4),n=0;n<i;n++)r.chunkOffsets.push(t.read(4));return r}function Pn(e,t){var r=cn.call(this,e,t)||this;(r.sampleCounts=[]),(r.sampleOffsets=[]),(r.version=t.read(1)),(r.flag=t.read(3)),(r.entryCount=t.read(4));for(var i=0;i<r.entryCount;i++)r.sampleCounts.push(t.read(4)),r.sampleOffsets.push(t.read(4));return r}function kn(e,t){var r=pn.call(this,e,t)||this;(r.sampleDurations=[]),(r.sampleSizes=[]),(r.sampleFlags=[]),(r.sampleCTSs=[]),(r.sampleCount=t.read(4)),r.flag&A.DATA_OFFSET?(r.dataOffset=t.readInt(4)):(r.dataOffset=0),r.flag&A.FIRST_FLAG?(r.firstSampleFlag=t.read(4)):(r.firstSampleFlag=0);for(var i=0;i<r.sampleCount;i++)r.flag&A.DURATION&&(r.sampleDurations[i]=t.read(4)),r.flag&A.SIZE&&(r.sampleSizes[i]=t.read(4)),r.flag&A.FLAG&&(r.sampleFlags[i]=t.read(4)),r.flag&A.CTS_OFFSET&&(0===r.version?(r.sampleCTSs[i]=t.read(4)):(r.sampleCTSs[i]=t.readInt(4)));return r}})(),In);function Cn(e){var t=i[e];return(void 0!==t||((t=i[e]={exports:{}}),r[e](t,t.exports,Cn)),t.exports)}var r,i,In}),"object"==typeof r&&"object"==typeof t?(t.exports=i()):"function"==typeof define&&define.amd?define([],i):"object"==typeof r?(r.VideoxDemux=i()):(e.VideoxDemux=i())},{"es6-promise":8}],53:[function(e,t,r){function a(e){for(var t=5381,r=e.length;r;)t=(33*t)^e.charCodeAt(--r);return(t>>>0).toString()}var s=e("./vttparse");t.exports={parse:function(e,t,r){var i,e=e.trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),n=[],o=new s();(o.oncue=function(e){(e.id=a(e.startTime)+a(e.endTime)+a(e.text)),(e.text=decodeURIComponent(escape(e.text))),(e.isBig=!1);var t=e.text.split("#xywh=");2==t.length&&((t=t[1].split(",")),(e.x=t[0]),(e.y=t[1]),(e.w=t[2]),(e.h=t[3]),(e.isBig=!0)),0<e.endTime&&n.push(e)}),(o.onparsingerror=function(e){i=e}),(o.onflush=function(){i&&r?(r(i),console.log(i)):t(n)}),e.forEach(function(e){o.parse(e+"\n")}),o.flush()}}},{"./vttparse":55}],54:[function(e,t,r){function S(e){return("string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase())}function b(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)e[r]=i[r]}return e}function i(e,t,r){var i=this,n=(function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)})(),o={},a=(n?(i=document.createElement("custom")):(o.enumerable=!0),(i.hasBeenReset=!1),""),s=!1,l=e,c=t,u=r,p=null,d="",h=!0,f="auto",y="start",_=50,g="middle",v=50,m="middle";if((Object.defineProperty(i,"id",b({},o,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(i,"pauseOnExit",b({},o,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(i,"startTime",b({},o,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");(l=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"endTime",b({},o,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");(c=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"text",b({},o,{get:function(){return u},set:function(e){(u=""+e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"region",b({},o,{get:function(){return p},set:function(e){(p=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"vertical",b({},o,{get:function(){return d},set:function(e){e="string"==typeof(e=e)&&!!T[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");(d=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"snapToLines",b({},o,{get:function(){return h},set:function(e){(h=!!e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"line",b({},o,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");(f=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"lineAlign",b({},o,{get:function(){return y},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");(y=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"position",b({},o,{get:function(){return _},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");(_=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"positionAlign",b({},o,{get:function(){return g},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");(g=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"size",b({},o,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");(v=e),(this.hasBeenReset=!0)}})),Object.defineProperty(i,"align",b({},o,{get:function(){return m},set:function(e){e=S(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");(m=e),(this.hasBeenReset=!0)}})),(i.displayState=void 0),n))return i}var T,n;t.exports="undefined"!=typeof window&&window.VTTCue?window.VTTCue:((T={"":!0,lr:!0,rl:!0}),(n={start:!0,middle:!0,end:!0,left:!0,right:!0}),(i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)}),i)},{}],55:[function(e,t,r){function i(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}var s=e("./vttcue");function n(){(this.window=window),(this.state="INITIAL"),(this.buffer=""),(this.decoder=new i()),(this.regionList=[])}function l(){this.values=Object.create(null)}function c(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}l.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return(!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0))}};var u=new s(0,0,0),p="middle"===u.align?"middle":"center";function d(i,e,o){var t,a,n=i;function r(){var e,t=(t=(t=i).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?((e=(e=t[4])&&e.replace(".","")),t[3]?r(t[1],t[2],t[3].replace(":",""),e):59<t[1]?r(t[1],t[2],0,e):r(0,t[1],t[2],e)):null;function r(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}if(null===t)throw new Error("Malformed timestamp: "+n);return(i=i.replace(/^[^\sa-zA-Z-]+/,"")),t}function s(){i=i.replace(/^\s+/,"")}if((s(),(e.startTime=r()),s(),"--\x3e"!==i.substr(0,3)))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);(i=i.substr(3)),s(),(e.endTime=r()),s(),(t=i),(e=e),(a=new l()),c(t,function(e,t){switch(e){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===t){a.set(e,o[r].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),n=i[0];a.integer(e,n),a.percent(e,n)&&a.set("snapToLines",!1),a.alt(e,n,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start",p,"end"]);break;case"position":(i=t.split(",")),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start",p,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",p,"end","left","right"])}},/:/,/\s/),(e.region=a.get("region",null)),(e.vertical=a.get("vertical","")),"auto"===(t=a.get("line","auto"))&&-1===u.line&&(t=-1),(e.line=t),(e.lineAlign=a.get("lineAlign","start")),(e.snapToLines=a.get("snapToLines",!0)),(e.size=a.get("size",100)),(e.align=a.get("align",p)),"auto"===(t=a.get("position","auto"))&&50===u.position&&(t="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),(e.position=t)}(n.prototype={parse:function(e){var i=this;function t(){for(var e=0,t=(t=i.buffer).replace(/<br(?: \/)?>/gi,"\n");e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return("\r"===t[e]&&++e,"\n"===t[e]&&++e,(i.buffer=t.substr(e)),r)}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var r,n=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch((o?(o=!1):(r=t()),i.state)){case"HEADER":/:/.test(r)?c(r,function(e,t){"Region"===e&&console.log("parse region",t)},/:/):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(((i.cue=new s(0,0,"")),(i.state="CUE"),-1===r.indexOf("--\x3e"))){i.cue.id=r;continue}case"CUE":try{d(r,i.cue,i.regionList)}catch(e){(i.cue=null),(i.state="BADCUE");continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||(a&&(o=!0))){i.oncue&&i.oncue(i.cue),(i.cue=null),(i.state="ID");continue}i.cue.text&&(i.cue.text+="\n"),(i.cue.text+=r);continue;case"BADCUE":r||(i.state="ID");continue}}}catch(e){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),(i.cue=null),(i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE")}return this},flush:function(){try{if(((this.buffer+=this.decoder.decode()),(!this.cue&&"HEADER"!==this.state)||((this.buffer+="\n\n"),this.parse()),"INITIAL"===this.state))throw new Error("Malformed WebVTT signature.");}catch(e){throw e;}return this.onflush&&this.onflush(),this}}),(t.exports=n)},{"./vttcue":54}],56:[function(e,t,r){function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];(i.enumerable=i.enumerable||!1),(i.configurable=!0),"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1})}var a=e("./vtt-parser"),s=e("./vtt-renderer"),l=e("./vtt-loader"),c=e("../../player/base/event/eventtype"),u=e("../../lib/ua"),p=e("../../lib/event"),d=e("../../ui/component/util"),e=(function(){function e(e){(this.parser=null),(this.activeRenderer=null),(this.trackConfigs=null),(this.hasUserTracks=!1),(this.vttText={}),(this.tickTimer=null),(this.prevPosition=null),(this._enabled=!1),(this._isShow=!1),(this.sleeper=new h()),(this.player=(e=e||{}).player),(this.loader=new l()),(this.parser=new a()),this.createRendererInstance(),this.bindEvents()}var t=e.prototype;return((t.bindEvents=function(){var t,r=this,e=this,i=this.player,n=(i.on(c.Private.TextTrackFounded,function(e){if("user"===e.paramData.from)r.hasUserTracks=!0;else if(r.hasUserTracks)return;e=e.paramData.textTracks;e&&e.length&&((r.enabled=!0),(r.trackConfigs=e.map(function(e){return o({},e,{label:e.label||e.srclang,language:e.srclang})})),r.trackConfigs.forEach(function(e){r.activeRenderer.addTrack(e),"always"===i.getOptions().controlBarVisibility&&r.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},r.parser.cues)}))}),i.on(c.Private.UserTrackReset,function(){r.hasUserTracks=!1}),u.IS_IOS?((t=!1),i.on(c.Player.RequestFullScreen,function(){t=!0}),p.on(i.tag,"webkitendfullscreen",function(){t=!1}),p.on(i.tag.textTracks,"change",function(){var e;r.sleeper.isSleep||(r.sleeper.sleep(1e3),r.isCustomRenderer)||(t&&((e=i.tag.textTracks),(e=Array.from(e).find(function(e){return"showing"===e.mode}))?(r.activeTrackConfig&&r.activeTrackConfig.language===e.language)||(r.switchTrack(e.language),i.trigger(c.Private.SelectorValueChange,{type:"cc",text:e.label})):i.trigger(c.Private.CCStateChanged,{value:"off",lang:""})))})):(i.on(c.Player.RequestFullScreen,this.adjustLayout.bind(this)),i.on(c.Player.CancelFullScreen,this.adjustLayout.bind(this)),(n=d.debounce(function(){e.isCustomRenderer&&e.activeRenderer.resetCuesStyle(r.parser.cues)},100)),p.on(window,"resize",n)),d.throttle(function(){e.isShow&&(e.activeRenderer.forceUpdateCuesStyle({transform:"translateY(-44px)"},e.parser.cues),e.player.paused())&&(e.activeRenderer.hide(),e.activeRenderer.restore())},100)),n=(i.on(c.Private.ShowBar,n),d.throttle(function(){e.isShow&&(e.activeRenderer.forceUpdateCuesStyle({transform:"none"},e.parser.cues),e.player.paused())&&(e.activeRenderer.hide(),e.activeRenderer.restore())},100));i.on(c.Private.HideBar,n),i.on(c.Private.VttHide,function(){r.hide()}),i.on(c.Private.VttSwitchTrack,function(e){r.switchTrack(e.paramData)}),i.on(c.Private.VttClearTracks,function(){r.reset()})}),(t.createRendererInstance=function(e){this.activeRenderer&&this.activeRenderer.dispose();var t=this.player.getOptions(),r={player:this.player};this.adaptPlatform(),e?e===s.VttBasicRenderer.RENDER_TYPE_NATIVE?(this.activeRenderer=new s.NativeRenderer(r)):((r.overlayId=this.getOverlayId()),(this.activeRenderer=new s.CustomRenderer(r))):t.useNativeTextRenderer?(this.activeRenderer=new s.NativeRenderer(r)):((r.overlayId=this.getOverlayId()),(this.activeRenderer=new s.CustomRenderer(r)))}),(t.switchTrack=function(t){var e,r=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),(this.parser=new a()),this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),(this.activeTrackConfig=t),(e=this.trackConfigs.find(function(e){return e.language===t})))&&((e=e._loaded?"":(e||{}).src),this.loadVtt(e,function(){r.parseVtt(),r.activeRenderer.addCues(r.parser.cues,r.activeTrackConfig.language),r.show()}))}),(t.adaptPlatform=function(){var e=this.player.getOptions();u.IS_IOS&&(e.useNativeTextRenderer=!0)}),(t.loadVtt=function(e,t){var r=this;e?this.loader.loadFromUrl(e,function(e){(r.activeTrackConfig._loaded=!0),(r.vttText[r.activeTrackConfig.language]=e),t&&t()}):t&&t()}),(t.show=function(){(this._isShow=!0),this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language)}),(t.hide=function(){(this._isShow=!1),this.clearTicker(),this.activeRenderer.hide()}),(t.switchRenderer=function(e){var t=this,r=s.VttBasicRenderer.RENDER_TYPE_NATIVE,i=s.VttBasicRenderer.RENDER_TYPE_CUSTOM;((e===r&&this.activeRenderer.type!==r)||(e===i&&this.activeRenderer.type!==i))&&(this.createRendererInstance(e),this.trackConfigs.forEach(function(e){return t.activeRenderer.addTrack(e)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())}),(t.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])}),(t.adjustLayout=function(){var e=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){e.activeRenderer.restore()},300))}),(t.startTickTimeListener=function(){var t=this;this.clearTicker(),this.tick(function(){var e=t.player.getCurrentTime();isNaN(e)||t.activeRenderer.renderCues(t.findTargetCues(e))})}),(t.tick=function(e){var t=this;this.tickTimer=requestAnimationFrame(function(){try{e()}catch(e){console.log("e",e)}t.tick(e)})}),(t.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),(this.tickTimer=null))}),(t.getOverlayId=function(){var e=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(e)return e.id}),(t.findTargetCues=function(e){if(this.parser&&e!==this.prevPosition){this.prevPosition=e;for(var t=[],r=0;r<this.parser.cues.length;r++){var i=this.parser.cues[r];if(e>=i.startTime&&e<=i.endTime)t.push(i);else if(e<i.startTime)break}return t}}),(t.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()}),(t.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),(this.parser=null)),this.activeRenderer&&(this.activeRenderer.dispose(),(this.activeRenderer=null)),(this.trackConfigs=null),(this.hasUserTracks=!1),(this.vttText={}),(this.prevPosition=null),(this._enabled=!1),(this._isShow=!1)}),n(e,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return(this.activeRenderer.type===s.VttBasicRenderer.RENDER_TYPE_CUSTOM)}},{key:"activeTrackConfig",get:function(){var e;return null==(e=this.trackConfigs)?void 0:e.find(function(e){return e._isActive})},set:function(t){this.trackConfigs.forEach(function(e){return(e._isActive=e.language===t)})}}]),e)})(),h=(function(){function e(){(this.value=!1),(this.timer=null)}return((e.prototype.sleep=function(e){var t=this;this.timer&&clearTimeout(this.timer),(this.value=!0),(this.timer=setTimeout(function(){t.value=!1},e))}),n(e,[{key:"isSleep",get:function(){return this.value}}]),e)})();t.exports=e},{"../../lib/event":33,"../../lib/ua":49,"../../player/base/event/eventtype":70,"../../ui/component/util":159,"./vtt-loader":58,"./vtt-parser":59,"./vtt-renderer":60}],57:[function(e,t,r){function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function n(e,t){(e.prototype=Object.create(t.prototype)),o((e.prototype.constructor=e),t)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return(e.__proto__=t),e})(e,t)}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];(i.enumerable=i.enumerable||!1),(i.configurable=!0),"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1})}var l=e("../../lib/data"),c={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},u={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},e=(function(r){function e(e){var e=i({},(e=void 0===e?{}:e),{kind:e.kind||u.SUBTITLES,language:e.language||e.srclang||""}),t=e.mode||c.DISABLED;e.default;return(-1<[u.METADATA,u.CHAPTERS].indexOf(e.kind)&&(t=c.HIDDEN),(e.mode=t),((t=r.call(this,e)||this)._cues=[]),(t._activeCues=[]),(t._settings={}),(t._nativeTrack=null),(t._extData={}),(t._settings=e),t)}n(e,r);var t=e.prototype;return((t.setExtData=function(e){this._extData=i({},this._extData,(e=void 0===e?{}:e))}),(t.addCue=function(e){this._cues.push(e),this.nativeTrack&&this.nativeTrack.addCue(e)}),(t.removeCue=function(t){(this._cues=this._cues.filter(function(e){return e!==t})),this.nativeTrack&&this.nativeTrack.removeCue(t)}),s(e,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(e){(this._settings.mode=e),this.nativeTrack&&(this.nativeTrack.mode=e)}},{key:"language",get:function(){return this._settings.language},set:function(e){(this._settings.language=e),this.nativeTrack&&(this.nativeTrack.language=e)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(e){this._nativeTrack=e}}]),e)})((function(){function e(e){(this._id=(e=void 0===e?{}:e).id||"prism-track-"+l.guid()),(this._kind=e.kind||""),(this._language=e.language||""),(this._label=e.label||"")}return(s(e,[{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}]),e)})()),p=(function(e){function t(){return e.call(this)||this}return n(t,e),t})((function(){function e(){this._trackList=[]}return((e.prototype.addTrack=function(e){var t=this.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this._trackList[t]}}),-1===this._trackList.indexOf(e)&&this._trackList.push(e)}),s(e,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}]),e)})());(t.exports.TextTrack=e),(t.exports.TextTrackList=p),(t.exports.TRACK_MODE=c),(t.exports.TRACK_KIND=u)},{"../../lib/data":30}],58:[function(e,t,r){var i=e("../io");t.exports=(function(){function e(){}return((e.prototype.loadFromUrl=function(e,t){i.get(e,function(e){t(e)},function(e,t){console.log("ERR",e,t)})}),e)})()},{"../io":40}],59:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];(i.enumerable=i.enumerable||!1),(i.configurable=!0),"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=e("./vttjs").WebVTT,e=(function(){function e(){var t=this;(this._cues=[]),(this._regions=[]),(this.parser=new o.Parser(window,o.StringDecoder())),(this.parser.onregion=function(e){t._regions.push(e)}),(this.parser.oncue=function(e){t._cues.push(e)}),(this.parser.onflush=function(){}),(this.parser.onparsingerror=function(e){console.log("onparsingerror",e)})}var t,r,i=e.prototype;return((i.parse=function(e){this.parser.parse(e),this.parser.flush()}),(i.reset=function(){this.parser.flush(),(this._cues=[]),(this._regions=[])}),(i.dispose=function(){this.parser.flush(),(this.parser=null),(this._cues=[]),(this._regions=[])}),(i=e),(t=[{key:"cues",get:function(){return this._cues}}])&&n(i.prototype,t),r&&n(i,r),Object.defineProperty(i,"prototype",{writable:!1}),e)})();t.exports=e},{"./vttjs":61}],60:[function(e,t,r){function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];(i.enumerable=i.enumerable||!1),(i.configurable=!0),"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function a(e,t){(e.prototype=Object.create(t.prototype)),n((e.prototype.constructor=e),t)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return(e.__proto__=t),e})(e,t)}e("../../player/base/event/eventtype");var s=e("./text-track"),l=e("./vttjs").WebVTT,c=e("../../lib/dom"),u=s.TextTrack,p=s.TextTrackList,d=s.TRACK_MODE,h=(s.TRACK_KIND,(function(){function e(e){(this.player=null),(this.type=null),(this.trackList=null),(this.overrideStyle={}),(this.player=(e=e||{}).player),this.defineTextTrackGetter(),(this.trackList=new p())}var t=e.prototype;return((t.log=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=console).log.apply(e,["[LOG:"+this.type+"]"].concat(r))}),(t.defineTextTrackGetter=function(){var e=this;this.player.getTextTracks=function(){return e.trackList||[]}}),(t.show=function(e){e=this.findTrackByLanguage(e);e&&(e.mode=d.SHOWING)}),(t.findTrackByLanguage=function(t){return this.trackList.list.find(function(e){return e.language===t})}),(t.clearCurrentCues=function(e){if(e){var t=e.mode;if((t===d.DISABLED&&(e.mode=d.HIDDEN),e.cues))for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);t===d.DISABLED&&(e.mode=t)}}),(t.addTrack=function(){}),(t.addCues=function(){}),(t.restore=function(){}),(t.renderCues=function(){}),(t.updateCuesStyle=function(){}),(t.clearTrack=function(e){this.clearCurrentCues(this.findTrackByLanguage(e))}),(t.clearAllTracks=function(){var t=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(e){(e.mode=d.DISABLED),t.clearCurrentCues(e)}),(this.trackList=new p())}),(t.reset=function(){this.hide(),this.clearAllTracks()}),(t.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),(this.player=null),(this.type=null)}),e)})()),e=((h.RENDER_TYPE_CUSTOM="CUSTOM"),(h.RENDER_TYPE_NATIVE="NATIVE"),(function(r){function e(e){var t=r.call(this,e)||this;return((t.overlayId=null),(t.currentCues=null),(e=e||{}),(t.type=h.RENDER_TYPE_CUSTOM),(t.overlayId=e.overlayId),t)}a(e,r);var t=e.prototype;return((t.addTrack=function(e){var t=new u({kind:e.kind,label:e.label,language:e.language});(t.mode=e.default?d.SHOWING:d.DISABLED),this.trackList.addTrack(t)}),(t.hide=function(){return l.processCues(window,[],document.getElementById(this.overlayId))}),(t.restore=function(){this.currentCues&&(this.currentCues.forEach(function(e){return(e.displayState=null)}),l.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))}),(t.renderCues=function(e){e&&((this.currentCues=e),this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),l.processCues(window,e,this.overlayEl),this.updateCuesStyle(e))}),(t.updateCuesStyle=function(e){var i=this;e.forEach(function(e){var t,r=e.displayState;r._styleSetDone||(r&&(r.setAttribute("class","prism-cue"),i.overlayEl||(i.overlayEl=document.getElementById(i.overlayId)),(e=i.overlayEl.offsetWidth),(t=i.overlayEl.offsetHeight),(e=Math.min(e,t))&&((r.style.fontSize=0.05*e+"px"),(r.style.height="auto"),(r.style.top="auto")),Object.keys(i.overrideStyle).forEach(function(e){i.tryUpdateStyle(r,e,i.overrideStyle[e])}),(r._styleSetDone=!0)))})}),(t.updateOverrideStyle=function(e){this.overrideStyle=i({},this.overrideStyle,(e=void 0===e?{}:e))}),(t.forceUpdateCuesStyle=function(e,t){void 0===t&&(t=[]),this.updateOverrideStyle((e=void 0===e?{}:e)),this.resetCuesStyle(t)}),(t.tryUpdateStyle=function(e,t,r){try{e.style[t]=r}catch(e){}}),(t.resetCuesStyle=function(e){e&&e.length&&e.forEach(function(e){e.displayState&&(e.displayState=null)})}),(t.dispose=function(){r.prototype.dispose.call(this),(this.overlayId=null),(this.currentCues=null)}),e)})(h)),s=(function(t){function e(e){return(((e=t.call(this,(e=void 0===e?{}:e))||this).type=h.RENDER_TYPE_NATIVE),e)}a(e,t);var r,i,n=e.prototype;return((n.addTrack=function(t){var e=this.player.tag,r=Array.from(e.textTracks)||[],i=r.find(function(e){return e.language===t.language}),i=(this.log("sameLangTrack",i,r),((r=i?(this.clearCurrentCues(i),(i.kind=t.kind),(i.label=t.label),i):e.addTextTrack(t.kind,t.label,t.language)).mode=t.default?d.SHOWING:d.DISABLED),new u(t));(i.nativeTrack=r),this.trackList.addTrack(i)}),(n.addCues=function(e,t){var r;e&&e.length&&(r=this.trackList.list.find(function(e){return e.language===t}))&&e.forEach(function(e){r.addCue(e)})}),(n.hide=function(){this.trackList.list.forEach(function(e){e.mode=e.mode===d.SHOWING?d.HIDDEN:e.mode})}),(n.invalidAllTracks=function(){}),(n.forceUpdateCuesStyle=function(e,t){c.addCssByStyle("video::-webkit-media-text-track-container{transform: "+e.transform+";}")}),(n.dispose=function(){t.prototype.dispose.call(this)}),(n=e),(r=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(e){return e.mode===d.SHOWING})}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e)})(h);(t.exports.VttBasicRenderer=h),(t.exports.CustomRenderer=e),(t.exports.NativeRenderer=s)},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"./text-track":57,"./vttjs":61}],61:[function(e,t,r){t.exports={WebVTT:e("./vtt.js").WebVTT}},{"./vtt.js":62}],62:[function(e,t,r){var i=this;function o(e,t){return(void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")")}var l,p=1;function n(e,t,r){switch(r){case"webvtt.font.color":case"webvtt.font.opacity":var i=Services.prefs.getCharPref("webvtt.font.color"),n=Services.prefs.getIntPref("webvtt.font.opacity")/100;l.fontSet=o(i,n);break;case"webvtt.font.scale":p=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":(i=Services.prefs.getCharPref("webvtt.bg.color")),(n=Services.prefs.getIntPref("webvtt.bg.opacity")/100);l.backgroundSet=o(i,n);break;case"webvtt.edge.color":case"webvtt.edge.type":(i=Services.prefs.getIntPref("webvtt.edge.type")),(n=Services.prefs.getCharPref("webvtt.edge.color"));l.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][i]+o(n)}}"undefined"!=typeof Services&&((l={}),["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(e){n(0,0,e),Services.prefs.addObserver(e,n,!1)}));var a=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return(s.prototype=e),new s()};function s(){}function c(e,t){(this.name="ParsingError"),(this.code=e.code),(this.message=t||e.message)}function h(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}e=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function u(){this.values=a(null)}function d(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}(((c.prototype=a(Error.prototype)).constructor=c).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}}),(u.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return(!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0))}});var f={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\xa0"},y={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},_={v:"title",lang:"lang"},g={rt:"ruby"};function v(e,t){function r(e){return f[e]}for(var i,n,o,a,s,l,c,u=e.document.createElement("div"),p=u,d=[];null!==((c=void 0),(c=t?((c=(c=t.match(/^([^<]*)(<[^>]+>?)?/))[1]||c[2]),(t=t.substr(c.length)),c):null));)"<"===c[0]?"/"===c[1]?d.length&&d[d.length-1]===c.substr(2).replace(">","")&&(d.pop(),(p=p.parentNode)):(o=h(c.substr(1,c.length-2)))?((i=e.document.createProcessingInstruction("timestamp",o)),p.appendChild(i)):(n=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&((o=n[1]),(a=n[3]),(l=s=void 0),(l=y[o]),(i=l?(((s=e.document.createElement(l)).localName=l),(l=_[o])&&a&&(s[l]=a.trim()),s):null))&&((o=p),(g[(l=i).localName]&&g[l.localName]!==o.localName)||(n[2]&&(i.className=n[2].substr(1).replace("."," ")),d.push(n[1]),p.appendChild(i),(p=i))):p.appendChild(e.document.createTextNode((function(e){for(;(n=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/));)e=e.replace(n[0],r);return e})(c)));return u}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function S(e){var t=[],r="";if(e&&e.childNodes)for(o(t,e);(r=(function e(t){var r,i,n;return t&&t.length?(i=(r=t.pop()).textContent||r.innerText)?(n=i.match(/^.*(\n|\r)/))?n[(t.length=0)]:i:"ruby"===r.tagName?e(t):r.childNodes?(o(t,r),e(t)):void 0:null})(t));)for(var i=0;i<r.length;i++)if((function(e){for(var t=0;t<m.length;t++){var r=m[t];if(e>=r[0]&&e<=r[1])return 1}})(r.charCodeAt(i)))return"rtl";return"ltr";function o(e,t){for(var r=t.childNodes.length-1;0<=r;r--)e.push(t.childNodes[r])}}function b(){}function T(e,t,r){var i="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),n="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)",a="",n=(void 0!==l&&((n=l.fontSet),(o=l.backgroundSet),(a=l.edgeSet)),i&&((n="rgb(255, 255, 255)"),(o="rgb(0, 0, 0)")),b.call(this),(this.cue=t),(this.cueDiv=v(e,t.text)),{color:n,backgroundColor:o,textShadow:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),s=(i||((n.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl"),(n.unicodeBidi="plaintext")),this.applyStyles(n,this.cueDiv),(this.div=e.document.createElement("div")),(n={textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"}),i||((n.direction=S(this.cueDiv)),(n.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"plaintext")),this.applyStyles(n),this.div.appendChild(this.cueDiv),0);switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),(this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})})}function E(e){var t,r,i,n,o="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);e.div&&((t=e.div.offsetHeight),(r=e.div.offsetWidth),(i=e.div.offsetTop),(n=(n=(n=e.div.childNodes)&&n[0])&&n.getClientRects&&n.getClientRects()),(e=e.div.getBoundingClientRect()),(n=n?Math.max((n[0]&&n[0].height)||0,e.height/n.length):0)),(this.left=e.left),(this.right=e.right),(this.top=e.top||i),(this.height=e.height||t),(this.bottom=e.bottom||i+(e.height||t)),(this.width=e.width||r),(this.lineHeight=void 0!==n?n:e.lineHeight),o&&!this.lineHeight&&(this.lineHeight=13)}function w(e,t,s,l){var r,i=new E(t),n=t.cue,o=(function(e){if("number"==typeof e.line&&(e.snapToLines||(0<=e.line&&e.line<=100)))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,i=0,n=0;n<r.length&&r[n]!==t;n++)"showing"===r[n].mode&&i++;return-1*++i})(n),a=[];if(n.snapToLines){switch(n.vertical){case"":(a=["+y","-y"]),(r="height");break;case"rl":(a=["+x","-x"]),(r="width");break;case"lr":(a=["-x","+x"]),(r="width")}var c=i.lineHeight,u=c*Math.round(o),p=s[r]+c,d=a[0];Math.abs(u)>p&&((u=u<0?-1:1),(u*=Math.ceil(p/c)*c)),o<0&&((u+=""===n.vertical?s.height:s.width),(a=a.reverse())),i.move(d,u)}else{var h=(i.lineHeight/s.height)*100;switch(n.lineAlign){case"middle":o-=h/2;break;case"end":o-=h}switch(n.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}(a=["+y","-x","+x","-y"]),(i=new E(t))}p=(function(e,t){for(var r,i=new E(e),n=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(s,t[o])||(e.within(s)&&e.overlapsAny(l));)e.move(t[o]);if(e.within(s))return e;var a=e.intersectPercentage(s);a<n&&((r=new E(e)),(n=a)),(e=new E(i))}return r||i})(i,a);t.move(p.toCSSCompatValues(s))}function x(){}(b.prototype.applyStyles=function(e,t){for(var r in((t=t||this.div),e))e.hasOwnProperty(r)&&(t.style[r]=e[r])}),(b.prototype.formatStyle=function(e,t){return 0===e?0:e+t}),((T.prototype=a(b.prototype)).constructor=T),(E.prototype.move=function(e,t){switch(((t=void 0!==t?t:this.lineHeight),e)){case"+x":(this.left+=t),(this.right+=t);break;case"-x":(this.left-=t),(this.right-=t);break;case"+y":(this.top+=t),(this.bottom+=t);break;case"-y":(this.top-=t),(this.bottom-=t)}}),(E.prototype.overlaps=function(e){return(this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top)}),(E.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1}),(E.prototype.within=function(e){return(this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right)}),(E.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}}),(E.prototype.intersectPercentage=function(e){return((Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top)))/(this.height*this.width))}),(E.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}}),(E.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||r}}),(x.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}),(x.convertCueToDOMTree=function(e,t){return e&&t?v(e,t):null}),(x.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(((i.style.position="absolute"),(i.style.left="0"),(i.style.right="0"),(i.style.top="0"),(i.style.bottom="0"),(i.style.margin="1.5%"),r.appendChild(i),(function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1})(t)))for(var n,o,a=[],s=E.getSimpleBoxPosition(i),l={font:(Math.round(0.05*s.height*100)/100)*p+"px sans-serif"},c=0;c<t.length;c++)(o=t[c]),(n=new T(e,o,l)),i.appendChild(n.div),w(0,n,s,a),(o.displayState=n.div),a.push(E.getSimpleBoxPosition(n));else for(var u=0;u<t.length;u++)i.appendChild(t[u].displayState)}),((x.Parser=function(e,t){(this.window=e),(this.state="INITIAL"),(this.buffer=""),(this.decoder=t||new TextDecoder("utf8")),(this.regionList=[])}).prototype={reportOrThrowError:function(e){if(!(e instanceof c))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var i=this;function t(){for(var e=i.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return("\r"===e[t]&&++t,"\n"===e[t]&&++t,(i.buffer=e.substr(t)),r)}function r(e){d(e,function(e,t){var n;"Region"===e&&((e=t),(n=new u()),d(e,function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r,i=t.split(",");2===i.length&&((r=new u()).percent("x",i[0]),r.percent("y",i[1]),r.has("x")&&r.has("y"))&&(n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y")));break;case"scroll":n.alt(e,t,["up"])}},/=/,/\s/),n.has("id"))&&(((e=new i.window.VTTRegion()).width=n.get("width",100)),(e.lines=n.get("lines",3)),(e.regionAnchorX=n.get("regionanchorX",0)),(e.regionAnchorY=n.get("regionanchorY",100)),(e.viewportAnchorX=n.get("viewportanchorX",0)),(e.viewportAnchorY=n.get("viewportanchorY",100)),(e.scroll=n.get("scroll","")),i.onregion&&i.onregion(e),i.regionList.push({id:n.get("id"),region:e}))},/:/)}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var n,o=(n=t()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new c(c.Errors.BadSignature);i.state="HEADER"}for(var a=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch((a?(a=!1):(n=t()),i.state)){case"HEADER":/:/.test(n)?r(n):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(((i.cue=new i.window.VTTCue(0,0,"")),(i.state="CUE"),-1===n.indexOf("--\x3e"))){i.cue.id=n;continue}case"CUE":try{!(function(t,e,o){var r,a,i=t;function n(){var e=h(t);if(null===e)throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+i);return(t=t.replace(/^[^\sa-zA-Z-]+/,"")),e}function s(){t=t.replace(/^\s+/,"")}if((s(),(e.startTime=n()),s(),"--\x3e"!==t.substr(0,3)))throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);(t=t.substr(3)),s(),(e.endTime=n()),s(),(r=t),(e=e),(a=new u()),d(r,function(e,t){switch(e){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===t){a.set(e,o[r].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),n=i[0];a.integer(e,n),a.percent(e,n)&&a.set("snapToLines",!1),a.alt(e,n,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":(i=t.split(",")),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),(e.region=a.get("region",null)),(e.vertical=a.get("vertical","")),(e.line=a.get("line","auto")),(e.lineAlign=a.get("lineAlign","start")),(e.snapToLines=a.get("snapToLines",!0)),(e.size=a.get("size",100)),(e.align=a.get("align","middle")),(e.position=a.get("position","auto")),(e.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},e.align))})(n,i.cue,i.regionList)}catch(e){i.reportOrThrowError(e),(i.cue=null),(i.state="BADCUE");continue}i.state="CUETEXT";continue;case"CUETEXT":var s=-1!==n.indexOf("--\x3e");if(!n||(s&&(a=!0))){i.oncue&&i.oncue(i.cue),(i.cue=null),(i.state="ID");continue}i.cue.text&&(i.cue.text+="\n"),(i.cue.text+=n);continue;case"BADCUE":n||(i.state="ID");continue}}}catch(e){i.reportOrThrowError(e),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),(i.cue=null),(i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE")}return this},flush:function(){var t=this;try{if(((t.buffer+=t.decoder.decode()),(!t.cue&&"HEADER"!==t.state)||((t.buffer+="\n\n"),t.parse()),"INITIAL"===t.state))throw new c(c.Errors.BadSignature);}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}}),(i.WebVTT=x)},{}],63:[function(e,t,r){var n=e("../lib/io");e("../lib/storage");function i(e){(this._uploadDuration=e.logDuration||5),(this._uploadCount=e.logCount||10),(this._logReportTo=e.logReportTo),(this._logs=[]),(this._retry=0),(this._disposed=!1),(this._supportLocalStorage=!0);var t,n=this;window&&(window.onbeforeunload=function(e){if(0<n._logs.length)if(n._supportLocalStorage)localStorage.setItem("__aliplayer_log_data",JSON.stringify(n._logs));else{n._report();for(var t=500,r=new Date().getTime(),i=r;i<r+t;)i=new Date().getTime()}});try{localStorage?((t=localStorage.getItem("__aliplayer_log_data")),localStorage.removeItem("__aliplayer_log_data"),t&&(this._logs=JSON.parse(t))):(this._supportLocalStorage=!1)}catch(e){this._supportLocalStorage=!1}this._start()}(i.prototype.add=function(e){var t=this._logs.length;if(((e.__time__=Math.round(new Date()/1e3)),0<t&&"4001"==e.e)){t=this._logs[t-1];if("4001"==t.e&&t.__time__-e.__time__<5)return}this._logs.push(e),(this._logs.length>this._uploadCount||"4001"==e.e||"2002"==e.e)&&this._report()}),(i.prototype.dispose=function(){this._report(),(this._disposed=!0)}),(i.prototype._start=function(){this._disposed=!1;(this._retry=0),this._report()}),(i.prototype._report=function(t){var e,r,i;this._tickHandler&&(clearTimeout(this._tickHandler),(this._tickHandler=null)),0<(t=t||this._logs.splice(0,this._uploadCount)).length?((i={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(e=JSON.stringify({__logs__:t,__source__:""})).length}),n.postWithHeader((r=this)._logReportTo,e,i,function(e){r._tick()},function(e){0==r._retry?((r._retry=1),r._report(t)):r._tick()})):this._tick()}),(i.prototype._tick=function(){var e;this._disposed||((this._retry=0),(e=this)._logs.length>this._uploadCount?e._report():(this._tickHandler=setTimeout(function(){e._report()},1e3*this._uploadDuration)))}),(t.exports=i)},{"../lib/io":40,"../lib/storage":48}],64:[function(e,t,r){function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var i,n=e("../lib/oo"),s=e("../lib/object"),y=e("../lib/data"),l=e("../lib/io"),_=e("../lib/ua"),g=e("../config"),o=e("../player/base/event/eventtype"),v=e("./util"),m=e("./log"),c=0,u={STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},e=n.extend({init:function(e,t,r){(this.trackLog=r=void 0===r?!0:r),(this.player=e),(this.requestId=""),(this.sessionId=y.guid()),(this.playId=0),(this.firstPlay=!0),(this.osName=_.os.name),(this.osVersion=_.os.version||""),(this.exName=_.browser.name),(this.exVersion=_.browser.version||""),(this.lightSaasVideoId=""),(this._logService=""),(this._h265ProbeCost={}),(this.startPlayReported=!1),(this.canplayReported=!1),(this.seekingData={seekingStartTime:0}),(this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0}),t.logBatched&&(this._logService=new m(g));var r=this.player.getOptions(),e=t.from||"",t=(r.isLive,r.isLive?"live":"vod"),i="pc",n=(_.IS_IPAD?(i="pad"):_.os.phone&&(i="phone"),this.encodeURL(_.getReferer())),o=_.getHref(),a=this.encodeURL(o),s="",o=(o&&(s=_.getHost(o)),g.h5Version),l=v.getUuid(),c=r.source?this.encodeURL(r.source):"",u=_.getHost(r.source),p=r.userId?r.userId+"":"0",d=this.sessionId,h=new Date().getTime(),f=r.traceId||"";this._userNetInfo={cdnIp:"",localIp:""};(this.opt={APIVersion:"0.6.0",t:h,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:_.USER_AGENT,hn:"0.0.0.0",bi:e,ri:d,e:"0",args:"0",li_ki:r.license.key||"",vt:t,tt:i,dm:"h5",av:o,uuid:l,vu:c,vd:u,ua:p,dn:"custom",cdn_ip:"0.0.0.0",app_n:s,r:n,pu:a,ti:f}),this.bindEvent()},updateVideoInfo:function(e){e=e.from||"";(this.opt.bi=e+""),this.updateSourceInfo()},updateSourceInfo:function(){var e,t=this.player.getOptions();t&&((e=t.source?this.encodeURL(t.source):""),(t=_.getHost(t.source)),(this.opt.vu=e),(this.opt.vd=t))},updateTraceId:function(e){this.opt.ti=e},updateLightSaasVideoId:function(e){this.lightSaasVideoId=e},replay:function(){this.reset(),this.player.trigger(o.Video.LoadStart),this.player.trigger(o.Video.LoadedMetadata),this.player.trigger(o.Video.LoadedData)},bindEvent:function(){var r=this;this.player.on(o.Player.Init,function(){r._onPlayerInit()}),this.player.on(o.Video.LoadStart,function(){r._onPlayerloadstart()}),this.player.on(o.Video.LoadedMetadata,function(){r._onPlayerLoadMetadata()}),this.player.on(o.Video.LoadedData,function(){r._onPlayerLoaddata()}),this.player.on(o.Player.H265PlayInfo,function(e){r._onPlayerH265PlayInfo(e)}),this.player.on(o.Video.Play,function(){r._onPlayerPlay()}),this.player.on(o.Video.Playing,function(){r._onPlayerReady()}),this.player.on(o.Video.Ended,function(){r._onPlayerFinish()}),this.player.on(o.Video.Pause,function(){r._onPlayerPause()}),this.player.on("seeking",function(){r._onPlayerSeeking()}),this.player.on("seeked",function(){r._onPlayerSeeked()}),this.player.on(o.Private.LicenseHasResult,function(e){r._onLicenseHasResult(e)}),this.player.on(o.Private.SeekStart,function(e){r._onPlayerSeekStart(e)}),this.player.on(o.Private.EndStart,function(e){r._seekEndData=e.paramData}),this.player.on(o.Player.Waiting,function(){r._onPlayerLoaded()}),this.player.on(o.Video.CanPlayThrough,function(){}),this.player.on(o.Video.CanPlay,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),(r._waitingDelayLoadingShowHandle=null)),r._onPlayerUnderload(),r._onPlayerCanplay()}),this.player.on(o.Video.TimeUpdate,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),(r._waitingDelayLoadingShowHandle=null)),r._seekEndData&&r.player._seeking&&r._onPlayerSeekEnd()}),this.player.on(o.Player.Error,function(){r._onPlayerError()}),this.player.on(o.Player.RequestFullScreen,function(){r._onFullscreenChange(1)}),this.player.on(o.Player.CancelFullScreen,function(){r._onFullscreenChange(0)}),this.player.on(o.Private.PREPARE,function(e){(r._prepareTime=new Date().getTime()),r._log("PREPARE",{dn:e.paramData})}),this.player.on(o.Player.Snapshoted,function(){r._log("SNAPSHOT")}),this.player.on(o.Private.Retry,function(e){e=e.paramData||{};r._log("RETRY",{type:e.type,source:e.source})}),this.player.on(o.Player.RtsFallback,function(e){var t,e=e.paramData||{};r._log("RTSFALLBACK",{reason:null==(t=e.reason)?void 0:t.error_msg,url:e.fallbackUrl})}),this.startHeartBeat.call(this)},removeEvent:function(){this.player.off("init"),this.player.off("ready"),this.player.off("ended"),this.player.off("play"),this.player.off("pause"),this.player.off("seekStart"),this.player.off("seekEnd"),this.player.off("canplaythrough"),this.player.off("playing"),this.player.off("timeupdate"),this.player.off("error"),this.player.off("fullscreenchange"),this.player.off("seeking"),this.player.off("seeked"),this.player.off(o.Private.PREPARE),this.player.off(o.Player.RtsFallback),this._logService&&this._logService.dispose(),clearInterval(i)},reset:function(){(this.stucking=!1),(this.startTimePlay=0),(this.buffer_flag=0),(this.firstPlay=!1),(this.playId=0),(this._LoadedData=0),(this._canPlay=0),(this.seekingStartTime=0),(this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0}),(c=0),(this.lightSaasVideoId="")},encodeURL:function(e){var t;return e?(t=this.player.getOptions())&&!t.logBatched?encodeURIComponent(e):e:""},startHeartBeat:function(){var o=this;i&&clearInterval(i),(i=setInterval(function(){var n;o.player.getCurrentTime()&&((n=Math.floor(1e3*o.player.getCurrentTime())),o.player.paused()?(o.prevStats.timestamp=0):++c>=o.player._options.heartHeatInterval&&o.updateStats.call(o,function(e){var t=o._imageInfo()||{},r=o.player.tag.playbackRate,i=o.player.getVolume(),t={vt:n,interval:1e3*c,imgLength:t.imgLength,playbackRate:r,volume:i};e&&(t=a({},t,{dls:Math.floor(e.downloadSpeedPerSec),dfps:Math.floor(e.decodedFramesPerSec),pkl:Number((e.packageLossRate||0).toFixed(2)),rtt:1e3*e.rtt})),o._log("HEARTBEAT",t),(c=0)}))},1e3))},updateStats:function(o){o=o||function(){};var a=this;this.player.getStats().then(function(e){var t,r,i,n;e?((n=a.prevStats),(e.bytesReceived=e.bytesReceived||0),(e.framesDecoded=e.framesDecoded||0),(e.packetsLost=e.packetsLost||0),(e.packetsReceived=e.packetsReceived||0),(t=((a.prevStats=e).timestamp-n.timestamp)/1e3),(r=(e.bytesReceived-n.bytesReceived)/t),(i=(e.framesDecoded-n.framesDecoded)/t),(n=(e.packetsLost-n.packetsLost)/(e.packetsLost-n.packetsLost+(e.packetsReceived-n.packetsReceived))),(e=e.rtt),o({downloadSpeedPerSec:r,decodedFramesPerSec:i,packageLossRate:n,rtt:e,timeGap:t})):o()}).catch(function(e){console.log("error in monitor getStats: ",e),o()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:new Date().getTime()}),(this.startPlayReported=!0))},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:new Date().getTime()}),(this.canplayReported=!0))},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetSessionId:function(){this.sessionId=y.guid()},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId())},updateH265ProbeCost:function(e){this._h265ProbeCost=e||{}},_onFullscreenChange:function(e){e?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onPlayerloadstart:function(){(this.loadstartTime=new Date().getTime()),(this.playId=y.guid())},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=new Date().getTime()-this.loadstartTime},_onPlayerLoaddata:function(){var e,t,r,i;this._LoadedData||this.buffer_flag||((t=e=0),this.player.tag&&((e=this.player.tag.videoWidth),(t=this.player.tag.videoHeight)),(e={tc:new Date().getTime()-this._prepareTime,cc:new Date().getTime()-this.loadstartTime,md:this.loadMetaDataCost,mi:JSON.stringify({type:"video",definition:e+"*"+t})}),null!=(t=this.player.tag)&&t.duration&&(e.vdur=1e3*(null==(t=this.player.tag)?void 0:t.duration)),(5<this._h265ProbeCost.codecCost||5<this._h265ProbeCost.decoderCost)&&((t=Math.floor(this._h265ProbeCost.codecCost)||0),(r=Math.floor(this._h265ProbeCost.decoderCost)||0),(e.tc+=i=t+r),(e.cc+=i),(e.pcc=t),(e.pdc=r)),this._log("PREPAREEND",e)),(this._LoadedData=1)},_onPlayerH265PlayInfo:function(e){e=e.paramData||{};this._log("HEVCINFO",{cd:e.codecTag,rd:e.renderType,si:e.simd,sio:e.simdOption,wt:e.wasmThreads,wto:e.wasmThreadsOption,sp:e.splayer})},_onPlayerCanplay:function(){(this._canPlay=1),this.reportCanplay(),this._reportPlay(),this.prevStats.timestamp||this.updateStats.call(this)},_onPlayerInit:function(){(this.stucking=!1),(this.buffer_flag=0),(this.pause_flag=0),(this.startTimePlay=0),(this._LoadedData=0),(this._canPlay=0),(this.seekingStartTime=0)},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=new Date().getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_reportPlay:function(){var e;return!(this.buffer_flag||!this._LoadedData||!this.playstartTime||((this.first_play_time=new Date().getTime()),(e={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime}),this._log("PLAY",e),(this.buffer_flag=1),0))},_onPlayerPlay:function(){(this.playstartTime=new Date().getTime()),0==this.playId&&(this.playId=y.guid()),this.player._isPreload()||(this.loadstartTime=new Date().getTime()),(this._canPlay&&this._reportPlay())||(this.buffer_flag&&this.pause_flag&&((this.pause_flag=0),(this.pauseEndTime=new Date().getTime()),this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.pauseEndTime-this.pauseTime})))},_onPlayerPause:function(){!this.buffer_flag||(this.startTimePlay&&!this.player._seeking&&((this.pause_flag=1),(this.pauseTime=new Date().getTime()),this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())})))},_onLicenseHasResult:function(e){e=e.paramData||{};this._log("LICENSE_RESULT",{li_ri:e.result,li_ti:e.featureId||"sdk"})},_onPlayerSeekStart:function(e){(this.seekStartTime=e.paramData.fromTime),(this.startTimePlay=0),(this.seekStartStamp=new Date().getTime())},_onPlayerSeekEnd:function(){(this.seekEndStamp=new Date().getTime()),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),(this._seekEndData=null)},_onPlayerLoaded:function(){var e,t=this;this.buffer_flag&&!this.stucking&&(this.player._seeking?((this.seekingStartTime=this.player.getCurrentTime()),setTimeout(function(){var e=t.player.readyState()<4;t.player.readyState()||(e=!0),t.player.getCurrentTime()===t.seekingStartTime&&e&&((e=t._getbwEstimator()),t._log("UNDERLOAD",{vt:Math.floor(1e3*t.player.getCurrentTime()),bw:e}),(t.stucking=!0),(t.stuckStartTime=new Date().getTime()))},500)):((this.stuckStartTime=new Date().getTime()),this.stuckStartTime-this.startTimePlay<=1e3||((this.stucking=!0),(e=this._getbwEstimator()),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:e}),(this.stuckStartTime=new Date().getTime()))))},_onPlayerUnderload:function(){var e,t,r;(!this.buffer_flag&&this.player._options&&this.player._options.autoplay)||(this.stucking&&((e=Math.floor(1e3*this.player.getCurrentTime())),(t=this.stuckStartTime||new Date().getTime()),0<(t=Math.floor(new Date().getTime()-t))&&t<(1e3*this.player._options.waitingTimeout||6e4)&&((r=this._getbwEstimator()),this._log("LOADED",{vt:e,cost:t,bw:r,cbs:this.seekStart?1:0})),(this.seekStart=!1),(this.stucking=!1)))},_onPlayerSeeking:function(){(this.seekStart=!0),(this.seekingData.seekingStartTime=performance.now())},_onPlayerSeeked:function(){var e=this;this.player._splayer?this.player.one("canplay",function(){e._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var e=performance.now(),e=Math.floor(e-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:e})},_onPlayerError:function(){(this.playId=0),(this._LoadedData=1),this.buffer_flag||this._reportPlay(),this.player.getOptions().autoplay&&this.reportStartPlay()},_getbwEstimator:function(){var e=NaN;try{e=this.player._getbwEstimator&&this.player._getbwEstimator()}catch(e){}return e},_log:function(e,t){if(this.trackLog){this.updateSourceInfo();var r,i=s.copy(this.opt),n=((this.requestId=y.guid()),g.logReportTo),e=((i.e=u[e]+""),(i.ri=this.sessionId),(i.bi=i.bi&&String(i.bi)),(i.t=new Date().getTime()+""),(i.cdn_ip=this._userNetInfo.cdnIp),(i.hn=this._userNetInfo.localIp),this.player.getCurrentQuality()),o=(""!=e&&(i.definition=e.definition),[]),e=(s.each(t,function(e,t){if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){}o.push(e+"="+t)}),""),t=this.player.getOptions(),e=(((t&&t.vid)||this.lightSaasVideoId)&&(e=t.vid||this.lightSaasVideoId),o.push("vid="+e),"");(e=t&&t.mediaAuth?t.mediaAuth:e)&&o.push("pauth="+e);try{Aliplayer&&Aliplayer.__logCallback__&&((i.args=o),Aliplayer.__logCallback__(i))}catch(e){console.log(e)}return(""==(o=o.join("&"))&&(o="0"),(i.args=this.encodeURL(o)),this._logService?this._logService.add(i):((r=[]),s.each(i,function(e,t){r.push(e+"="+t)}),(r=r.join("&")),l.jsonp(n+"?"+r,function(){},function(){})),this.sessionId)}},_imageInfo:function(){try{var e,t,r,i,n,o,a;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(e=this.player.tag)?((t=document.createElement("canvas")),(r=e.videoWidth),(i=e.videoHeight),(t.width=r),(t.height=i),(n=t.getContext("2d")).save(),n.drawImage(e,0,0,r,i),n.restore(),(o=t.toDataURL("image/jpeg",1)),(a=""),{imgLength:(a=o?(a=o.substr(o.indexOf(",")+1))||"":a).length}):{}}catch(e){return{}}}});t.exports=e},{"../config":14,"../lib/data":30,"../lib/io":40,"../lib/object":42,"../lib/oo":43,"../lib/ua":49,"../player/base/event/eventtype":70,"./log":63,"./util":65}],65:[function(e,t,r){var i=e("../lib/cookie"),n=e("../lib/data"),o=e("../lib/ua");(t.exports.getUuid=function(){var e=i.get("p_h5_u");return e||((e=n.guid()),i.set("p_h5_u",e,730)),e}),(t.exports.getTerminalType=function(){var e="pc";return(o.IS_IPAD?(e="pad"):o.IS_ANDROID?(e="android"):o.IS_IOS&&(e="iphone"),e)}),(t.exports.returnUTCDate=function(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),e=e.getUTCMilliseconds();return Date.UTC(t,r,i,n,o,a,e)}),(t.exports.getRfc822=function(e){return e.toUTCString().replace("UTC","GMT")})},{"../lib/cookie":29,"../lib/data":30,"../lib/ua":49}],66:[function(e,t,r){var o=e("./base/player"),a=e("./flash/flashplayer"),s=e("./saas/mtsplayer"),l=e("./saas/vodplayer"),c=e("./saas/lightPlayer"),u=e("./audio/audioplayer"),p=e("./hls/hlsplayer"),d=e("./flv/flvplayer"),h=e("./rts/rtsplayer"),f=e("./drm/drmplayer"),y=e("./splayer/splayer"),_=e("../lib/ua"),g=e("../lib/playerutil"),v=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),m=e("../lib/constants"),S=e("./base/event/eventtype");t.exports.create=function(e,t){navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(e.useNativeControls=!0),(e.readyCallback=t="function"!=typeof t?function(){}:t),v.setCurrentLanguage(e.language,"h5",e.languageTexts);var r,t=g.handleOption(e),e=t.source,i=g.isAudio(e),n=(i&&(t.mediaType="audio"),g.createWrapper(t));if(n.player)return n.player;if(i)r=new u(n,t);else if(g.isRts(e))r=new h(n,t);else if((t.forceH265||t.enableH265)&&(g.isMp4(e)||g.isFlv(e)))r=new y(n,t);else if(!t.useFlashPrism&&g.isFlv(e)&&g.isSupportFlv())r=new d(n,t);else if(_.IS_MOBILE||(!t.useFlashPrism&&!g.isRTMP(e)))if(-1!==[null,void 0].indexOf(t.mediaAuth)||t.source)if(t.vid&&!t.source)if(t.authInfo)r=new s(n,t);else{if(!(t.playauth||(t.accessKeyId&&t.accessKeySecret)))throw(((i="vid="+t.vid+" playauth='', playauth property is required by VOD(\u89c6\u9891\u70b9\u64ad) as new Aliplayer."),new Error(i)));r=new l(n,t)}else g.isDash(e)&&g.isSupportMSE()?(r=new f(n,t)):g.isHls(e)?g.canPlayHls()?(r=new(g.isSupportHls()&&(g.isUsedHlsPluginOnMobile()||g.isSafariUsedHlsPlugin(t.useHlsPluginForSafari))?t.isDrm?f:p:t.isDrm?f:o)(n,t)):g.isSupportHls()?(r=new(t.isDrm?f:p)(n,t)):_.os.pc?t.userH5Prism||t.useH5Prism||(r=new a(n,t)):(r=new o(n,t)):((r=new o(n,t)),t.source||((i={error_code:m.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:v.get("Error_Empty_Source")}),r.trigger(S.Player.Error,i)));else r=new c(n,t);else r=new a(n,t);return r}},{"../lang/index":23,"../lib/constants":28,"../lib/dom":32,"../lib/io":40,"../lib/playerutil":46,"../lib/ua":49,"./audio/audioplayer":68,"./base/event/eventtype":70,"./base/player":91,"./drm/drmplayer":98,"./flash/flashplayer":99,"./flv/flvplayer":101,"./hls/hlsplayer":103,"./rts/rtsplayer":105,"./saas/lightPlayer":109,"./saas/mtsplayer":111,"./saas/vodplayer":117,"./splayer/splayer":126}],67:[function(e,t,r){var o=e("./base/player"),a=e("./flash/flashplayer"),s=e("./saas/mtsplayer"),l=e("./saas/vodplayer"),c=e("./saas/lightPlayer"),u=e("./audio/audioplayer"),p=e("./hls/hlsplayer"),d=e("./flv/flvplayer"),h=e("./rts/rtsplayer"),f=e("./drm/drmplayer"),y=e("./splayer/splayer"),_=e("../lib/ua"),g=e("../lib/playerutil"),v=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),m=e("../lib/constants"),S=e("./base/event/eventtype");t.exports.create=function(e,t){navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(e.useNativeControls=!0),(e.readyCallback=t="function"!=typeof t?function(){}:t),v.setCurrentLanguage(e.language,"h5",e.languageTexts);var r,t=g.handleOption(e),e=t.source,i=g.isAudio(e),n=(i&&(t.mediaType="audio"),g.createWrapper(t));if(n.player)return n.player;if(i)r=new u(n,t);else if(g.isRts(e))r=new h(n,t);else if((t.forceH265||t.enableH265)&&(g.isMp4(e)||g.isFlv(e)))r=new y(n,t);else if(!t.useFlashPrism&&g.isFlv(e)&&g.isSupportFlv())r=new d(n,t);else if(_.IS_MOBILE||(!t.useFlashPrism&&!g.isRTMP(e)))if(-1!==[null,void 0].indexOf(t.mediaAuth)||t.source)if(t.vid&&!t.source)if(t.authInfo)r=new s(n,t);else{if(!(t.playauth||(t.accessKeyId&&t.accessKeySecret)))throw(((i="vid="+t.vid+" playauth='', playauth property is required by VOD(\u89c6\u9891\u70b9\u64ad) as new Aliplayer."),new Error(i)));r=new l(n,t)}else g.isDash(e)&&g.isSupportMSE()?(r=new f(n,t)):g.isHls(e)?g.canPlayHls()?(r=new(g.isSupportHls()&&(g.isUsedHlsPluginOnMobile()||g.isSafariUsedHlsPlugin(t.useHlsPluginForSafari))?t.isDrm?f:p:t.isDrm?f:o)(n,t)):g.isSupportHls()?(r=new(t.isDrm?f:p)(n,t)):_.os.pc?t.userH5Prism||t.useH5Prism||(r=new a(n,t)):(r=new o(n,t)):((r=new o(n,t)),t.source||((i={error_code:m.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:v.get("Error_Empty_Source")}),r.trigger(S.Player.Error,i)));else r=new c(n,t);else r=new a(n,t);return r}},{"../lang/index":23,"../lib/constants":28,"../lib/dom":32,"../lib/io":40,"../lib/playerutil":46,"../lib/ua":49,"./audio/audioplayer":68,"./base/event/eventtype":70,"./base/player":91,"./drm/drmplayer":98,"./flash/flashplayer":99,"./flv/flvplayer":101,"./hls/hlsplayer":103,"./rts/rtsplayer":105,"./saas/lightPlayer":109,"./saas/mtsplayer":111,"./saas/vodplayer":117,"./splayer/splayer":126}],68:[function(e,t,r){var i=e("../base/player"),n=e("../../ui/component"),o=e("../../lib/dom"),a=e("../../lib/object"),s=e("../../lib/playerutil"),e=i.extend({init:function(e,t){(this._isAudio=!0),void 0===t.skinLayout&&(t.skinLayout=s.defaultAudioLayout),i.call(this,e,t)}});(e.prototype.createEl=function(){"AUDIO"!==this.tag.tagName&&((this._el=this.tag),(this.tag=n.prototype.createEl.call(this,"audio")));var t=this._el,e=this.tag,r=((e.player=this),o.getElementAttributes(e));return(a.each(r,function(e){t.setAttribute(e,r[e])}),this.setVideoAttrs(),e.parentNode&&e.parentNode.insertBefore(t,e),o.insertFirst(e,t),t)}),(t.exports=e)},{"../../lib/dom":32,"../../lib/object":42,"../../lib/playerutil":46,"../../ui/component":130,"../base/player":91}],69:[function(e,t,r){var a=e("../../../lib/event"),s=e("./eventtype"),i=e("../eventHandler/video/index"),n=e("../eventHandler/player/index");(t.exports.offAll=function(e){var t,r,i,n=e.tag,o=e._el;for(t in s.Video)a.off(n,s.Video[t]);for(r in s.Player)a.off(o,s.Player[r]);for(i in s.Private)a.off(o,s.Private[i])}),(t.exports.offVideoAll=function(e){var t,r=e.tag;for(t in s.Video)a.off(r,s.Video[t])}),(t.exports.onAll=function(e){i.bind(e),n.bind(e)})},{"../../../lib/event":33,"../eventHandler/player/index":74,"../eventHandler/video/index":84,"./eventtype":70}],70:[function(e,t,r){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",H265PlayInfo:"h265PlayInfo",H265DecoderOverload:"h265DecoderOverload"},Private:{Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch"}}},{}],71:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){(!n.IS_IOS||(n.IS_IOS&&this._splayer&&2===this._splayer.renderType))&&i.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":32,"../../../../lib/ua":49,"../../event/eventtype":70}],72:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(i.Player.CompleteSeek,e.paramData.toTime),t.one(i.Player.CanPlay,function(){t._enteredProgressMarker&&t.pause()})}},{"../../event/eventtype":70}],73:[function(e,t,r){var i=e("../../event/eventtype"),n=(e("../../../../lib/constants"),e("../../../../lang/index"),e("../../../../monitor/util"));t.exports.handle=function(e){var t=this,e=e.paramData;t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Play_Btn_Hide),t.trigger(i.Private.SettingListHide),t.trigger(i.Private.SelectorHide),t.trigger(i.Private.VolumeVisibilityChange,""),(e=e||{}),t._monitor&&((e.uuid=n.getUuid()),(e.requestId=t._serverRequestId),(e.cdnIp=t._monitor._userNetInfo.cdnIp),(e.localIp=t._monitor._userNetInfo.localIp)),(t._isError=!0),t.trigger(i.Private.Error_Show,e),t.trigger(i.Private.LifeCycleChanged,{type:i.Player.Error,data:e})}},{"../../../../lang/index":23,"../../../../lib/constants":28,"../../../../monitor/util":65,"../../event/eventtype":70}],74:[function(e,t,r){var i=e("../../event/eventtype"),o=e("../../../../lib/event"),a=e("./lifecyclecommon"),n={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error"),privateSeiFrame:e("./seiframe"),patchWaiting:e("../video/waiting")},s=[i.Private.EndStart,i.Private.SeekStart,i.Player.RequestFullScreen,i.Player.CancelFullScreen,i.Player.Error,i.Player.Ready,i.Private.Dispose,i.Private.Created,i.Private.SeiFrame,i.Private.PatchWaiting];t.exports.bind=function(e){e.el();for(var t=0;t<s.length;t++){var r=s[t];"undefined"!=n[r]&&!(function(r,i,n){var e=r.el();o.on(e,i,function(e){var t=(n&&n.handle?n:a).handle;t.call(r,e,i)})})(e,r,n[r])}}},{"../../../../lib/event":33,"../../event/eventtype":70,"../video/waiting":90,"./cancelfullscreen":71,"./endstart":72,"./error":73,"./lifecyclecommon":75,"./requestfullscreen":76,"./seekstart":77,"./seiframe":78}],75:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e,t){this.trigger(i.Private.LifeCycleChanged,{type:t,data:e})}},{"../../event/eventtype":70}],76:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){(!n.IS_IOS||(n.IS_IOS&&this._splayer&&2===this._splayer.renderType))&&i.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":32,"../../../../lib/ua":49,"../../event/eventtype":70}],77:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){(this._seeking=!0),this.trigger(i.Player.StartSeek,e.paramData.fromTime)}},{"../../event/eventtype":70}],78:[function(e,t,r){e("../../event/eventtype");t.exports.handle=function(e){var t,r,e=e.paramData,i=e.pts;this._hls&&((t=e.pts),(r=this._initPTS),(i=parseInt((t-r)/90,10))),(this._seis[i]=e.dataContent)}},{"../../event/eventtype":70}],79:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this,r=((t._retrySwitchUrlCount=0),(t._liveRetryCount=0),t._clearLiveErrorHandle(),new Date().getTime()-t.readyTime);t._options.autoplay||t._options._autoplay||!t.paused()||(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Play_Btn_Show)),t.trigger(i.Player.CanPlay,{loadtime:r})}},{"../../event/eventtype":70}],80:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/dom"),o=e("../../../../lib/ua");t.exports.handle=function(e){this._seeking=!1;var t=this.tag;"none"===t.style.display&&o.IS_IOS&&setTimeout(function(){n.css(t,"display","block")},100),this.trigger(i.Video.CanPlayThrough)}},{"../../../../lib/dom":32,"../../../../lib/ua":49,"../../event/eventtype":70}],81:[function(e,t,r){t.exports.handle=function(e,t){var r="";e&&e.paramData&&(r=e.paramData),this.trigger(t,r)}},{}],82:[function(e,t,r){var i=e("../../event/eventtype");e("../../../../lang/index"),e("../../../../lib/event");t.exports.handle=function(e){var t=this;(t.waiting=!1),(t._ended=!0),t._monitor&&t._monitor._onPlayerInit(),t._options.rePlay?(t.seek(0),t.tag.play()):t._options.isLive&&t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Play_Btn_Show),t.trigger(i.Player.Ended)}},{"../../../../lang/index":23,"../../../../lib/event":33,"../../event/eventtype":70}],83:[function(e,t,r){var u=e("../../event/eventtype"),p=e("../../../../lib/constants"),d=e("../../../../lang/index"),h=e("../../../../lib/event"),f=e("../../../../lib/ua"),y=(e("../../../../lib/io"),e("../../../../lib/playerutil"));t.exports.handle=function(e){var t,r,i,n,o,a,s,l,c=this;(c.waiting=!1),c._clearTimeout(),c.checkOnline()&&!c._splayer&&((i=""),(t=(e=e.target||e.srcElement).error&&e.error.message),(i=""),e.error&&e.error.code&&((r=e.error.code),(i=p.VideoErrorCode[e.error.code]),(t=r+" || "+t)),c._options.isLive?((e=r),(o=function(){c._options.liveRetry>c._liveRetryCount?c._reloadAndPlayForM3u8():((c._liveRetryCount=0),c.trigger(u.Player.LiveStreamStop),(c._liveErrorHandle=setTimeout(function(){var e={mediaId:"ISLIVE",error_code:i,error_msg:d.get("Error_Play_Text")+"\uff0c"+d.get("Error_Retry_Text")};c.logError(e),c.trigger("error",e)})),f.IS_UC&&(c._liveErrorHandle=null))}),(a=(n=c)._options.source||""),4===(e=4!==e&&f.IS_IOS&&/qqbrowser/i.test(f.USER_AGENT)?4:e)&&y.isHls(a)?y.detectRegionBlock(a,function(e){e?((e={mediaId:"ISLIVE",error_code:p.ErrorCode.RegionBlock,error_msg:d.get("Error_Region_Block_Text")}),n.logError(e),n.trigger("error",e)):o()}):o()):-1<t.indexOf("NS_ERROR_DOM_MEDIA_FATAL_ERR")?((e=c.getCurrentTime()),(a=c.getDuration())-e<0.5&&(c.pause(),(c._ended=!0),(c.tag.currentTime=a),h.trigger(c.tag,u.Video.ManualEnded))):3==r?((l={mediaId:c._options.vid||"",error_code:i,error_msg:t}),c.logError(l),(l.display_msg=p.VideoErrorCodeText[r]),c.trigger(u.Player.Error,l)):c._reloadForVod()||((e=d.get("Error_Play_Text")),(s=!1),r<3?(e=p.VideoErrorCodeText[r]):c._eventState==p.SUSPEND?((e=d.get("Error_Load_Abort_Text")),(i=p.ErrorCode.RequestDataError)):c._eventState==p.LOAD_START?((e=d.get("Error_Network_Text")),0<c._options.source.indexOf("auth_key")&&(e=e+"\uff0c"+d.get("Error_AuthKey_Text")),(i=p.ErrorCode.StartLoadData)):c._eventState==p.LOADED_METADATA&&((e=d.get("Error_Play_Text")),(i=p.ErrorCode.PlayingError)),(e=e+"\uff0c"+d.get("Error_Retry_Text")),1<c._urls.length&&c._retrySwitchUrlCount<3&&-1==c._options.source.indexOf(".mpd")&&(c.switchUrl(),(s=!0)),(l={mediaId:c._options.vid||"",error_code:i,error_msg:t}),s)||(c.logError(l),(l.display_msg=e),c.trigger(u.Player.Error,l)))}},{"../../../../lang/index":23,"../../../../lib/constants":28,"../../../../lib/event":33,"../../../../lib/io":40,"../../../../lib/playerutil":46,"../../../../lib/ua":49,"../../event/eventtype":70}],84:[function(e,t,r){var n=e("../../../../lib/event"),o=e("../../event/eventtype"),i={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate"),manualended:e("./ended"),loadedmetadata:e("./loadedmetadata")};t.exports.bind=function(e){e.tag;for(var t in o.Video){t=o.Video[t];!(function(t,r,i){var e=t.tag;n.on(e,r,function(e){i.handle.call(t,e,r),r!=o.Video.Error&&(r==o.Video.ManualEnded&&(r=o.Video.Ended),t.trigger(o.Private.LifeCycleChanged,{type:r,data:e}))})})(e,t,void 0!==i[t]?i[t]:i.common)}}},{"../../../../lib/event":33,"../../event/eventtype":70,"./canplay":79,"./canplaythrough":80,"./common":81,"./ended":82,"./error":83,"./loadedmetadata":85,"./pause":86,"./play":87,"./playing":88,"./timeupdate":89,"./waiting":90}],85:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this.tag;(this._duration=t.duration<1?0:t.duration),this.trigger(i.Private.ReadyState),this._splayer&&this.trigger(i.Video.DurationChange),this.trigger(i.Video.LoadedMetadata)}},{"../../event/eventtype":70}],86:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/ua");t.exports.handle=function(e){var t=this;(t._seeking&&t._splayer)||(t._hls&&t._options&&t._options.isLive&&n.IS_FIREFOX&&t.trigger(i.Private.Play_Btn_Show),t._clearTimeout(),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Pause),t._isManualPause&&(t.trigger(i.Private.Play_Btn_Show),t.trigger(i.Private.H5_Loading_Hide)),(t.waiting=!1))}},{"../../../../lib/ua":49,"../../event/eventtype":70}],87:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this.trigger(i.Private.Error_Hide),this.trigger(i.Private.Cover_Hide),this.trigger(i.Private.AutoStreamHide),(this.waiting=!1),this.trigger(i.Player.Play)}},{"../../event/eventtype":70}],88:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this,r=(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Info_Hide),(t.waiting=!1),(t._ended=!1),(t._liveRetryCount=0),(t._vodRetryCount=0),(t._seeking=!1),t.getCurrentTime());t._waitingReloadTime!=r&&(t._waitingTimeoutCount=0),t._checkTimeoutHandle&&(clearTimeout(t._checkTimeoutHandle),(t._checkTimeoutHandle=null)),t._waitingLoadedHandle&&(clearTimeout(t._waitingLoadedHandle),(t._waitingLoadedHandle=null)),t._ucSourceHandle&&(clearTimeout(t._ucSourceHandle),(t._ucSourceHandle=null)),t._waitingDelayLoadingShowHandle&&(clearTimeout(t._waitingDelayLoadingShowHandle),(t._waitingDelayLoadingShowHandle=null)),t._waitingTimeoutHandle&&(clearTimeout(t._waitingTimeoutHandle),(t._waitingTimeoutHandle=null),t._ccService)&&t._options.isLive&&((r=t._ccService.getCurrentSubtitle()),(t._setDefaultCC=!0),r)&&t._ccService.switch(r),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Playing),t.trigger(i.Private.Error_Hide),t.tag.paused||t.trigger(i.Private.Play_Btn_Hide)}},{"../../event/eventtype":70}],89:[function(e,t,r){var p=e("../../event/eventtype"),d=e("../../../../lib/ua"),h=e("../../../../lib/event"),f=e("../../plugin/status");t.exports.handle=function(e){var t,r=this,e=(r.trigger(p.Player.TimeUpdate,e.timeStamp),(d.IS_IOS||d.IS_MAC_SAFARI)&&(clearTimeout(r._waitingPatchTimer),(r._waitingPatchTimer=setTimeout(function(){r.waiting||r._isError||r.paused()||r._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),r.trigger(p.Private.PatchWaiting))},3e3))),r.getCurrentTime()),i=(r.waiting&&!r._TimeUpdateStamp&&(r._TimeUpdateStamp=e),(0!=r.waiting&&r._TimeUpdateStamp==e)||(r.trigger(p.Private.H5_Loading_Hide),r.trigger(p.Private.AutoStreamHide),r._checkTimeoutHandle&&clearTimeout(r._checkTimeoutHandle),r._waitingTimeoutHandle&&clearTimeout(r._waitingTimeoutHandle),r._waitingLoadedHandle&&clearTimeout(r._waitingLoadedHandle),r._ucSourceHandle&&(clearTimeout(r._ucSourceHandle),(r._ucSourceHandle=null)),(r.waiting=!1)),d.IS_ANDROID&&d.IS_UC&&((r._timeNotUpdateCount=r._timeNotUpdateCount||0),r.waiting||e!==r._TimeUpdateStamp||(r._timeNotUpdateCount++,2<=r._timeNotUpdateCount&&((r._timeNotUpdateCount=0),r.trigger(p.Private.PatchWaiting)))),(r._TimeUpdateStamp=e),r._options.isLive||((t=!1),(t=((i=r.getDuration())<e&&!r.paused())||(i-e<0.2&&0<=d.browser.version.indexOf("49.")&&!r.paused())||r.exceedPreviewTime(e)?!0:t)&&!r._ended&&(r.pause(),h.trigger(r.tag,p.Video.ManualEnded))),r._player.tag),n=(i&&r._options.isLive&&(r._player.resolution&&0<i.videoWidth&&0<i.videoHeight&&(0<r._player.resolution.width||0<r._player.resolution.height)&&(r._player.resolution.width!==i.videoWidth||r._player.resolution.height!==i.videoHeight)&&((t={oldResolution:{width:r._player.resolution.width,height:r._player.resolution.height},newResolution:{width:i.videoWidth,height:i.videoHeight}}),r.trigger(p.Player.ResolutionChange,t)),(r._player.resolution.width=0==i.videoWidth?r._player.resolution.width:i.videoWidth),(r._player.resolution.height=0==i.videoHeight?r._player.resolution.height:i.videoHeight)),d.IS_CHROME&&Number(d.CHROME_VERSION)<50&&(r._playingSlientPause&&(clearTimeout(r._playingSlientPause),(r._playingSlientPause=null)),(r._playingSlientPause=setTimeout(function(){var e,t;r._status!=f.playing||r.paused()||r._drm||r._urls.length||((e=r.getCurrentTime()),(t=r._options.isLive?0:e),r._loadByUrlInner(r._options.source,t,e,!0))},3e3))),r._seis||{}),o=Object.keys(n);if(0!==o.length){var a=parseInt(1e3*e,10);if(!(l=n[a]))for(var s=0;s<250;s++){var l,c=a+s;if((l=n[c])){for(var u=0;u<o.length&&o[u]<=c;u++)delete n[o[u]];break}}l&&r.trigger(p.Player.SeiFrame,l)}}},{"../../../../lib/event":33,"../../../../lib/ua":49,"../../event/eventtype":70,"../../plugin/status":95}],90:[function(e,t,r){var o=e("../../event/eventtype"),a=e("../../../../lib/constants"),s=e("../../../../lib/event"),l=e("../../../../lang/index"),c=e("../../../../lib/ua"),u=e("../../../../lib/playerutil");t.exports.handle=function(e){var t=this;if(!t._options.isLive){var r=this.getCurrentTime(),i=this.getDuration();if(!t._ended&&0<i&&(i-r<0.5||i<r))return(t.pause(),(t._ended=!0),void s.trigger(this.tag,o.Video.ManualEnded))}t.waiting=!0;function n(){t._checkTimeoutHandle&&(clearTimeout(t._checkTimeoutHandle),(t._checkTimeoutHandle=null)),t._waitingTimeoutHandle&&(clearTimeout(t._waitingTimeoutHandle),(t._waitingTimeoutHandle=null)),t._waitingLoadedHandle&&(clearTimeout(t._waitingLoadedHandle),(t._waitingLoadedHandle=null)),t._waitingDelayLoadingShowHandle&&(clearTimeout(t._waitingDelayLoadingShowHandle),(t._waitingDelayLoadingShowHandle=null)),t._ucSourceHandle&&(clearTimeout(t._ucSourceHandle),(t._ucSourceHandle=null))}n(),(t._waitingDelayLoadingShowHandle=setTimeout(function(){t.trigger(o.Private.H5_Loading_Show)},1e3*t._options.delayLoadingShow)),(t._TimeUpdateStamp=null),(t._checkTimeoutHandle=setTimeout(function(){t.trigger(o.Private.AutoStreamShow)},1e3*t._options.loadDataTimeout)),t.trigger(o.Player.Waiting),(t._waitingTimeoutHandle=setTimeout(function(){var e;t.tag&&t._options&&(t.pause(),(e={mediaId:t._options.vid||"",error_code:a.ErrorCode.LoadingTimeout,error_msg:l.get("Error_Waiting_Timeout_Text")}),t.logError(e),t.trigger("error",e))},1e3*t._options.waitingTimeout)),(t._waitingLoadedHandle=setTimeout(function(){var e=t.getCurrentTime();0==t._waitingTimeoutCount&&e!=t._waitingReloadTime&&((t._waitingTimeoutCount=1),(t._waitingReloadTime=e),(e=t._options.isLive?0:e),t._loadByUrlInner(t._options.source,e,!0))},(t._options.waitingTimeout/2)*1e3)),c.IS_ANDROID&&c.IS_DINGTALK&&(t._ucSourceHandle=setTimeout(function(){u.detectRegionBlock(t._options.source,function(e){e&&((e={mediaId:t._options.vid,error_code:a.ErrorCode.RegionBlock,error_msg:l.get("Error_Region_Block_Text")}),t.logError(e),t.trigger("error",e))})},5e3)),t.on("error",function(){n()})}},{"../../../../lang/index":23,"../../../../lib/constants":28,"../../../../lib/event":33,"../../../../lib/playerutil":46,"../../../../lib/ua":49,"../../event/eventtype":70}],91:[function(e,t,r){var i="undefined"==typeof Promise?e("es6-promise").Promise:Promise,n=e("../../ui/component"),o=e("../../lib/object"),a=e("../../lib/dom"),l=e("../../lib/event"),s=e("../../ui/exports"),c=e("../../monitor/monitor"),u=e("../../lib/ua"),p=e("../../lib/constants"),d=e("../../lib/playerutil"),h=e("./x5play"),f=e("../../lib/cookie"),y=e("../../lang/index"),_=e("../../feature/autoPlayDelay"),g=e("./event/eventmanager"),v=e("../../ui/component/cover"),m=e("../../ui/component/license-watermark"),S=e("../../feature/license"),b=e("../../ui/component/text-track-display"),T=e("../../ui/component/play-animation"),E=e("../../commonui/autostreamselector"),w=e("./event/eventtype"),x=e("./plugin/lifecyclemanager"),P=e("../service/export"),k=e("../../ui/component/progressmarker"),C=e("../../feature/keyboardControl"),I=e("../../feature/AntiRecord"),L=e("./eventHandler/video/index"),R=e("../../lib/vttnext/index"),A=e("../../lib/codec-probe"),D=e("../splayer/splayerinjector"),e=e("../../ui/component/util").throttle,O=n.extend({init:function(e,r){var t;(this.tag=e),(this.loaded=!1),(this.played=!1),(this.waiting=!1),(this._urls=[]),(this._currentPlayIndex=0),(this._retrySwitchUrlCount=0),(this._isError=!1),(this._isHls=!1),(this._liveRetryCount=0),(this._liveRetryTimer=null),(this._vodRetryCount=0),(this._seeking=!1),(this._serverRequestId=0),(this._waitingTimeoutCount=0),(this._waitingReloadTime=0),(this._created=!1),(this._enteredProgressMarker=!1),(this._liveShiftSeekStartTime=0),(this._duration=0),(this._seis={}),(this._initPTS=0),(this.isMutiLevel=!1),(this._antiRecord=null),(this.__disposed=!1),(this.resolution={width:0,height:0}),void 0===r.skinLayout&&(r.skinLayout=d.defaultH5Layout),d.isRts(r.source)&&!r.autoplay&&(r.preload=!1),n.call(this,this,r),this.addClass("prism-player"),r.plugins&&o.each(r.plugins,function(e,t){this[e](t)},this),this._createService(),(this.UI={}),r.useNativeControls?this.tag.setAttribute("controls","controls"):((this.UI=s),0==r.errorDisplay&&(this.UI.errorDisplay=void 0)),this.initChildren(),this._options.trackLog&&(this._monitor=new c(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched},this._options.trackLog)),g.onAll(this),this._options.preventRecord&&((this._antiRecord=new I({player:this})),this._antiRecord.start()),(this._lifeCycleManager=new x(this)),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidParameter,error_msg:y.get("ShiftLiveTime_Error")}),this.trigger(w.Player.Error,e)):(this._options.extraInfo&&(e=this._options.extraInfo).liveRetry&&(this._options.liveRetry=e.liveRetry),this.on(w.Private.ReadyState,function(){this.trigger(w.Player.Ready)}),this.on(w.Player.H265PlayInfo,function(e){var t=this;"native"!==e.paramData.renderType&&S.getLicense(r.license.domain,r.license.key).then(function(e){e=e.validate(p.PLAYER_SDK_CODE,p.FEATURE_ID_H265);if((console.log("license validate result => ",e),0===e))t.trigger(w.Private.LicenseHasResult,{result:p.LicenseResultCode.Success,featureId:p.FEATURE_ID_H265});else{if(1===e)return i.reject(p.LicenseResultCode.NotFound);{if(2===e)return i.reject(p.LicenseResultCode.Expired);console.error("license validate unknown error")}}}).catch(function(e){t.trigger(w.Private.LicenseHasResult,{result:e,featureId:p.FEATURE_ID_H265}),S.logError(e)})}),this.on(w.Private.LicenseHasResult,function(e){var t=p.LicenseResultCode;-1<[t.NotFound,t.Expired,t.CertInvalid,t.ResourceIncorrect,t.LicenseKeyInvalid,t.DomainInvalid].indexOf(e.paramData.result)&&((this.UI.licenseWatermark=m),(this._licenseWatermark=this.addChild("licenseWatermark",this._options)))}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(w.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(w.Private.H5_Loading_Show):this.trigger(w.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(w.Private.PREPARE,"custom"),this._options.autoPlayDelay?((this._autoPlayDelay=new _(this)),(t=this)._autoPlayDelay.handle(function(){t.initPlay()})):this.initPlay()),C.init.call(this),(this._vttBroker=new R({player:this})),this._getUserTextTracks())}});(O.prototype.isSupportMSE=function(){return d.isSupportMSE()}),(O.prototype.initPlay=function(e){this._initPlayBehavior(e,this._options.source)}),(O.prototype.initChildren=function(){var e=this.options(),t=e.skinLayout;if(!1!==t&&!o.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");!1!==t&&0!==t.length&&(this.options({children:t}),n.prototype.initChildren.call(this)),(this.UI.cover=v),(e.className=""),this.addChild("cover",e),(this.UI.playanimation=T),this.addChild("playanimation",e),(this.UI.autoStreamSelector=E),this.addChild("autoStreamSelector",e),(this.UI.progressMarker=k),this.addChild("progressMarker",e),(this.UI.textTrackDisplay=b),this.addChild("textTrackDisplay",e),this.trigger(w.Private.UiH5Ready)}),(O.prototype.createEl=function(){var e=!1,t=("VIDEO"!==this.tag.tagName?((this._el=this.tag),(this.tag=n.prototype.createEl.call(this,"video")),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):((e=!0),(this._el=this.tag.parentNode)),this._el),r=this.tag,i=(this._options.enableSystemMenu||(r.addEventListener?r.addEventListener("contextmenu",function(e){e.preventDefault()},!1):r.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),(r.player=this),a.getElementAttributes(r));return(o.each(i,function(e){t.setAttribute(e,i[e])}),this.setVideoAttrs(),e||(r.parentNode&&r.parentNode.insertBefore(t,r),a.insertFirst(r,t)),t)}),(O.prototype.setVideoAttrs=function(){var e=this._options.preload,t=this._options.autoplay;if(((this.tag.style.width=this._options.videoWidth||"100%"),(this.tag.style.height=this._options.videoHeight||"100%"),e&&this.tag.setAttribute("preload","preload"),t&&!this._isEnabledAILabel()&&"15"!==u.IOS_VERSION&&this.tag.setAttribute("autoplay","autoplay"),u.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(u.IS_UC||u.dingTalk())&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo))for(var r in this._options.extraInfo)this.tag.setAttribute(r,this._options.extraInfo[r]);h.adaptX5Play(this)}),(O.prototype.checkOnline=function(){var e;return!(this._options&&!this._options.debug&&0==navigator.onLine&&(((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.NetworkUnavaiable,error_msg:y.get("Error_Offline_Text")}).display_msg=y.get("Error_Offline_Text")),this.trigger(w.Player.Error,e),1))}),(O.prototype.id=function(){return this.el().id}),(O.prototype.renderUI=function(){}),(O.prototype.switchUrl=function(){var e,t;0!=this._urls.length&&((this._currentPlayIndex=this._currentPlayIndex+1),this._urls.length<=this._currentPlayIndex&&((this._currentPlayIndex=0),this._retrySwitchUrlCount++),(e=this._urls[this._currentPlayIndex]),f.set(p.SelectedStreamLevel,e.definition,365),this.trigger(w.Private.QualityChange,y.get("Quality_Change_Fail_Switch_Text")),(t=this.getCurrentTime()),(this._vodRetryCount=0),(this._originalSource=""),this._loadByUrlInner(e.Url,t,!0))}),(O.prototype.setControls=function(){var e=this.options();e.useNativeControls?this.tag.setAttribute("controls","controls"):"object"==typeof e.controls&&((e=this._initControlBar(e.controls)),this.addChild(e))}),(O.prototype._initControlBar=function(e){return new ControlBar(this,e)}),(O.prototype.getMetaData=function(){}),(O.prototype.getReadyTime=function(){return this.readyTime}),(O.prototype.readyState=function(){return this.tag.readyState}),(O.prototype.getError=function(){return this.tag.error}),(O.prototype.getRecentOccuredEvent=function(){return this._eventState}),(O.prototype.getSourceUrl=function(){return this._options?this._options.source:""}),(O.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}}),(O.prototype.getCurrentQuality=function(){var e;return 0<this._urls.length?{width:(e=this._urls[this._currentPlayIndex]).width,url:e.Url,definition:e.definition}:""}),(O.prototype.getCurrentPDT=function(){var e;if((u.IS_SAFARI||u.IS_IOS)&&this.tag)return((e=Date.parse(this.tag.getStartDate())),isNaN(e)?0:e+1e3*this.getCurrentTime())}),(O.prototype.setSpeed=function(e){this.tag&&((this._originalPlaybackRate=e),(this.tag.playbackRate=e))}),(O.prototype.play=function(e){return(this.tag&&(this.tag.ended||this._ended?this.replay():(((this._options.preload||this.loaded)&&this.tag.src)||this._initLoad(this._options.source),this.trigger(w.Private.Cover_Hide),this.tag.play())),(this._isManualPlay=e||!1),this)}),(O.prototype.replay=function(){return(this._monitor&&this._monitor.replay(),this.seek(0),this.tag.play(),this)}),(O.prototype.pause=function(e){return(this.tag&&this.tag.pause(),(this._isManualPause=e||!1),this)}),(O.prototype.stop=function(){return this.tag.setAttribute("src",null),this}),(O.prototype.paused=function(){if(this.tag)return!1!==this.tag.paused}),(O.prototype.getDuration=function(){var e=0;return(e=this.tag?this.isPreview()?this._vodDuration||this.tag.duration:this._duration&&this._duration!=1/0?this._duration:this.tag.duration:e)}),(O.prototype.getDisplayDuration=function(){var e=0;return(e=this.tag?this._vodDuration||this.getDuration():e)}),(O.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime:0}),(O.prototype.seek=function(e){this._seeking=!0;var t=this.tag.duration;if(((e=Math.floor(e)),!Number.isNaN(e)))return this._doSeek(this,(e=t<=e?t:e)),this}),(O.prototype._doSeek=e(function(e){var t=e[0],e=e[1];try{var r=t._originalPlaybackRate||t.tag.playbackRate;(t.tag.currentTime=e),u.IS_IE11&&setTimeout(function(){t.tag&&(t.tag.playbackRate=r)})}catch(e){console.log(e)}},100)),(O.prototype.firstNewUrlloadByUrl=function(e,t){this._clearTimeout(),(this._options.vid=0),(this._options.source=e),this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:e,from:this._options.from}),this.trigger(w.Private.ChangeURL),this.initPlay(),this._options.autoplay&&this.trigger(w.Private.Cover_Hide),this._options.autoplay?this.trigger(w.Player.Play):this.trigger(w.Player.Pause),(!(t=t||0)&&0!=t)||isNaN(t)||this.seek(t)}),(O.prototype._loadByUrlInner=function(e,t,r,i){var n=this,o=this.tag.volume;if(i&&u.IS_ANDROID_FIREFOX){for(var a in w.Video)l.off(this.tag,w.Video[a]);this.tag.remove(),(this.tag=this._el),this.createEl()}this.loadByUrl(e,t,r,!0),(this.tag.volume=o),i&&u.IS_ANDROID_FIREFOX&&this.tag.addEventListener(w.Video.LoadedData,function e(){n._player.trigger(w.Player.DurationChange),L.bind(n),n.tag.removeEventListener(w.Video.LoadedData,e)})}),(O.prototype.loadByUrl=function(i,n,e,t){var r=this,o=(this._monitor&&this._monitor.resetVV(),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),a=((this._options.source||"").match(o)||[])[0]!==((i||"").match(o)||[])[0];if(((this._h265InfoReported=!1),this._probeInfo||(this._probeInfo={}),(this._probeInfo.codecTag=void 0),!a&&(d.isMp4(i)||d.isFlv(i))))return!this._options.forceH265&&this._options.enableH265?void A(i,function(e){var e=d.getVideoTrack(e.tracks),t=(e||{}).codecTag||(e||{}).codec.split(".")[0];(r._probeInfo.codecTag=t),e&&d.isH265Codec(t)?d.isFlv(i)?(r._splayer||(a=!0),s.call(r)):d.shouldUseBasePlayer(t,function(e){e?(r._splayer&&(a=!0),r._probeInfo.codecTag&&D.reportH265PlayInfo.call(r,{renderType:"native",codecTag:r._probeInfo.codecTag})):r._splayer||(a=!0),s.call(r)}):(r._splayer&&(a=!0),s.call(r))},function(e){s.call(r)}):void s.call(this);function s(){var r=this;a&&this._splayer&&this.removeChild(this._licenseWatermark),a&&window.Aliplayer?(console.log("!!!!! NEED RELOAD INSTANCE !!!!!"),(this._options.source=i),window.Aliplayer.reloadInstance(this._options,function(){},this)):(t||(this._urls=[]),this._monitor&&!t&&this._monitor.reset(),(this._isError=!1),(this._duration=0),this._clearTimeout(),this.trigger(w.Private.Error_Hide),(this._options.source=i),this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:i,from:this._options.from}),t||(this.trigger(w.Private.ChangeURL),(this._vodRetryCount=0)),(this._options._autoplay=e),this.initPlay(e),(this._options.autoplay||e)&&this.trigger(w.Private.Cover_Hide),this._options.autoplay||e?this.trigger(w.Player.Play):this.trigger(w.Player.Pause),this._options.isLive||(!n&&0!=n)||isNaN(n)||l.one(this.tag,w.Video.CanPlay,function(e){var t=r.getDuration();r.seek(t<=n?t:n)}))}s.call(this)}),(O.prototype.dispose=function(){(this.__disposed=!0),this.trigger(w.Private.Dispose),this.tag.pause(),g.offAll(this),C.dispose.call(this),this._antiRecord&&(this._antiRecord.dispose(),(this._antiRecord=null)),this._monitor&&(this._monitor.removeEvent(),(this._monitor=null)),this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),(this._checkTimeoutHandle=null)),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),(this._waitingTimeoutHandle=null)),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),(this._playingSlientPause=null)),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),(this._waitingLoadedHandle=null)),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),(this._ucSourceHandle=null)),this._readyStateTimer&&(clearInterval(this._readyStateTimer),(this._readyStateTimer=null)),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),(this._vodRetryCountHandle=null)),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),(this._waitingDelayLoadingShowHandle=null)),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),(this._liveRetryTimer=null)),this._disposeService(),this._clearLiveErrorHandle(),(this._el.innerHTML=""),this.destroy(),this._releaseMediaElement(),(this._options.recreatePlayer=null),(this._options=null),(this.isMutiLevel=!1),(this._seis={}),(this._initPTS=0)}),(O.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),(this.tag=null)}),(O.prototype.mute=function(){this._muteInner(),(this._originalVolumn=this.tag.volume);var e=y.get("Volume_Mute");return(this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(0),this)}),(O.prototype._muteInner=function(){(this.tag.muted=!0),this.trigger(w.Private.VolumnChanged,-1)}),(O.prototype.unMute=function(){this._unMuteInner();var e=y.get("Volume_UnMute");return(this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"}),this._setInnerVolume(this._originalVolumn||0.5),this)}),(O.prototype._unMuteInner=function(){(this.tag.muted=!1),this.trigger(w.Private.VolumnChanged,-2)}),(O.prototype.muted=function(){return this.tag.muted}),(O.prototype.getVolume=function(){return this.tag.volume}),(O.prototype.getOptions=function(){return this._options}),(O.prototype.setVolume=function(e,t){0!=e?this._unMuteInner():0==e&&this._muteInner(),this._setInnerVolume(e);e=y.get("Curent_Volume")+"<span>"+(100*e).toFixed()+"%</span>";this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"})}),(O.prototype._setInnerVolume=function(e){(this.tag.volume=e),this.trigger(w.Private.VolumnChanged,e)}),(O.prototype.hideProgress=function(){this.trigger(w.Private.HideProgress)}),(O.prototype.cancelHideProgress=function(){this.trigger(w.Private.CancelHideProgress)}),(O.prototype.setPlayerSize=function(e,t){this._el&&((this._el.style.width=e),(this._el.style.height=t))}),(O.prototype.getBuffered=function(){return this.tag.buffered}),(O.prototype.setRotate=function(e){this.tag&&((this._rotate=e),this._setTransform(),this.log("ROTATE",{rotation:e}))}),(O.prototype.getRotate=function(e){return void 0===this._rotate?0:this._rotate}),(O.prototype.setImage=function(e){this.tag&&((this._image=e),this._setTransform(),this.log("IMAGE",{mirror:"horizon"==e?2:1,text:e}))}),(O.prototype.getImage=function(){return this._image}),(O.prototype.cancelImage=function(){this.tag&&((this._image=""),this._setTransform(),this.log("IMAGE",{mirror:0}))}),(O.prototype.setCover=function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&e&&((t.style.backgroundImage="url("+e+")"),(this._options.cover=e),this.trigger(w.Private.Cover_Show))}),(O.prototype.setTextTracks=function(e){(e=d.unqiueTextTracks(e||[])),this.trigger(w.Private.VttClearTracks),e&&e.length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:e}),this.trigger(w.Private.CCReset)}),(O.prototype._setTransform=function(){this._transformProp||(this._transformProp=a.getTransformName(this.tag));var e=" translate(-50%, -50%)";this._rotate&&(e+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?(e+=" scaleY(-1)"):"horizon"==this._image&&(e+=" scaleX(-1)")),(this.tag.style[this._transformProp]=e)}),(O.prototype._startPlay=function(){this.tag.paused&&this.tag.play()}),(O.prototype._initPlayBehavior=function(e,t){return(this._monitor&&this._monitor.resetVV(),!this._checkSupportVideoType()&&(d.validateSource(t)?(void 0===e&&(e=!1),this._created||((this._created=!0),this.trigger(w.Private.Created)),this.loaded||this.trigger(w.Player.Init),this._options.autoplay||this._options._autoplay||this._options.preload||e?((this._options._preload=!0),this._initLoad(t),(this._options.autoplay||this._options._autoplay)&&this._startPlay()):this.trigger(w.Private.Play_Btn_Show),!0):(((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=y.get("Error_Invalidate_Source")),this.trigger(w.Player.Error,e),!1)))}),(O.prototype._isPreload=function(){return(this._options.autoplay||this._options.preload||this._options._preload)}),(O.prototype._initLoad=function(e){e&&(this._isPreload()&&!u.IS_MOBILE?this.trigger(w.Private.H5_Loading_Show):(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this.tag.setAttribute("src",e),(this.loaded=!0))}),(O.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),(this._liveErrorHandle=null))}),(O.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(w.Player.OnM3u8Retry);var e=this._options,e=e.liveRetryInterval+e.liveRetryStep*this._liveRetryCount,t=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),(this._liveRetryTimer=null)),(this._liveRetryTimer=setTimeout(function(){t._liveRetryCount++,t.tag.load(t._options.source),t.tag.play()},1e3*e))}),(O.prototype._checkSupportVideoType=function(){var e,t;return this.tag.canPlayType&&this._options.source&&u.IS_MOBILE?((e=""),0<(t=this._options.source).indexOf("m3u8")?""!=this.tag.canPlayType("application/x-mpegURL")||d.isSupportHls()||(e=y.get("Error_Not_Support_M3U8_Text")):0<t.indexOf("mp4")?""==this.tag.canPlayType("video/mp4")&&(e=y.get("Error_Not_Support_MP4_Text")):(d.isRTMP(t)||d.isFlv(t))&&u.IS_MOBILE&&(e=y.get("Error_Not_Support_Format_On_Mobile")),e&&((t={mediaId:this._options.vid||"",error_code:p.ErrorCode.FormatNotSupport,error_msg:e}),this.logError(t),(t.display_msg=e),this.trigger(w.Player.Error,t)),e):""}),(O.prototype.getComponent=function(e){return this._lifeCycleManager.getComponent(e)}),(O.prototype.logError=function(e,t){((e=e||{}).vt=this.getCurrentTime()),this.log(t?"ERRORRETRY":"ERROR",e)}),(O.prototype.log=function(e,t){var r=0,i=0;if(this._monitor)return(this._options&&((r=this._options.vid||"0"),(i=this._options.from||"0")),this._monitor.updateVideoInfo({video_id:r,album_id:0,source:this._options.source,from:i}),this._monitor._log(e,t))}),(O.prototype.setSanpshotProperties=function(e,t,r){if((this._snapshotMatric||(this._snapshotMatric={}),(this._snapshotMatric.width=e),(this._snapshotMatric.height=t),1<r))throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=r}),(O.prototype.getStatus=function(){return this._status||"init"}),(O.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0}),(O.prototype.isInProgressMarker=function(){return this._enteredProgressMarker}),(O.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1}),(O.prototype.setProgressMarkers=function(e){this.trigger(w.Private.ProgressMarkerChanged,(e=e||[]))}),(O.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]}),(O.prototype.setPreviewTime=function(e){this._options.playConfig||(this._options.playConfig={}),(this._options.playConfig.PreviewTime=e)}),(O.prototype.getPreviewTime=function(){var e=0;return(e=this._options.playConfig?this._options.playConfig.PreviewTime:e)}),(O.prototype.exceedPreviewTime=function(e){return(this.isPreview()&&e>=this._options.playConfig.PreviewTime)}),(O.prototype.isPreview=function(){var e=this._options.playConfig.PreviewTime,t=this._vodDuration||this.tag.duration;return 0<e&&e<t}),(O.prototype.getStats=function(){return new i(function(e){e()})}),(O.prototype.setTraceId=function(e){this._monitor&&this._monitor.updateTraceId(e)}),(O.prototype._getSanpshotMatric=function(){return(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric)}),(O.prototype._autoplayFailedHandler=function(){this.trigger(w.Private.Play_Btn_Show),this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Player.AutoPlayPrevented),this.trigger(w.Player.AutoPlay,!1),this._options.cover&&this.trigger(w.Private.Cover_Show)}),(O.prototype._overrideNativePlay=function(){var r=this.tag.play,i=this;this.tag.play=function(){var e,t;i._monitor&&i._monitor.reportStartPlay(),i._options.source?((i.readyTime=new Date().getTime()),(e=r.apply(i.tag)),void 0!==e&&e.then(function(){i.trigger(w.Player.AutoPlay,!0)}).catch(function(e){!i.tag||!i.tag.paused||i._isError||i._options._autoplay||i._switchedLevel||i._autoplayFailedHandler()}),(t=i._originalPlaybackRate||i.tag.playbackRate),setTimeout(function(){i.tag&&(i.tag.playbackRate=t)})):((e={mediaId:i._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}),i._options.vid?(e.display_msg=y.get("Error_Vid_Empty_Source")):i._options.mediaAuth?(e.display_msg=y.get("Error_Mediaauth_Empty_Source")):(e.display_msg=y.get("Error_Empty_Source")),i.trigger(w.Player.Error,e))}}),(O.prototype._extraMultiSources=function(){var e=this._options.source;if(e&&-1<e.indexOf("{")&&-1<e.indexOf("}")){var t="";try{t=JSON.parse(e)}catch(e){console.error(e),console.error("\u5730\u5740json\u4e32\u683c\u5f0f\u4e0d\u5bf9")}var r,i=[];for(r in t){var n=p.QualityLevels[r];i.push({definition:r,Url:t[r],desc:n||r})}this._setupSourceList(i)}return i}),(O.prototype._setupSourceList=function(e){var t;(e=void 0===e?[]:e).length&&((this._currentPlayIndex=d.findSelectedStreamLevel(e)),(t=e[this._currentPlayIndex]),(this._urls=e),(this._options.source=t.Url),this.trigger(w.Private.SourceLoaded,t))}),(O.prototype._isEnabledAILabel=function(){return this._options.ai&&this._options.ai.label}),(O.prototype._createService=function(){if(P)for(var e=P.length,t=0;t<e;t++){var r=P[t],i=r.condition;void 0===i?(i=!0):"function"==typeof i&&(i=i.call(this)),i&&(this[r.name]=new r.service(this))}}),(O.prototype._disposeService=function(){if(P)for(var e=P.length,t=0;t<e;t++){var r=this[P[t].name];void 0!==r&&r.dispose&&r.dispose()}}),(O.prototype._executeReadyCallback=function(){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(e){console.log(e)}}),(O.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),(this._checkTimeoutHandle=null)),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),(this._waitingTimeoutHandle=null)),this._clearLiveErrorHandle()}),(O.prototype._reloadForVod=function(){var e,t,r;return(this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&((e=this.getCurrentTime()),(t=this._originalSource).indexOf("auth_key=")<0&&(t=t&&0<t.indexOf("?")?t+"&_t="+new Date().valueOf():t+"?_t="+new Date().valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),((r=this)._vodRetryCountHandle=setTimeout(function(){r._loadByUrlInner(t,e,!0)},100*this._vodRetryCount)),(this._vodRetryCount=this._vodRetryCount+1),!0))}),(O.prototype._getUserTextTracks=function(){var e=this._options.textTracks||[];(e=d.unqiueTextTracks(e)).length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:e})}),(t.exports=O)},{"../../commonui/autostreamselector":11,"../../feature/AntiRecord":16,"../../feature/autoPlayDelay":17,"../../feature/keyboardControl":18,"../../feature/license":19,"../../lang/index":23,"../../lib/codec-probe":26,"../../lib/constants":28,"../../lib/cookie":29,"../../lib/dom":32,"../../lib/event":33,"../../lib/object":42,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/vttnext/index":56,"../../monitor/monitor":64,"../../ui/component":130,"../../ui/component/cover":134,"../../ui/component/license-watermark":139,"../../ui/component/play-animation":141,"../../ui/component/progressmarker":144,"../../ui/component/text-track-display":155,"../../ui/component/util":159,"../../ui/exports":162,"../service/export":120,"../splayer/splayerinjector":127,"./event/eventmanager":69,"./event/eventtype":70,"./eventHandler/video/index":84,"./plugin/lifecyclemanager":94,"./x5play":96,"es6-promise":8}],92:[function(e,t,r){e=e("../../../lib/oo").extend({});t.exports=e},{"../../../lib/oo":43}],93:[function(e,t,r){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],94:[function(e,t,r){function i(i){((this._player=i)._status="init"),(this.components=[]);var e=i.getOptions().components;if(e&&s.isArray(e)&&0<e.length)for(var t=0;t<e.length;t++){var r=e[t];if(!r)return void console.log("The "+t+" custome component is "+r);var n=void 0===r.type?r:r.type,o=void 0===r.args?[]:r.args,r=void 0===r.name?"":r.name;if(!n)return void console.log(r+" compenent is "+n);(o=o&&0<o.length?[].concat.call([n],o):[]),(n=new(Function.prototype.bind.apply(n,o))()),(o=n[c.createEl]);o&&"function"==typeof o&&o.call(n,i.el(),i),this.components.push({name:r,obj:n})}var a=this;i.on(l.Private.LifeCycleChanged,function(e){var t=e.paramData,r=t.type,t=t.data;r===l.Video.CanPlayThrough&&a._player.trigger(l.Player.TimeUpdate,t.target.currentTime),r===l.Video.Ended&&a._player.trigger(l.Player.TimeUpdate,a._player.getDuration()),0!=a.components.length&&u.call(a,i,e)})}var s=e("../../../lib/object"),l=e("../event/eventtype"),c=e("./lifecycle"),n=e("./status"),u=((i.prototype.getComponent=function(e){var t=null,r=this.components.length;if(e)for(var i=0;i<r;i++)if(this.components[i].name==e){t=this.components[i].obj;break}return t}),function(e,t){if(t){for(var t=t.paramData,r=t.type,i=t.data,n=(((t=r)!=l.Video.LoadStart&&t!=l.Video.LoadedData&&t!=l.Video.LoadedMetadata)||(r=c.loading),p(e,r),this.components.length),o=0;o<n;o++){var a=this.components[o].obj,s=a[r];s&&"function"==typeof s&&s.call(a,e,i)}r==l.Private.Dispose&&(this.components=[])}}),p=function(e,t){void 0===n[t]||(t==n.pause&&(e._status==n.error||e._status==n.ended))||(t==n.ready&&e._status==n.playing)||(e._status=t)};t.exports=i},{"../../../lib/object":42,"../event/eventtype":70,"./lifecycle":93,"./status":95}],95:[function(e,t,r){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],96:[function(e,t,r){function i(e,t){var r=e.el().style.height,i=e.el().style.width,n=((e.originalLayout={container:{height:r,width:i},video:{width:e.tag.style.width,height:e.tag.style.height}}),document.body.clientHeight*(window.devicePixelRatio||1)+"px"),o=document.body.clientWidth+"px";(width=t?((height=n),o):((height=r.indexOf("%")?r:r+"px"),i.indexOf("%")?i:i+"px")),(e.tag.style.width=o),(e.tag.style.height=n),(e.el().style.height=t?n:height)}var n=e("../../lib/ua"),o=e("../../lib/dom");(t.exports.isAndroidX5=function(){return(n.os.android&&n.is_X5)||n.dingTalk()}),(t.exports.adaptX5Play=function(r){n.os.android&&n.is_X5&&("h5"==r._options.x5_type&&(r.tag.setAttribute("x5-video-player-type",r._options.x5_type),(window.onresize=function(){var e,t;i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),"landscape"==(e=r)._x5VideoOrientation&&((e._originalTagWidth=e.tag.style.width),(e._originalTagHeight=e.tag.style.height),(t=document.querySelector("#"+e.id()+" .prism-controlbar"))&&parseFloat(t.offsetHeight),(e.tag.style.height="100%"),(e.tag.style.width=window.screen.width+"px"))}),r.tag.addEventListener("x5videoenterfullscreen",function(){i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),r.trigger("x5requestFullScreen")}),r.tag.addEventListener("x5videoexitfullscreen",function(){var e,t;(e=r).originalLayout&&((t=e.originalLayout),(e.el().style.height=t.container.height),(e.el().style.width=t.container.width),(e.tag.style.width=t.video.width),(e.tag.style.height=t.video.height)),r.trigger("x5cancelFullScreen"),r.fullscreenService.getIsFullScreen()&&r.fullscreenService.cancelFullScreen()}),r.on("requestFullScreen",function(){"top"==r._options.x5_video_position&&o.removeClass(r.tag,"x5-top-left"),n.os.android&&n.is_X5&&r._options.x5LandscapeAsFullScreen&&(r.tag.setAttribute("x5-video-orientation","landscape"),(r._x5VideoOrientation="landscape"))}),r.on("cancelFullScreen",function(){"top"==r._options.x5_video_position&&o.addClass(r.tag,"x5-top-left"),n.os.android&&n.is_X5&&r._options.x5LandscapeAsFullScreen&&(r.tag.setAttribute("x5-video-orientation","portrait"),i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),(r._x5VideoOrientation="portrait"))})),void 0!==r._options.x5_fullscreen&&r._options.x5_fullscreen&&(r.tag.setAttribute("x5-video-player-fullscreen",r._options.x5_fullscreen),o.addClass(r.tag,"x5-full-screen")),"top"==r._options.x5_video_position&&o.addClass(r.tag,"x5-top-left"),void 0!==r._options.x5_orientation)&&r.tag.setAttribute("x5-video-orientation",r._options.x5_orientation)})},{"../../lib/dom":32,"../../lib/ua":49}],97:[function(e,t,r){var f=e("../../lib/io"),y=e("../../config"),_=e("../../lib/constants"),g=e("../../lib/util"),v=e("../../lib/playerutil"),m=(e("../../lib/dom"),e("../../lang/index")),S=e("../base/event/eventtype"),b=e("../saas/drm"),T=e("../../lib/ua"),E=(function(){function e(){}var t=e.prototype;return((t.destroy=function(){}),(t.append=function(e){}),(t.remove=function(e,t){}),(t.isTextVisible=function(){}),(t.setTextVisibility=function(e){}),e)})();t.exports.inject=function(e,t,r,i,o,n,a){var s,l=i.source;function c(i){var n=this;this._drm.load(this._options.source,i.startTime).then(function(){if((n.trigger(S.Private.H5_Loading_Hide),i.continuePlay&&(n.play(),i.prevVariant)&&0!==i.prevVariant)){for(var e,t=n._drm.getVariantTracks(),r=0;r<t.length;r++)if(t[r].id===i.prevVariant){e=t[r];break}e&&n._drm.selectVariantTrack(e,!0)}}).catch(function(e){p.call(n,e)})}function u(){var e=_.ErrorCode.DrmNotSupported,t=m.get("Error_Drm_Not_Supported"),e={mediaId:this._options.vid||"",error_code:e,error_msg:t};this.logError(e),this.trigger(S.Player.Error,e)}function p(e){var t=_.ErrorCode.DrmLoadError,r=m.get("Error_Drm_Load"),t={mediaId:this._options.vid||"",error_code:t,error_msg:r+"("+e.code+")"};this.logError(t),this.trigger(S.Player.Error,t)}function d(){this._sessionTimer&&(clearTimeout(this._sessionTimer),(this._sessionTimer=null))}function h(e,t){t=t.getVariantTracks().find(function(e){return e.active});console.log("activeTrack",t),e.trigger(S.Private.QualityChange,{levelSwitch:!0,bitrate:t.bandwidth,desc:t.height})}(!n&&((i=l),e._drm||(!v.isDash(i)&&!v.isHls(i))))||((e._isDrm=!0),(e._drm=null),(e._isLoadedDrm=!1),(e._sessionTimer=null),(e._isFairPlay=T.IS_MAC_SAFARI||T.IS_IOS),(e._fairPlayHandlers={}),console.log("use FairPlay",e._isFairPlay),(t.prototype._checkDrmReady=function(){if(null==e._drm&&!e._isFairPlay)throw new Error("please invoke this method after ready event");}),(t.prototype.play=function(e){this._checkDrmReady(),(this._isManualPlay=e||!1);return(this.trigger(S.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this)}),(t.prototype.initPlay=function(e){var t;function r(n,t){var r,i;if(n._antiRecord&&(console.log("Manual check before load source"),n._antiRecord.check()))return;!shaka.Player.isBrowserSupported()||(function(){if(T.IS_ANDROID)return!(!T.IS_UC&&!T.IS_FIREFOX)})()?u.call(n):((r=!n._drm),(i=function(){var e;(n._drm=new shaka.Player(n.tag)),s(n,n._drm),(e=n._options.isLive?"https://"+v.getLiveHostByRegion(n._options.region):"https://vod."+n._options.region+".aliyuncs.com"),n._drm.configure({drm:{servers:{"com.widevine.alpha":e,"com.microsoft.playready":e}},textDisplayFactory:function(){return new E()}}),n._drm.getNetworkingEngine().registerRequestFilter(function(e,t){shaka.util.StringUtils;var r=shaka.util.Uint8ArrayUtils;e==shaka.net.NetworkingEngine.RequestType.LICENSE&&((e=r.toBase64(new Uint8Array(t.body))),(r=n._options.isLive?b.getRequestUrl(e,n):b.postData(e,n)),(t.uris[0]=r.url),(t.headers["content-type"]="application/x-www-form-urlencoded"),(t.body=r.data))}),n._drm.getNetworkingEngine().registerResponseFilter(function(e,t){var r=shaka.util.StringUtils,i=shaka.util.Uint8ArrayUtils;e==shaka.net.NetworkingEngine.RequestType.LICENSE&&((e=r.fromUTF8(t.data)),(r=JSON.parse(e)),(e=n._options.isLive?r.Response.B64License:JSON.parse(r.License).b64License),(t.data=i.fromBase64(e)))}),n._drm.addEventListener("error",function(e){console.log("errorMessage"),console.log(e.detail.code),console.log(e.detail)}),n._drm.load(n._options.source).then(function(){n._initPlayBehavior(t)}).catch(function(e){p.call(n,e)}),d.call(n),(n._sessionTimer=setTimeout(function(){p.call(n,{code:"session timeout"}),n._drm&&n._drm.destroy()},n._player.getOptions().drmSessionTimeout||5e3)),o&&o(n._drm),r&&n._executeReadyCallback()}),n.destroy(function(e){try{i()}catch(e){console.log(e)}}))}g.contentProtocolMixed(l)?(((t={mediaId:this._options.vid||"",error_code:_.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=m.get("Request_Block_Text")),this.trigger(S.Player.Error,t)):((this._waitingTimeoutCount=1),this._isFairPlay?(this.trigger(S.Private.H5_Loading_Show),function(e,t){var r;this._isFairPlay&&(!(function(){if(T.IS_IOS)return((e=parseInt(T.os.version)),console.log("osVersion",e),12<=e);{var e;if(T.IS_MAC_SAFARI)return((e=parseInt(T.browser.version)),console.log("browserVersion",e),12<=e)}return})()?u.call(this):((r=this).destroy(),b.loadCertificate(this,function(){e&&e(),r._initPlayBehavior(t,r._options.source),r._executeReadyCallback()})))}.call(this,o,e)):this._isLoadedDrm&&"undefined"!=typeof shaka?r(this,e):(this.trigger(S.Private.H5_Loading_Show),function(e){var t="aliplayer-drm-min.js",r="",r=y.domain?"https://"+y.domain+"/de/prismplayer/"+y.h5Version+"/drm/"+t:"/build/drm/"+t,i=this;f.loadJS(r,function(){shaka.polyfill.installAll(),e.apply(i)})}.call(this,function(){(this._isLoadedDrm=!0),r(this,e)})))}),(t.prototype.destroy=function(e){var t;this._drm?(d.call((t=this)),this._drm.destroy().then(function(){(t._drm=null),"function"==typeof e&&e(t)})):(this._isFairPlay&&this._destroyFairPlay(),"function"==typeof e&&e(this))}),(t.prototype._destroyFairPlay=function(){b.destroyFairPlay.call(this)}),(t.prototype.dispose=function(){r.dispose.call(this),this.destroy()}),(t.prototype._switchLevel=function(e,t){if(((t=t||{}),this.trigger(S.Player.LevelSwitch),(this._switchedLevel=!0),this._isFairPlay)){this._manuallySwitchDrmLevel=!t.isAuto;var r=this.autoplay||"pause"!=this._status;this._loadByUrlInner(e,this.getCurrentTime(),r,!0)}else if(t.isAuto)this._drm.configure({abr:{enabled:!0}}),h(this._player,this._drm);else{for(var i,n=this._drm.getVariantTracks(),o=0;o<n.length;o++){var a=n[o];if(Number(a.bandwidth)===Number(t.bitrate)&&Number(a.height)===Number(t.resolution.split("x")[1])){i=a;break}}console.log("find track",i),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(i,!this._options.seamlessHandover)}var s=this;setTimeout(function(){s.trigger(S.Player.LevelSwitched),(this._switchedLevel=!1)},1e3)}),(t.prototype._getDRMEncryptItem=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source&&+i.encryption)return i}return""}),(t.prototype._getItemBySource=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source)return i}return""}),(s=function(n,r){r.addEventListener("error",function(e){var t=n,e=e.detail,r="Error code:"+e.code+"message:"+e.message,i=(console.log(r),_.ErrorCode.OtherError),r=m.get("Error_Play_Text");e.code==shaka.util.Error.Code.EXPIRED?function(){var t=this,e=(this.trigger(S.Private.H5_Loading_Show),null);this._options.isLive||(e=this.getCurrentTime());var r,i=!this.paused(),n=this._drm.getConfiguration().abr.enabled;if(!n)for(var o=this._drm.getVariantTracks(),a=0;a<o.length;a++)if(o[a].active){r=o[a].id;break}var s={startTime:e,continuePlay:i,prevVariant:r,isAdaptive:n};"function"==typeof this._options.refreshAccessInfo?this._options.refreshAccessInfo().then(function(e){(e=e||{}).accessKeyId&&(t._options.accessKeyId=e.accessKeyId),e.securityToken&&(t._options.securityToken=e.securityToken),e.accessKeySecret&&(t._options.accessKeySecret=e.accessKeySecret),c.call(t,s)}):c.call(t,s)}.call(t):(e.code==shaka.util.Error.Code.HTTP_ERROR?((i=_.ErrorCode.NetworkError),(r=m.get("Http_Error"))):e.code==shaka.util.Error.Code.TIMEOUT?((i=_.ErrorCode.LoadingTimeout),(r=m.get("Error_Waiting_Timeout_Text"))):e.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?((i=_.ErrorCode.DrmLicenseRequestFailed),(r=m.get("Error_Drm_License_Request_Failed"))):e.Category==shaka.util.Error.NETWORK&&((i=_.ErrorCode.NetworkError),(r=m.get("Error_Network_Text"))),setTimeout(function(){t.trigger(S.Private.Play_Btn_Hide)}),t.checkOnline()&&((i={mediaId:t._options.vid||"",error_code:i,error_msg:e.message}),t.logError(i),(i.display_msg=e.code+"|"+r),t.trigger(S.Player.Error,i)))}),r.addEventListener("variantchanged",function(e){console.log("DRM Event: variantchanged",e)}),r.addEventListener("abrstatuschanged",function(e){console.log("DRM Event: abrstatuschanged",e)}),r.addEventListener("drmsessionupdate",function(e){console.log("DRM Event: drmsessionupdate",e),d.call(n)}),r.addEventListener("expirationupdated",function(e){console.log("DRM Event: expirationupdated",e),console.log("Exp:",this.getExpiration())}),r.addEventListener("adaptation",function(e){console.log("adaptation",e),h(n,r)}),r.addEventListener("trackschanged",function(e){console.log("DRM EVENT: trackschanged",r.getTextLanguages(),r.getTextTracks());var t=r.getTextLanguages();t&&t.length&&((t=(function(e){var t={subtitle:"subtitles",caption:"captions"},r=(console.log("Building track config"),e.getManifest().textStreams||[]),i=(console.log("textStreams",r),e.getTextLanguages()),n=(console.log("languageList",i),[]);try{r.forEach(function(e){i.includes(e.language)&&n.push({kind:t[e.kind]||e.kind,label:e.label,srclang:e.language,src:Array.from(e.segmentIndex)[0].getUris()[0]})})}catch(e){console.log("error in retrieving text track url: ",e)}return n})(r)),n.trigger(S.Private.TextTrackFounded,{from:"drm",textTracks:t}),n.trigger(S.Private.CCReset))})}))}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/dom":32,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":70,"../saas/drm":107}],98:[function(e,t,r){var i=e("../base/player"),n=e("./drminjector"),o=i.extend({init:function(e,t){n.inject(this,o,i.prototype,t,function(e){}),(t._native=!1),i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./drminjector":97}],99:[function(e,t,r){var i=e("../../ui/component"),n=e("../../lib/data"),o=e("../../lib/ua"),a=e("../../lib/constants"),s=e("../../lib/dom"),l=e("../../lib/object"),c=e("../../config"),u=e("../../lang/index"),p=e("../../lib/playerutil"),d=e("../../lib/util"),h=e("../../ui/component/info-display"),f=e("../../ui/component/error-display"),y=e("../../feature/autoPlayDelay"),_=e("../../commonui/autostreamselector"),g=e("../base/event/eventtype"),v=e("../saas/ststoken"),e=i.extend({init:function(e,t){var r;void 0===t.skinLayout&&(t.skinLayout=p.defaultFlashLayout),i.call(this,this,t),(this._id="prism-player-"+n.guid()),(this.tag=e),(this._el=this.tag),(this._childrenUI=[f]),this.initChildren(),(this.id=this._id),(window[this.id]=this),u.setCurrentLanguage(this._options.language,"flash",this._options.languageTexts),d.openInFile()?((t={mediaId:this._options.vid||"",error_code:a.ErrorCode.FormatNotSupport,error_msg:u.get("Open_Html_By_File","flash")}),this.trigger(g.Private.Error_Show,t)):o.IS_MOBILE?this.trigger(g.Private.Error_Show,{mediaId:this._options.vid||"",error_code:a.ErrorCode.FormatNotSupport,error_msg:u.get("Cant_Use_Flash_On_Mobile","flash")}):(this._options.vid&&this._options.accessKeyId&&this._options.securityToken&&this._options.accessKeySecret?v.getPlayAuth((r=this)._options,function(e){(r._options.playauth=e),r._createPlayer()},function(e){var t={mediaId:r._options.vid,error_code:e.Code,error_msg:e.Message};e.sri&&(t.sri=e.sri),(t.display_msg=e.display_msg),r.trigger(g.Private.Error_Show,t)},"flash"):this._createPlayer(),(this._status="init"))},_createPlayer:function(){var e,t;this._options.autoPlayDelay?((t=new y(this)),(e=this),t.handle(function(){(e._options.autoplay=!0),e._initPlayer(),(e._childrenUI=[h,_]),e.initChildren()})):(this._initPlayer(),(this._childrenUI=[h,_]),this.initChildren()),o.HAS_FLASH||((t=u.get("Flash_Not_Ready","flash")),this.trigger(g.Private.Info_Show,{text:t,align:"tc",isBlack:!1}))},_initPlayer:function(){var e="//"+c.domain+"/de/prismplayer-flash/"+c.flashVersion+"/PrismPlayer.swf",t=(this._options.playerSwfPath?(e=this._options.playerSwfPath):c.domain?-1<c.domain.indexOf("localhost")&&(e="//"+c.domain+"/build/flash//PrismPlayer.swf"):(e="de/prismplayer-flash/"+c.flashVersion+"/PrismPlayer.swf"),this._comboFlashVars()),r=this._options.wmode||"opaque";this.tag.innerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=5,0,0,0" width="100%" height="100%" id="'+this.id+'"><param name=movie value="'+e+'"><param name=quality value=High><param name="FlashVars" value="'+t+'"><param name="WMode" value="'+r+'"><param name="AllowScriptAccess" value="always"><param name="AllowFullScreen" value="true"><param name="AllowFullScreenInteractive" value="true"><embed name="'+this.id+'" src="'+e+'" quality=high pluginspage="//www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" width="100%" height="100%" AllowScriptAccess="always" AllowFullScreen="true" AllowFullScreenInteractive="true" WMode="'+r+'" FlashVars="'+t+'"></embed></object>'},_getPlayer:function(e){return-1!=navigator.appName.indexOf("Microsoft")?document.getElementById(e):document[e]},_getLowerQualityLevel:function(){var e,t=this._getVideoUrls();return t&&((e=t.Urls),(t=t.index),!((e&&0==e.length)||-1==t))&&0<t?{item:e[t-1],index:t-1}:""},_comboFlashVars:function(){var e=encodeURIComponent(o.getReferer()),t=o.getHref(),r=encodeURIComponent(t),i="",t=(t&&(i=o.getHost(t)),this._options),e={autoPlay:t.autoplay?1:0,isInner:0,actRequest:1,vid:t.vid,diagnosisButtonVisible:t.diagnosisButtonVisible?1:0,domain:t.domain||"//tv.taobao.com",statisticService:t.statisticService||c.logReportTo,videoInfoService:t.videoInfoService||"/player/json/getBaseVideoInfo.do",disablePing:t.trackLog?0:1,namespace:this.id,barMode:0!=t.barMode?1:0,isLive:t.isLive?1:0,waterMark:t.waterMark,environment:t.environment,vurl:t.source?encodeURIComponent(t.source):"",plugins:t.plugins||"",snapShotShow:t.snapshot?1:0,accessId:t.accId||"",accessKey:t.accSecret||"",apiKey:t.apiKey||"",flashApiKey:t.flashApiKey||"",disableSeek:t.disableSeek?1:0,disableFullScreen:t.disableFullScreen?1:0,stsToken:t.stsToken||"",domainRegion:t.domainRegion||"",authInfo:t.authInfo?encodeURIComponent(t.authInfo):"",playDomain:t.playDomain||"",stretcherZoomType:t.stretcherZoomType||"",playauth:t.playauth?t.playauth.replace(/\+/g,"%2B"):"",prismType:t.prismType||0,formats:t.formats||"",notShowTips:t.notShowTips?1:0,showBarTime:t.showBarTime||0,showBuffer:0==t.showBuffer?0:1,rePlay:t.rePlay?1:0,encryp:t.encryp||"",secret:t.secret||"",mediaType:"video",logInfo:{ud:o.getHost(t.source),os:o.os.name,ov:o.os.version||"",et:o.browser.name,ev:o.browser.version||"",uat:o.USER_AGENT,r:e,pu:r,app_n:i}},n=[];return(void 0!==t.rtmpBufferTime&&(e.rtmpBufferTime=t.rtmpBufferTime),t.cover&&(e.cover=t.cover),t.extraInfo&&(e.extraInfo=encodeURIComponent(JSON.stringify(t.extraInfo))),e.logInfo&&(e.logInfo=encodeURIComponent(JSON.stringify(e.logInfo))),(e.languageData=encodeURIComponent(JSON.stringify(u.getLanguageData("flash")))),(e.language=u.getCurrentLanguage()),l.each(e,function(e,t){n.push(e+"="+t)}),n.join("&"))},initChildren:function(){for(var e=this._childrenUI.length,t=0;t<e;t++){var r=new this._childrenUI[t](this,this._options),i=r.el();(i.id=r.id()),this.contentEl().appendChild(i),r.bindEvent()}var n=document.querySelector("#"+this._options.id+" .prism-info-display");s.css(n,"display","none")},flashReady:function(){(this.flashPlayer=this._getPlayer(this.id)),(this._isReady=!0);var e=this._options.skinRes,t=this._options.skinLayout;if(!1!==t&&!l.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");if("string"!=typeof e)throw new Error("PrismPlayer Error: skinRes should be string!");(e=0!=t&&0!==t.length&&{skinRes:e,skinLayout:t}),this.flashPlayer.setPlayerSkin(e),this.trigger("ready");var r=this;window.addEventListener("beforeunload",function(){try{r.flashPlayer.setPlayerCloseStatus()}catch(e){}})},jsReady:function(){return!0},snapshoted:function(e){var t=d.toBinary(e),e="data:image/jpeg;base64,"+e;this.trigger("snapshoted",{time:this.getCurrentTime(),base64:e,binary:t})},uiReady:function(){(this._status="ready"),this.trigger("uiReady")},loadedmetadata:function(){"ended"!=this._status&&((this._status="loading"),this.trigger("loadedmetadata"))},onPlay:function(){(this._status="play"),this.trigger("play"),this._clearTimeoutHandle(),this.trigger(g.Private.AutoStreamHide)},onEnded:function(){this._clearTimeoutHandle(),(this._status="ended"),this.trigger("ended")},onPause:function(){(this._status="pause"),this._clearTimeoutHandle(),this.trigger(g.Private.AutoStreamHide),this.trigger("pause")},onBulletScreenReady:function(){this.trigger("bSReady")},onBulletScreenMsgSend:function(e){this.trigger("bSSendMsg",e)},onVideoRender:function(e){this._clearTimeoutHandle(),this.trigger("videoRender"),this.trigger("canplay",{loadtime:e})},onVideoError:function(e){this._clearTimeoutHandle(),(this._status="error"),this.trigger("error",{errortype:e})},onM3u8Retry:function(){this.trigger("m3u8Retry")},hideBar:function(){this.trigger("hideBar")},showBar:function(){this.trigger("showBar")},liveStreamStop:function(){this.trigger("liveStreamStop")},stsTokenExpired:function(){(this._status="error"),this.trigger("stsTokenExpired")},onVideoBuffer:function(){var e;"pause"!=this._status&&((this._status="waiting"),this.trigger("waiting"),this._clearTimeoutHandle(),((e=this)._checkTimeoutHandle=setTimeout(function(){e.trigger(g.Private.AutoStreamShow)},1e3*this._options.loadDataTimeout)),this._checkVideoStatus())},startSeek:function(e){this.trigger("startSeek",e)},completeSeek:function(e){this.trigger("completeSeek",e)},_invoke:function(){var e=arguments[0],t=arguments;if((Array.prototype.shift.call(t),!this.flashPlayer))throw new Error("PrismPlayer Error: flash player is not ready\uff0cplease use api after ready event occured!");if("function"!=typeof this.flashPlayer[e])throw new Error("PrismPlayer Error: function "+e+" is not found!");return this.flashPlayer[e].apply(this.flashPlayer,t)},play:function(){this._invoke("playVideo")},replay:function(){this._invoke("replayVideo")},pause:function(){this._invoke("pauseVideo")},stop:function(){this._invoke("stopVideo")},seek:function(e){this._invoke("seekVideo",e)},getCurrentTime:function(){return this._invoke("getCurrentTime")},getDuration:function(){return this._invoke("getDuration")},getStatus:function(){return this._status},_getVideoUrls:function(){var e=this._invoke("getVideoUrls"),t=[];if(e&&e.Urls)for(var r=0;r<e.Urls.length;r++){var i=e.Urls[r].value,n=i.desc.indexOf("_"),o=u.get(i.definition,"flash");(i.desc=0<n?o+"_"+i.height:o),t.push(i)}return{Urls:t,index:e.index}},_getVideoStatus:function(){return this._invoke("getVideoStatus")},_checkVideoStatus:function(){var r;this.flashPlayer&&!this._checkVideoStatusHandler&&((r=this),(function t(){r._checkVideoStatusHandler=setTimeout(function(){var e=r._getVideoStatus();"playing"==e.videoStatus&&"bufferFull"==e.bufferStatus?((r._status="playing"),r._clearTimeoutHandle()):"videoPlayOver"==e.videoStatus&&((r._status="ended"),r._clearTimeoutHandle()),t()},500)})())},_clearTimeoutHandle:function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),(this._checkTimeoutHandle=null))},_changeStream:function(e){return this._invoke("changeStream",e)},mute:function(){this.setVolume(0)},unMute:function(){this.setVolume(0.5)},getVolume:function(){return this._invoke("getVolume")},setVolume:function(e){this._invoke("setVolume",e)},loadByVid:function(e){this._invoke("loadByVid",e,!1)},loadByUrl:function(e,t){this._invoke("loadByUrl",e,t)},dispose:function(){this._clearTimeoutHandle(),this._checkVideoStatusHandler&&(clearTimeout(this._checkVideoStatusHandler),(this._checkVideoStatusHandler=null)),this._invoke("pauseVideo");var e=this;setTimeout(function(){e.off("completeSeek"),e.off("startSeek"),e.off("stsTokenExpired"),e.off("liveStreamStop"),e.off("showBar"),e.off("hideBar"),e.off("m3u8Retry"),e.off("error"),e.off("canplay"),e.off("pause"),e.off("ended"),e.off("play"),e.off("loadedmetadata"),e.off("snapshoted"),e.off("uiReady"),e.off("ready"),(e.flashPlayer=null),e._el&&(e._el.innerHTML="")})},showBSMsg:function(e){this._invoke("showBSMsg",e)},setToastEnabled:function(e){this._invoke("setToastEnabled",e)},setLoadingInvisible:function(){this._invoke("setLoadingInvisible")},setPlayerSize:function(e,t){(this._el.style.width=e),(this._el.style.height=t)}});t.exports=e},{"../../commonui/autostreamselector":11,"../../config":14,"../../feature/autoPlayDelay":17,"../../lang/index":23,"../../lib/constants":28,"../../lib/data":30,"../../lib/dom":32,"../../lib/object":42,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../../ui/component":130,"../../ui/component/error-display":135,"../../ui/component/info-display":138,"../base/event/eventtype":70,"../saas/ststoken":114}],100:[function(e,t,r){var a=e("../../lib/io"),c=e("../../config"),u=e("../../lib/constants"),p=e("../../lib/util"),d=e("../../lib/playerutil"),h=e("../../lib/ua"),f=e("../../lang/index"),y=e("../base/event/eventtype");t.exports.inject=function(e,t,r,i,s,n){var l,o=i.source;(!n&&((i=o),e._flv||!d.isFlv(i)))||((e._Type=t),(e._superType=r),(e._superPt=r.prototype),(e._disposed=!1),(t.prototype._checkFlvReady=function(){if(null==e._flv)throw new Error("please invoke this method after ready event");}),(e._isFlv=!0),(e._flv=null),(e._isLoadedFlv=!1),(e._originalUrl=""),(t.prototype.play=function(e){this._checkFlvReady(),(this._isManualPlay=e||!1);return(this.trigger(y.Private.Cover_Hide),this._options.isLive&&e?this._loadByUrlInner(this._options.source,0,e):this.tag.ended||this._ended?this.replay():(0==this._seeking&&((e=0),this.tag.ended||this._ended||(0==(e=this.getCurrentTime())&&(e=-1)),-1!=e)&&this.seek(e),this.tag.paused&&(this._hasLoaded||this._flv.load(),this._flv.play())),this)}),(t.prototype.seek=function(e){this._checkFlvReady(),(this._seeking=!0);var t=this.getDuration();t<=(e=Math.floor(e))&&(e=t);try{this._flv.currentTime=e}catch(e){console.log(e)}return this}),(t.prototype.pause=function(e){return(this._checkFlvReady(),(this._isManualPause=e||!1),this._flv.pause(),this)}),(t.prototype.getProgramDateTime=function(){var e;return(this._checkFlvReady(),this._metadata?((e=(e=this._flv.getFirstSample())&&e.pts?e.pts:0),console.log("\u63a8\u6d41\u65f6\u95f4\uff1a"+this._metadata.NtpTime),console.log("\u9996\u5e27PTS\uff1a"+e),this._metadata.NtpTime+e):"")}),(t.prototype.initPlay=function(e){var t;function r(t,e){var r,i=!t._flv,n=(t._destroyFlv(),t._options.isLive),o={isLive:n,enableWorker:t._options.enableWorker,stashInitialSize:2048},a=(h.IS_IE11&&(o.enableWorker=!1),{type:"flv",isLive:n,url:t._options.source});for(r in(n?((o.enableStashBuffer=t._options.enableStashBufferForFlv),(stashInitialSize=t._options.stashInitialSizeForFlv),(o.autoCleanupSourceBuffer=!1)):(o.lazyLoadMaxDuration=600),t._options.isLive&&(t._options.flvFrameChasing&&(o.flvFrameChasing=t._options.flvFrameChasing),t._options.chasingFirstParagraph&&(o.chasingFirstParagraph=t._options.chasingFirstParagraph),t._options.chasingSecondParagraph&&(o.chasingSecondParagraph=t._options.chasingSecondParagraph),t._options.chasingFirstSpeed&&(o.chasingFirstSpeed=t._options.chasingFirstSpeed),t._options.chasingSecondSpeed)&&(o.chasingSecondSpeed=t._options.chasingSecondSpeed),t._options.flvOption))"cors"==r||"hasAudio"==r||"withCredentials"==r||"hasVideo"==r||"type"==r?(a[r]=t._options.flvOption[r]):(o[r]=t._options.flvOption[r]);(t._originalUrl=t._options.source),(flvjs.LoggingControl.enableAll=t._options.debug),(t._flv=flvjs.createPlayer(a,o)),l(t,t._flv),t._flv.on(flvjs.Events.MEDIA_INFO,function(e){t._metadata=e.metadata}),t._flv.on(flvjs.Events.METADATA_ARRIVED,function(e){e&&e.dataContent&&e.dataContent.length&&t.trigger(y.Private.SeiFrame,{dataContent:e.dataContent,pts:e.pts})}),t._flv.attachMediaElement(t.tag),t._initPlayBehavior(e)&&((t._options.preload||t._options.autoplay)&&((t._hasLoaded=!0),t._flv.load()),t._options.autoplay&&!t.tag.paused&&t._flv.play(),s&&s(t._flv),i)&&(t._executeReadyCallback(),t._urls)&&0<t._urls.length&&!t._options.defaultDefinition&&((t._currentPlayIndex=d.findSelectedStreamLevel(t._urls)),(n=t._urls[t._currentPlayIndex]),(t._options.source=n.Url),t.trigger(y.Private.SourceLoaded,n))}h.browser.safari&&this.trigger(y.Private.Snapshot_Hide),p.contentProtocolMixed(o)?(((t={mediaId:this._options.vid||"",error_code:u.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=f.get("Request_Block_Text")),this.trigger(y.Player.Error,t)):(that=this)._isLoadedFlv&&"undefined"!=typeof Hls?setTimeout(function(){r(that,e)},1e3):(this.trigger(y.Private.H5_Loading_Show),function(e,t){var r="aliplayer-flv-min.js",i="",i=c.domain?"https://"+c.domain+"/de/prismplayer/"+c.h5Version+"/flv/"+r:"/build/flv/"+r,n=this;a.loadJS(i,function(){e.apply(n)})}.call(that,function(){(this._isLoadedFlv=!0),r(this,e)},this._options.debug))}),(t.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(e){console.log(e)}(this.loaded=!1),(this._hasLoaded=!1),(this._flv=null)}),(t.prototype.dispose=function(){this._disposed||((this._disposed=!0),this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&((t.prototype.play=this._superPt.play),(t.prototype.pause=this._superPt.pause),(t.prototype.initPlay=this._superPt.initPlay),(t.prototype.seek=this._superPt.seek),(t.prototype.canSeekable=this._superPt.canSeekable)))}),(t.prototype.canSeekable=function(e){var t=this._flv.mediaInfo;return!(!this._flv._isTimepointBuffered(e)&&t&&!t.hasKeyframesIndex)}),(l=function(s,e){var l=!1;e.on(flvjs.Events.ERROR,function(e,t,r){var i,n,o=u.ErrorCode.OtherError,a=f.get("Error_Play_Text");e!==flvjs.ErrorTypes.BUFFER_FULL&&(t==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(e=s.getOptions().source)||(0!=e.toLowerCase().indexOf("http://")&&0!=e.toLowerCase().indexOf("https://"))?((o=u.ErrorCode.InvalidSourceURL),(a=f.get("Error_Invalidate_Source_Widthout_Protocal")),(l=!0)):(a=navigator.onLine?((o=u.ErrorCode.RequestDataError),f.get("Maybe_Cors_Error")):((o=u.ErrorCode.NetworkError),f.get("Error_Network_Text"))):t==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?"404"==r.code?((o=u.ErrorCode.NotFoundSourceURL),(a=f.get("Error_Not_Found"))):"403"==r.code?((o=u.ErrorCode.AuthKeyExpired),(a=f.get("Error_AuthKey_Text")),(l=!0)):((o=u.ErrorCode.NetworkError),(a=f.get("Error_Network_Text"))):t==flvjs.ErrorDetails.NETWORK_TIMEOUT?((o=u.ErrorCode.LoadingTimeout),(a=f.get("Error_Waiting_Timeout_Text"))):(t!=flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED&&t!=flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED)||((o=u.ErrorCode.FormatNotSupport),(a=f.get("Error_H5_Not_Support_Text")),(l=!0)),(e=function(){var e;setTimeout(function(){s.trigger(y.Private.Play_Btn_Hide)}),s.checkOnline()&&((e={mediaId:s._options&&s._options.vid?s._options.vid:"",error_code:o,error_msg:r.msg}),s.logError(e),(e.display_msg=a),c.cityBrain&&(s.flv=null),s.trigger(y.Player.Error,e))}),s._options&&s._options.isLive&&!l?(i=s._options).liveRetry>s._liveRetryCount?(0==s._liveRetryCount&&s.trigger(y.Player.OnM3u8Retry),(n=i.liveRetryInterval+i.liveRetryStep*s._liveRetryCount),s._liveRetryCount++,setTimeout(function(){s._loadByUrlInner(i.source)},1e3*n)):(s._liveErrorHandle&&clearTimeout(s._liveErrorHandle),s.trigger(y.Player.LiveStreamStop),(s._liveErrorHandle=setTimeout(e,500))):t===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&11===r.code&&s.getCurrentTime()<s.getDuration()?(s._flv.unload(),s._flv.load(),s._flv.detachMediaElement(),s._flv.attachMediaElement(s.tag)):l?(s._flv.unload(),e()):s._reloadForVod()||e())})}))}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":70}],101:[function(e,t,r){var i=e("../base/player"),n=e("./flvinjector"),o=i.extend({init:function(e,t){n.inject(this,o,i,t,function(e){}),(t._native=!1),i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./flvinjector":100}],102:[function(e,t,r){var u=e("../../lib/io"),p=e("../../config"),d=e("../../lib/constants"),h=e("../../lib/util"),f=e("../../lib/playerutil"),y=e("../../lib/ua"),_=e("../../lang/index"),g=e("../base/event/eventtype"),v=e("../../lib/hls/hlsparse");function m(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),(this._hls=null))}t.exports.inject=function(e,t,r,i,n,l){e._hls2=!1;var o,a,s=i.source,c=i.useHlsPluginForSafari,i=i.useHlsPlugOnMobile;(n||l||((o=s),(c=c),(i=i),!e._hls&&f.isHls(o)&&(!f.canPlayHls()||f.isSafariUsedHlsPlugin(c)||(i&&f.isUsedHlsPluginOnMobile()))))&&((e._Type=t),(e._superType=r),(e._superPt=r.prototype),(e._disposed=!1),(t.prototype._checkHlsReady=function(){if(null==e._hls)throw new Error("please invoke this method after ready event");}),(e._isHls=!0),(e._hls=null),(e._isLoadedHls=!1),(e._stopLoadAsPaused=!0),(e._sce_dlgtqred_saved=n),(t.prototype.play=function(e){this._checkHlsReady(),(this._isManualPlay=e||!1);return(this.trigger(g.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||((this._loadSourced=!0),(this._options._autoplay=!0),this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&((e=this.getCurrentTime()),this._hls.startLoad(e)),this)}),(t.prototype.replay=function(){return(this._monitor&&this._monitor.replay(),this._hls.startLoad(0),this.tag.play(),this)}),(t.prototype.pause=function(e){return(this.tag&&(this._checkHlsReady(),this.tag.pause(),this._stopLoadAsPaused)&&this._hls.stopLoad(),(this._isManualPause=e||!1),this)}),(t.prototype.stop=function(){return(this._checkHlsReady(),this.tag.setAttribute("src",null),this._hls.stopLoad(),this)}),(t.prototype.seek=function(e){this._checkHlsReady();try{this._superPt.seek.call(this,e),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(e)}catch(e){console.log(e)}return this}),(t.prototype.getProgramDateTime=function(){if((this._checkHlsReady(),-1==this._hls.currentLevel))return"";var e=this._hls.currentLevel,e=this._hls.levels[e].details;if(e){e=e.programDateTime;if((console.log("ProgramDateTime="+e),e))return new Date(e).valueOf()}return 0}),(t.prototype.getCurrentPDT=function(){var e,t;return(this._checkHlsReady(),-1==this._hls.currentLevel?"":(e=(t=this._hls.streamController.fragPlaying||{}).pdt)?((t=1e3*t.startPTS),e+(1e3*this.getCurrentTime()-t)):0)}),(t.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(g.Player.OnM3u8Retry),this._liveRetryCount++}),(t.prototype._switchLevel=function(e){var t=this.getCurrentTime(),r=!this._qualityService.levels.length&&1<this._urls.length,i=(r&&(this.pause(),this._hls.stopLoad(),this._hls.detachMedia(),this._hls.destroy()),this.trigger(g.Player.LevelSwitch),this._hls.levels),n=!0;r&&this._loadByUrlInner(e,t,n,!0);for(var o=0;o<i.length;o++)if(i[o].url==e||i[o].url[0]==e){(n=!1),this._hls2&&this._options.seamlessHandover?((this._hls.loadLevel=o),console.log("Seamlessly set nextLevel to",o)):((this._hls.currentLevel=o),console.log("Immediately set currentLevel to",o));break}n&&(this._hls.currentLevel=-1),(this._switchedLevel=!0);var a=this;setTimeout(function(){a.trigger(g.Player.LevelSwitched),(this._switchedLevel=!1)},1e3)}),(t.prototype._getHlsVersion=function(i){var n,o,a;function s(e,t){var r=this.getOptions()||{},r={mediaId:r.vid||"",mediaAuth:r.mediaAuth||"",error_code:d.ErrorCode.LoadedMetadata,error_msg:_.get("Error_Play_Text")},t=Number(t);404===t?((r.error_code=d.ErrorCode.NotFoundSourceURL),(r.error_msg=_.get("Error_Not_Found"))):403===t?e===v.ERROR_REGION_BLOCK?((r.error_code=d.ErrorCode.RegionBlock),(r.error_msg=_.get("Error_Region_Block_Text"))):((r.error_code=d.ErrorCode.AuthKeyExpired),(r.error_msg=_.get("Error_AuthKey_Text"))):0===t&&navigator.onLine?((r.error_code=d.ErrorCode.RequestDataError),(r.error_msg=r.error_msg+"\uff0c"+_.get("Maybe_Cors_Error"))):(r.error_msg=_.get("Error_Load_M3U8_Failed_Text")),this.logError(r),(r.display_msg=r.error_msg),this.trigger(g.Player.Error,r)}!0===this._options.useHls2?((this._hls2=!0),i()):!1===this._options.useHls2||!this._options.isLive||l?i():this._options.lowLatencyMode?((this._hls2=!0),i()):((n=this),(o=new v()),(a=n._options.source),o.load(a,function(e){var t,r;e.levels&&0!==e.levels.length?(t=e.levels[0].url):((t=a),(r=e.string)),o.loadMediaPlaylist({url:t,string:r},function(e){e&&(n._hls2="number"==typeof e.partTarget),i()},s.bind(n))},s.bind(n)))}),(t.prototype.initPlay=function(t){var e,r;function i(s,t){if(s._antiRecord&&(console.log("Manual check before load source"),s._antiRecord.check()))return;var e,r=!s._hls,i=(s._destroyHls(),{xhrSetup:function(e,t){e.withCredentials=s._options.withCredentials||!1}}),n=s._options.loadingTimeOut||s._options.hlsLoadingTimeOut;for(e in(n&&((i.manifestLoadingTimeOut=n),(i.levelLoadingTimeOut=n),(i.fragLoadingTimeOut=n)),s._options.liveSyncDurationCount&&(i.liveSyncDurationCount=s._options.liveSyncDurationCount),s._options.defaultBandwidth&&(i.defaultBandwidth=s._options.defaultBandwidth),s._options.isLive&&(s._options.hlsFrameChasing&&(i.hlsFrameChasing=s._options.hlsFrameChasing),s._options.chasingFirstParagraph&&(i.chasingFirstParagraph=s._options.chasingFirstParagraph),s._options.chasingSecondParagraph&&(i.chasingSecondParagraph=s._options.chasingSecondParagraph),s._options.chasingFirstSpeed&&(i.chasingFirstSpeed=s._options.chasingFirstSpeed),s._options.chasingSecondSpeed)&&(i.chasingSecondSpeed=s._options.chasingSecondSpeed),!s._hls2||(s._options.isLive&&!y.IS_IE11&&((i.backBufferLength=12),(i.liveDurationInfinity=!0))),s._options.nudgeMaxRetry&&(i.nudgeMaxRetry=s._options.nudgeMaxRetry),s._options.maxMaxBufferLength&&(i.maxMaxBufferLength=s._options.maxMaxBufferLength),s._options.maxBufferSize&&(i.maxBufferSize=s._options.maxBufferSize),s._options.fragLoadingRetryDelay&&(i.fragLoadingRetryDelay=s._options.fragLoadingRetryDelay),s._options.maxBufferLength&&(i.maxBufferLength=s._options.maxBufferLength),s._options.hlsBandWidthUpCacheTime&&(i.abrBandWidthUpCacheTime=s._options.hlsBandWidthUpCacheTime),s._options.seamlessHandover&&(i.seamlessHandover=s._options.seamlessHandover),s._options.accessKeyId&&(i.accessKeyId=s._options.accessKeyId),s._options.accessKeySecret&&(i.accessKeySecret=s._options.accessKeySecret),s._options.securityToken&&(i.securityToken=s._options.securityToken),s._options.app&&(i.app=s._options.app),s._options.stream&&(i.stream=s._options.stream),s._options.domain&&(i.domain=s._options.domain),s._options.regionId&&(i.regionId=s._options.regionId),s._sce_dlgtqred_saved&&(i._sce_dlgtqredxx=s._sce_dlgtqred_saved),(i.enableWorker=s._options.enableWorker),(i.debug=s._options.debug),(s._stopLoadAsPaused=s._options.hlsOption.stopLoadAsPaused),s._options.hlsOption))i[e]=s._options.hlsOption[e];y.IS_IE11&&(i.enableWorker=!1),(s._hls=new Hls(i)),a(s,s._hls),(s._loadSourced=!1),("function"==typeof s._options.p2pinit?s._options.p2pinit(s._hls):function(){}()),s._hls.attachMedia(s.tag),s._hls.on(Hls.Events.INIT_PTS_FOUND,function(e,t){s._initPTS=t.initPTS}),s._hls.on(Hls.Events.FRAG_PARSING_USERDATA,function(e,t){t&&t.dataContent&&t.dataContent.length&&s.trigger(g.Private.SeiFrame,{dataContent:t.dataContent,pts:t.pts})}),s._hls.on(Hls.Events.MEDIA_ATTACHED,function(){var e;s._hls.on(Hls.Events.MANIFEST_PARSED,function(){s._initPlayBehavior(t||s._loadSourced)}),s._hls.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(e,t){s.trigger(g.Player.AudioTrackUpdated,t)}),s._hls.on(Hls.Events.MANIFEST_LOADED,function(e,t){s.trigger(g.Player.LevelsLoaded,t)}),s._hls.on(Hls.Events.LEVEL_SWITCHED,function(e,t){if(s._qualityService){for(var r=s._hls.levels[t.level].url,i=s._qualityService.levels,n="",o="",a=0;a<i.length;a++)if(i[a].Url==r){(o=i[a].desc),(n=i[a].bitrate);break}(o||n)&&s.trigger(g.Private.QualityChange,{levelSwitch:!0,url:r,bitrate:n,desc:o})}}),s._hls.on(Hls.Events.AUDIO_TRACK_SWITCH,function(e,t){s.trigger(g.Player.AudioTrackSwitch,t),setTimeout(function(){s.trigger(g.Player.AudioTrackSwitched,t)},1e3)}),(s._options.autoplay||s._options.preload||t)&&((s._loadSourced=!0),s._levels&&1<s._levels.length?(s._hls.trigger(Hls.Events.MANIFEST_LOADING,{}),s._hls.trigger(Hls.Events.MANIFEST_LOADED,{levels:s._levels})):s._hls.loadSource(s._options.source||"__INVALID__")),r?(s._executeReadyCallback(),s._urls&&0<s._urls.length&&!s._options.defaultDefinition&&((s._currentPlayIndex=f.findSelectedStreamLevel(s._urls)),(e=s._urls[s._currentPlayIndex]),(s._options.source=e.Url),s.trigger(g.Private.SourceLoaded,e))):s.trigger(g.Private.H5_Loading_Show)})}this.trigger(g.Private.H5_Loading_Show),h.contentProtocolMixed(s)?(((e={mediaId:(e=this.getOptions()||{}).vid||"",mediaAuth:e.mediaAuth||"",error_code:d.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=_.get("Request_Block_Text")),this.trigger(g.Player.Error,e)):(r=this)._isLoadedHls&&"undefined"!=typeof Hls?i(this,t):(this.trigger(g.Private.H5_Loading_Show),this._getHlsVersion(function(e){!function(e,t){var r="aliplayer-hls-min.js",t=((t=t||{}).hls2&&(r="aliplayer-hls2-min.js"),""),t=p.domain?"https://"+p.domain+"/de/prismplayer/"+p.h5Version+"/hls/"+r:"/build/hls/"+r,i=this;u.loadJS(t,function(){e.apply(i)})}.call(r,function(){(r._isLoadedHls=!0),i(r,t)},{debug:r._options.debug,hls2:r._hls2})}),this.on("error",m))}),(t.prototype._getbwEstimator=function(){var e,t=NaN;return(t=this._hls?(e=this._hls.abrController._bwEstimator)?e.getEstimate():NaN:t)}),(t.prototype._destroyHls=function(){this._hls&&this._hls.destroy(),(this._hls=null)}),(t.prototype.dispose=function(){this._disposed||((this._disposed=!0),this._superPt&&this._superPt.dispose.call(this),this._destroyHls(),this._superPt&&((t.prototype.play=this._superPt.play),(t.prototype.pause=this._superPt.pause),(t.prototype.initPlay=this._superPt.initPlay),(t.prototype.replay=this._superPt.replay),(t.prototype.stop=this._superPt.stop),(t.prototype.seek=this._superPt.seek)))}),(a=function(c,u){u.on(Hls.Events.DEFAULT_BANDWIDTH,function(e,t){c.trigger(g.Player.DefaultBandWidth,{width:t.width,height:t.height,bitrate:t.bitrate})}),u.on(Hls.Events.ERROR,function(e,t){var r,i,n,o,a,s,l;!c._options||t.details==Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR||1==c._seeking||(0==t.fatal&&t.type!=Hls.ErrorTypes.NETWORK_ERROR)||(c._clearTimeout(),(r=d.ErrorCode.LoadedMetadata),(n=_.get("Error_Play_Text")),(l=i=!1),t.details==Hls.ErrorDetails.MANIFEST_LOAD_ERROR||t.details==Hls.ErrorDetails.LEVEL_LOAD_ERROR?((i=!0),(a=t.networkDetails),(s=Number(a.status)),c.liveShiftSerivce&&c.liveShiftSerivce.isLiveShiftPlaying()&&404===s?((r=d.ErrorCode.NotFoundSourceURL),(n=_.get("Error_Liveshift_M3U8_Not_Found_Text")),(l=!0)):(n=404===s?((r=d.ErrorCode.NotFoundSourceURL),_.get("Error_Not_Found")):403===s?(a=f.parseHttpHeaders(a)["x-tengine-error"])&&-1<d.RegionBlockMessages.indexOf(a)?((r=d.ErrorCode.RegionBlock),_.get("Error_Region_Block_Text")):((r=d.ErrorCode.AuthKeyExpired),_.get("Error_AuthKey_Text")):0===s&&navigator.onLine?((r=d.ErrorCode.RequestDataError),n+"\uff0c"+_.get("Maybe_Cors_Error")):_.get("Error_Load_M3U8_Failed_Text"))):t.details==Hls.ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details==Hls.ErrorDetails.LEVEL_LOAD_TIMEOUT?((i=!0),(n=_.get("Error_Load_M3U8_Timeout_Text"))):t.details==Hls.ErrorDetails.MANIFEST_PARSING_ERROR||t.details==Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?((i=!0),(n=_.get("Error_M3U8_Decode_Text"))):t.type==Hls.ErrorTypes.NETWORK_ERROR?((r=d.ErrorCode.NetworkError),(n=_.get("Error_Network_Text"))):(t.type!=Hls.ErrorTypes.MUX_ERROR&&t.type!=Hls.ErrorTypes.MEDIA_ERROR)||((r=d.ErrorCode.PlayDataDecode),(n=_.get("Error_TX_Decode_Text"))),(n=n+"("+t.details+")"),(o=function(){var e;c.pause(),setTimeout(function(){c.trigger(g.Private.Play_Btn_Hide)}),c.checkOnline()&&((e={mediaId:(e=c.getOptions()||{}).vid||"",mediaAuth:e.mediaAuth||"",error_code:r,error_msg:t.details}),c.logError(e),(e.display_msg=n),c.trigger(g.Player.Error,e))}),(a=function(){c._liveErrorHandle&&clearTimeout(c._liveErrorHandle),u.stopLoad(),c.trigger(g.Player.LiveStreamStop),(c._liveErrorHandle=setTimeout(o,500))}),c._options&&c._options.isLive?l?a():c._hls2?t.fatal&&a():(s=c._options).liveRetry>c._liveRetryCount?(0==c._liveRetryCount&&c.trigger(g.Player.OnM3u8Retry),(l=s.liveRetryInterval+s.liveRetryStep*c._liveRetryCount),c._liveRetryCount++,c.trigger(g.Private.H5_Loading_Show),setTimeout(function(){i&&c._loadByUrlInner(c._options.source,0,!0)},1e3*l)):a():c._reloadForVod()||o())})}))}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/hls/hlsparse":39,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":70}],103:[function(e,t,r){var i=e("../base/player"),n=e("./hlsinjector"),o=i.extend({init:function(e,t){(t._native=!1),n.inject(this,o,i,t),i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./hlsinjector":102}],104:[function(e,t,r){var l="undefined"==typeof Promise?e("es6-promise").Promise:Promise,c=e("../../lib/io"),u=e("../../config"),p=e("../../lib/constants"),d=e("../../lang/index"),h=e("../base/event/eventtype"),i=e("../../lib/ua");function f(e){var t=this._options;t.rtsFallbackSource&&window.Aliplayer?(this.trigger(h.Player.RtsFallback,{reason:e,fallbackUrl:t.rtsFallbackSource}),this.loadByUrl(t.rtsFallbackSource)):(this.trigger(h.Player.Error,e),this.logError(e))}function y(e){var n=this,t=(this.trigger(h.Private.H5_Loading_Show),this.trigger(h.Private.Play_Btn_Hide),new o(n,e));return n._rts.subscribe(n._options.source,{mediaTimeout:n._options.rtsLoadDataTimeout}).then(function(e){return(n._retryTimer&&(clearTimeout(n._retryTimer),(n._retryTimer=null)),t.preProcess(),(n.tag.srcObject=null),e.play(n.tag),!0)}).catch(function(e){var t=null,r=null;switch(Number(e.errorCode)){case 10101:(t=p.ErrorCode.RtsSignalError),(r=d.get("Rts_Err_Http_Signal_Error"));break;case 10114:(t=p.ErrorCode.RtsCreateOfferError),(r=d.get("Rts_Err_Create_Offer_Error"));break;case 10202:(t=p.ErrorCode.RtsPlayUrlError),(r=d.get("Rts_Err_Play_Url_Error"));break;case 10203:(t=p.ErrorCode.RtsSubscribeNonthing),(r=d.get("Rts_Err_Subscribe_Nonthing"));break;case 10205:var i=null==(i=e.extraInfo)?void 0:i.response;if(403===(null==i?void 0:i.status)){i=i.headers["x-tengine-error"];if(i&&-1<p.RegionBlockMessages.indexOf(i)){(t=p.ErrorCode.RegionBlock),(r=d.get("Error_Region_Block_Text"));break}}(t=p.ErrorCode.RtsHttpRequestFaild),(r=d.get("Rts_Err_Http_Request_Failed"));break;case 10206:(t=p.ErrorCode.RtsHttpAnswerFaild),(r=d.get("Rts_Err_Http_Answer_Failed"))}return f.call(n,{error_code:t,error_msg:r}),!1})}function _(){this._noDataTimer&&(clearTimeout(this._noDataTimer),(this._noDataTimer=null))}t.exports.inject=function(e,t,r,i,n,o){function a(e,t){var r,i,n;_.call(this),this._retryTimer||((e=e||p.ErrorCode.RtsPlayFailedError),(t=t||d.get("Rts_Err_Play_Failed")+", "+this._options.rtsLoadDataTimeout*(this._options.liveRetry+1)+d.get("Rts_Err_No_Data_For")),(i=(r=this)._options)?i.liveRetry>r._liveRetryCount?(0==r._liveRetryCount&&r.trigger(h.Player.OnM3u8Retry),(n=Number(i.liveRetryInterval||0)+Number(i.liveRetryStep*r._liveRetryCount||0)),r._liveRetryCount++,r.stop(),setTimeout(function(){r.trigger(h.Private.H5_Loading_Show),r.trigger(h.Private.Play_Btn_Hide)},50),(r._retryTimer=setTimeout(function(){r.trigger(h.Private.Retry,{type:"rts",source:i.source}),y.call(r,!0)},1e3*n))):(r._retryTimer&&clearTimeout(r._retryTimer),r._liveErrorHandle&&clearTimeout(r._liveErrorHandle),r.stop(),(r._liveRetryCount=0),r.trigger(h.Player.LiveStreamStop),(r._liveErrorHandle=setTimeout(s.call(this,e,t),500))):console.warn("no options!"))}function s(e,t){var r=this;r.pause(),setTimeout(function(){r.trigger(h.Private.Play_Btn_Hide)}),r.checkOnline()&&f.call(this,{error_code:e,error_msg:t})}(e._Type=t),(e._superType=r),(e._superPt=r.prototype),(e._disposed=!1),(t.prototype._checkRtsReady=function(){if(null==e._rts)throw new Error("please invoke this method after ready event");}),(e._isRts=!0),(e._rts=null),(e._isLoadedRts=!1),(e._liveErrorHandle=null),(e._retryTimer=null),(e._noDataTimer=null),(e.bind_rtsPlayEventHandler=null),(e.bind_rtsErrorEventHandler=null),(t.prototype.play=function(e){this._checkRtsReady(),(this._isManualPlay=e||!1);var t=this;return(t.trigger(h.Private.Cover_Hide),t.trigger(h.Private.Play_Btn_Hide),y.call(t).then(function(e){e&&t._startPlay()}),this)}),(t.prototype.seek=function(e){}),(t.prototype.setSpeed=function(e){}),(t.prototype.pause=function(e){return(this._checkRtsReady(),this._superPt.pause.call(this,!0),this)}),(t.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this}),(t.prototype.dispose=function(){this._disposed||((this._disposed=!0),this._superPt&&this._superPt.dispose.call(this),this._destroyRts(),this._superPt,this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),(this._liveErrorHandle=null)),this._retryTimer&&(clearTimeout(this._retryTimer),(this._retryTimer=null)),_.call(this))}),(t.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("onPlayEvent",this.bind_rtsPlayEventHandler)),(this._rts=null)}),(t.prototype.initPlay=function(e){function t(i,t){var r=!i._rts;i._destroyRts(),(i._rts=new AliRTS.createClient({customReporter:function(e){if(126===Number(e.msgid)){var t={};try{t=JSON.parse(e.args)}catch(e){t={}}t.tcid&&i._rts&&(i._rts.traceid=t.tcid)}}})),i._checkRtsSupport(function(e){!function(e){var t=this._rtsPlayEventHandler.bind(this),r=this._rtsErrorEventHandler.bind(this);(this.bind_rtsPlayEventHandler=t),(this.bind_rtsErrorEventHandler=r),e.on("onError",r),e.on("onPlayEvent",t)}.call(i,i._rts),i._options.autoplay?y.call(i).then(function(e){e&&i._initPlayBehavior(t)}):i._initPlayBehavior(t),r&&i._executeReadyCallback()},function(e){console.log("[RTS isSupport error]",e);var t=null,r=null;switch(Number(e.errorCode)){case 10110:(t=p.ErrorCode.RtsNotSupportWebRtc),(r=d.get("Rts_Err_Not_Support_Webrtc"));break;case 10111:(t=p.ErrorCode.RtsBrowserNotSupport),(r=d.get("Rts_Err_Browser_Not_Support"));break;case 10112:(t=p.ErrorCode.RtsBrowserVersionTooLow),(r=d.get("Rts_Err_Browser_Version_Too_Low"));break;case 10113:(t=p.ErrorCode.RtsNotSupportH264),(r=d.get("Rts_Err_Not_Support_H264"));break;case 10114:(t=p.ErrorCode.RtsCreateOfferError),(r=d.get("Rts_Err_Create_Offer_Error"))}return f.call(i,{error_code:t,error_msg:r}),!1})}this._isLoadedRts?t(this,e):(this.trigger(h.Private.H5_Loading_Show),function(e,t){var r="",i=this._options,r="https://g.alicdn.com/CodeBaseOne/H5RTSSdk/"+(i.rtsVersion||u.rtsVersion)+"/aliyun-rts-sdk.js",n=(i.rtsSdkUrl&&(r=i.rtsSdkUrl),this);c.loadJS(r,function(){e.apply(n)})}.call(this,function(){(this._isLoadedRts=!0),t(this,e)},this._options.debug))}),(t.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?l.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(e){var t=e[0],r=e[1],e=e[2];return{rtt:t.rtt,bytesReceived:t.bytesReceived,framesDecoded:r.framesDecoded,packetsLost:(r.packetsLost||0)+(e.packetsLost||0),packetsReceived:(r.packetsReceived||0)+(e.packetsReceived||0),timestamp:t.timestamp||Date.now()}}).catch(function(e){return console.log("ERR in RTS getstats: ",e),{}}):l.resolve()}),(t.prototype._rtsPlayEventHandler=function(e){var t="canplay",r="waiting",i="playing",n="ended",o="timeout";e.event===t?_.call(this):e.event!==r&&(e.event===i?_.call(this):(e.event!==o&&e.event!==n)||a.call(this))}),(t.prototype._checkRtsSupport=function(e,t){this._options.skipRtsSupportCheck?e():this._rts.isSupport({isReceiveVideo:!0}).then(e).catch(t)}),(t.prototype._rtsErrorEventHandler=function(e){console.log("RTS Error:",e);var t,r;switch(Number(e.errorCode)){case 10102:a.call(this);break;case 12e3:(t=p.ErrorCode.RtsPeerConnectionUnknown),(r=d.get("Rts_Err_PeerConnection_Unknown")),s.call(this,t,r)}})};var o=(function(){function e(e,t){(this.isRetry=t)&&((this.isApple=i.IS_IOS||i.IS_SAFARI),(this.player=e))}return((e.prototype.preProcess=function(){var e,t,r;this.isRetry&&this.isApple&&((e=this.player.getVolume()),(t=this.player.muted()),e)&&!t&&(((r=this.player.tag).volume=0),this.player.one("canplay",function(){r.volume=e}))}),e)})()},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/ua":49,"../base/event/eventtype":70,"es6-promise":8}],105:[function(e,t,r){var i=e("../base/player"),n=e("./rtsinjector"),o=i.extend({init:function(e,t){t.isLive&&((t._native=!1),n.inject(this,o,i,t),i.call(this,e,t))}});t.exports=o},{"../base/player":91,"./rtsinjector":104}],106:[function(e,t,r){var i=e("../../lib/constants"),e=e("../../lib/oo").extend({init:function(e){(this.player=e),(this.tickhandle=null)}});(e.prototype.tick=function(e,t){var r=this;this.tickhandle=setTimeout(function(){r.player&&r.player.trigger(i.AuthKeyExpiredEvent),t&&t()},1e3*e)}),(e.prototype.clearTick=function(e){this.tickhandle&&clearTimeout(this.tickhandle)}),(t.exports=e)},{"../../lib/constants":28,"../../lib/oo":43}],107:[function(e,t,r){function s(e,t,r){var i=u.randomUUID(),n="https://mts."+e.domainRegion+".aliyuncs.com/?",i={AccessKeyId:e.accessId,Action:"GetLicense",MediaId:e.vid,LicenseUrl:n,data:e.data,SecurityToken:e.stsToken,Format:"JSON",Type:e.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:i};e.header&&(i.Header=e.header),(n+="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(i,e.accessSecret,"POST"))),(e=u.makeUTF8sort(i,"=","&")),o.post(n,e,function(e){e?((e=JSON.parse(e)),t&&((e=e.License),t(e))):r&&r(a.createError("MPS\u83b7\u53d6License\u5931\u8d25"))},function(e){if(r){var t={Code:"",Message:h.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}r({Code:c.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}var o=e("../../lib/io"),l=(e("../../lib/ua"),e("../../lib/bufferbase64")),c=e("../../lib/constants"),u=e("./signature"),a=e("./util"),p=e("../../lib/url"),d=e("../../lib/playerutil"),h=e("../../lang/index");function f(e){window.console.error("The license request failed.")}function y(e){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",e)}function _(e){window.console.log("Decryption key was added to session.")}function g(e,t,r){r.addEventListener(e,function(){t(arguments[0])},!1)}(t.exports.requestLicenseKey=function(e){var a=e;return(a._options.vid&&(a.__vid=a._options.vid),function(e,t){var r,i,n=a._options,o=a._getDRMEncryptItem();o&&((r={vid:a.__vid,accessId:n.accId,accessSecret:n.accSecret,stsToken:n.stsToken,domainRegion:n.domainRegion,authInfo:n.authInfo,encryptionType:o.encryptionType}),o.encryptionType==c.EncryptionType.Widevine?(r.data=l.encode(e.message)):o.encryptionType==c.EncryptionType.PlayReady&&((n=l.unpackPlayReady(e.message)),(r.data=n.changange),n.header)&&(r.header=JSON.stringify(n.header)),console.log(r.data),(e=a.__licenseKeys),(i=a.__vid+o.Url),e&&e[i],s(r,function(e){a.__licenseKeys||(a.__licenseKeys={}),10<r.data.length&&(a.__licenseKeys[i]=e);e=l.decode(e);t(e)},function(e){e={mediaId:a.__vid,error_code:e.Code,error_msg:e.Message};a.logError(e),a.trigger("error",e)}))})}),(t.exports.loadCertificate=function(e,t){var r,i,n,o=new XMLHttpRequest(),a=(o.addEventListener("load",function(e,t){t=t.target;try{r=this._options.isLive?JSON.parse(t.response).Response.B64ServCert:JSON.parse(JSON.parse(t.response).DRMCertInfo).b64ServCert}catch(e){console.log(e)}var t=u.base64DecodeUint8Array(r),r=function(e,t){var r=t.target,t=t.initData,i=u.arrayToString(t).split("skd://")[1].split("?")[0],n=u.stringToArray(i);(t=(function(e,t,r){"string"==typeof t&&(t=stringToArray(t));var i=0,n=new ArrayBuffer(e.byteLength+4+t.byteLength+4+r.byteLength),o=new DataView(n),e=(new Uint8Array(n,0,e.byteLength).set(e),(i+=e.byteLength),o.setUint32(i,t.byteLength,!0),(i+=4),new Uint16Array(n,i,t.length));return(e.set(t),(i+=e.byteLength),o.setUint32(i,r.byteLength,!0),(i+=4),new Uint8Array(n,i,r.byteLength).set(r),new Uint8Array(n,0,n.byteLength))})(t,n,e)),r.webkitKeys||((function(){{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"}})(),r.webkitSetMediaKeys(new WebKitMediaKeys(keySystem)));if(!r.webkitKeys)throw"Could not create MediaKeys";n=r.webkitKeys.createSession("video/mp4",t);if(!n)throw"Could not create key session";(n.contentId=i),g("webkitkeymessage",function(e){var t=this,r=e.target,i=e.message,n=new XMLHttpRequest(),e=(e.sessionId,(n.responseType="text"),(n.session=r),n.addEventListener("load",function(e){e=e.target;t=this._options.isLive?JSON.parse(e.response).Response.B64License:JSON.parse(JSON.parse(e.response).License).b64License;var t=u.base64DecodeUint8Array(t),t=u.Uint8ArrayToString(t);"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));t=u.base64DecodeUint8Array(t);e.session.update(t)}.bind(this),!1),n.addEventListener("error",f,!1),btoa("spc="+u.base64EncodeUint8Array(i)+"&assetId="+encodeURIComponent(r.contentId))),o={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date()),SignatureNonce:u.randomUUID(),AccessKeyId:t._options.accessKeyId,SecurityToken:t._options.securityToken,CertId:t._options.certId};t._options.isLive?((o.RegionId=t._options.region),(o.Action="DescribeDRMLicense"),(o.Version="2016-11-01"),(o.CdmData=e),(o.Type="fairplay"),(o.Domain=p.parseUrl(t._options.source).hostname)):((o.region=t._options.region),(o.Action="GetDRMLicense"),(o.Version="2017-03-21"),(o.VideoId=t._options.vid),(o.CDMData=e),(o.DRMType="FairPlay"));var a,s,i="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(o,t._options.accessKeySecret,"POST"));r=t._options.isLive?"https://"+d.getLiveHostByRegion(t._options.region)+"/?"+i:"https://vod."+t._options.region+".aliyuncs.com/?"+i;for(s in(n.open("POST",r,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o)){var l;o.hasOwnProperty(s)&&((l=o[s]),(a=a?a+"&"+u.AliyunEncodeURI(s)+"="+u.AliyunEncodeURI(l):u.AliyunEncodeURI(s)+"="+u.AliyunEncodeURI(l)))}n.send(a)}.bind(this),n),g("webkitkeyadded",_,n),g("webkitkeyerror",y,n)}.bind(this,t),t=((this._fairPlayHandlers.onNeedKey=r),function(e){window.console.error("A video playback error occurred")}.bind(this));(this._fairPlayHandlers.onError=t),this.tag.addEventListener("webkitneedkey",r,!1),this.tag.addEventListener("error",t,!1),(this.tag.src=this._options.source),e&&e()}.bind(e,t),!1),o.addEventListener("error",function(e){window.console.error("Failed to retrieve the server certificate.")}.bind(e),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date()),SignatureNonce:u.randomUUID(),AccessKeyId:e._options.accessKeyId,SecurityToken:e._options.securityToken,CertId:e._options.certId}),t=(e._options.isLive?((a.RegionId=e._options.region),(a.Action="DescribeDRMCertificate"),(a.Version="2016-11-01")):((a.region=e._options.region),(a.Action="GetDRMCertInfo"),(a.Version="2017-03-21"),(a.VideoId=e._options.vid)),"Signature="+u.AliyunEncodeURI(u.makeChangeSiga(a,e._options.accessKeySecret,"POST"))),e=e._options.isLive?"https://"+d.getLiveHostByRegion(e._options.region)+"/?"+t:"https://vod."+e._options.region+".aliyuncs.com/?"+t;for(r in(o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a))a.hasOwnProperty(r)&&((i=a[r]),(n=n?n+"&"+u.AliyunEncodeURI(r)+"="+u.AliyunEncodeURI(i):u.AliyunEncodeURI(r)+"="+u.AliyunEncodeURI(i)),console.log(i));o.send(n)}),(t.exports.getRequestUrl=function(e,t){var e={AccessKeyId:t._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date()),SignatureNonce:u.randomUUID(),CertId:t._options.certId,SecurityToken:t._options.securityToken,RegionId:t._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:e,Domain:p.parseUrl(t._options.source).hostname},r="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(e,t._options.accessKeySecret,"POST"));return{url:"https://"+d.getLiveHostByRegion(t._options.region)+"/?"+r,data:u.makeUTF8sort(e,"=","&"),jsonData:u.makeUTF8sort(e,"=","&","json")}}),(t.exports.postData=function(e,t){var r=u.randomUUID(),r={AccessKeyId:t._options.accessKeyId,VideoId:t._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:r,CertId:t._options.certId,SecurityToken:t._options.securityToken,region:t._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:e},e="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(r,t._options.accessKeySecret,"POST"));return{url:"https://vod."+t._options.region+".aliyuncs.com/?"+e,data:u.makeUTF8sort(r,"=","&"),jsonData:u.makeUTF8sort(r,"=","&","json")}}),(t.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),(this._fairPlayHandlers={})})},{"../../lang/index":23,"../../lib/bufferbase64":25,"../../lib/constants":28,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/url":50,"./signature":113,"./util":115}],108:[function(e,t,r){var i=e("../../lib/io"),c=e("../../lib/constants"),n=e("../../lib/data"),u=e("./util");t.exports.getDataByAuthInfo=function(e,a,s,l){(e={playAuth:e.playAuth,requestId:e.requestId}),i.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+(function(r){return((r.requestId=n.guid()),Object.keys(r).reduce(function(e,t){return(e+(e?"&":"?")+t+"="+encodeURIComponent(r[t]))},""))})(e),function(e){if(e){e=JSON.parse(e);if(200!==e.httpStatusCode)l&&l({Code:c.ErrorCode.ServerAPIError,Message:e.httpStatusCode+"|"+e.code,sri:e.requestId});else{for(var t=e.data.PlayInfoList,r=[],i=t.length-1;0<=i;--i)"AUTO"===t[i].Definition&&(r=[t.splice(i,1)[0]]);var n,o=null;(o=(o=0===r.length?u.objectPlayerMessageSort(t,a):u.objectPlayerMessageSort(r)).map(function(e){return("m3u8"===e.format&&(e.Url=e.Url+"&_ext=.m3u8"),e)}))&&s&&((n=e.data.VideoBase||{}),s({videoId:n.VideoId,userId:n.UserId,requestId:e.requestId,urls:o,encryptUrlArr:[],thumbnailUrl:"",coverUrl:n.CoverURL,playInfoAry:t,textTracks:e.data.SubtitlesList}))}}else l&&l(u.createError("\u8f7bSaaS\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))},function(e){e&&"string"==typeof e&&-1<e.indexOf("Invalid CORS request")?l&&l({Code:c.ErrorCode.ServerAPIError,Message:e}):l&&l(u.createError("\u8f7bSaaS\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))})}},{"../../lib/constants":28,"../../lib/data":30,"../../lib/io":40,"./util":115}],109:[function(e,t,r){var i=e("./saasplayer"),n=e("./light"),o=e("../base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),(this.service=n),this.loadByLightSaas()}});(e.prototype.loadByLightSaas=function(e){var t=this._options,r={playAuth:t.mediaAuth,defaultDefinition:t.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:t.mediaAuth}}),this.loadData(r,e)}),(e.prototype.replayByMediaAuth=function(e){this.trigger(o.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(o.Private.UserTrackReset),(this._options.source=""),(this._options.mediaAuth=e),(this._isError=!1),(this._duration=0),(this._options.cover=""),(this._vodRetryCount=0),this._clearTimeout(),this.loadByLightSaas(!0)}),(t.exports=e)},{"../base/event/eventtype":70,"./light":108,"./saasplayer":112}],110:[function(e,t,r){var i=e("../../lib/io"),l=e("../../lib/constants"),s=e("./signature"),c=e("./util"),u=e("../../lang/index"),p=e("../../lib/ua");var d=function(e,r){for(var t="",i=(e.sort(function(e,t){(e=parseInt(e.bitrate)),(t=parseInt(t.bitrate));return"desc"==r?t<e?-1:e<t?1:void 0:e<t?-1:t<e?1:void 0}),e.length),n=0;n<i;n++){var o=e[n],a=l.QualityLevels[o.definition],s="",s=void 0===a?o.bitrate:t==a?a+o.bitrate:a;(o.desc=s),(t=a)}},h=function(e,r){for(var t="",i=(e.sort(function(e,t){(e=parseInt(e.width)),(t=parseInt(t.width));return"desc"==r?t<e?-1:e<t?1:void 0:e<t?-1:t<e?1:void 0}),e.length),n=0;n<i;n++){var o=e[n],a=l.QualityLevels[o.definition],s="",s=void 0===a?"":t==a?a+o.height:a;(o.desc=s),(t=a)}};t.exports.getDataByAuthInfo=function(e,n,o,a){s.returnUTCDate(),s.randomUUID();var t=s.randomUUID(),t={AccessKeyId:e.accessId,Action:"PlayInfo",MediaId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:e.authTimeout||l.AuthKeyExpired,IncludeSnapshotList:e.includeSnapshotList,Rand:e.rand,SecurityToken:e.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:p.IS_CHROME?"Chrome":p.IS_EDGE?"Edge":p.IS_IE11?"IE":p.IS_SAFARI?"Safari":p.IS_FIREFOX?"Firefox":"",SignatureNonce:t},t=(e.hlsUriToken&&(e.MtsHlsUriToken=e.hlsUriToken),e.playConfig&&(t.PlayConfig=JSON.stringify(e.playConfig)),s.makeUTF8sort(t,"=","&")+"&Signature="+s.AliyunEncodeURI(s.makeChangeSiga(t,e.accessSecret))),e="https://mts."+e.domainRegion+".aliyuncs.com/?"+t;i.get(e,function(e){var t,r,i;e?((t=(e=JSON.parse(e)).PlayInfoList.PlayInfo),(r=""),(i=e.SnapshotList?e.SnapshotList.Snapshot:[])&&0<i.length&&(r=i[0].Url),(i=(function(e,t){for(var r=[],i=[],n=[],o=[],a=e.length-1;0<=a;a--){var s=e[a];("mp4"==s.format?i:"mp3"==s.format?n:"m3u8"==s.format?r:o).push(s)}return 0<n.length?(d(n,t),n):0<i.length?(h(i,t),i):0<r.length?(h(r,t),r):(h(o,t),o)})(t,n)),o&&o({requestId:e.RequestId,urls:i,thumbnailUrl:r})):a&&a(c.createError("MPS\u83b7\u53d6\u53d6\u6570\u5931\u8d25"))},function(e){if(a){var t={Code:"",Message:u.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}a({Code:l.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}},{"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/ua":49,"./signature":113,"./util":115}],111:[function(e,t,r){var i=e("./saasplayer"),n=(e("../../lib/constants"),e("./mts")),e=i.extend({init:function(e,t){i.call(this,e,t),(this.service=n),this.loadByMts()}});(e.prototype.loadByMts=function(e){var t={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(t,e)}),(e.prototype.replayByVidAndAuthInfo=function(e,t,r,i,n,o){this.trigger("error_hide"),(this._options.source=""),(this._isError=!1),(this._duration=0),(this._options.cover=""),(this._vodRetryCount=0),this._clearTimeout(),this.reloadNewVideoInfo(e,t,r,i,n,o)}),(e.prototype.reloadNewVideoInfo=function(e,t,r,i,n,o){if((this.trigger("error_hide"),(this._options.source=""),e&&((this._options.vid=e),(this._options.accId=t),(this._options.accessSecret=r),(this._options.stsToken=i),(this._options.domainRegion=o),(this._options.authInfo=n)),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo)))throw new Error("\u9700\u8981\u63d0\u4f9bvid\u3001accId\u3001accessSecret\u3001stsToken\u3001domainRegion\u548cauthInfo\u53c2\u6570");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:e}}),this.loadByMts(!0)}),(t.exports=e)},{"../../lib/constants":28,"./mts":110,"./saasplayer":112}],112:[function(e,t,r){var d=e("../base/player"),i=e("../audio/audioplayer"),o=(e("../../lib/event"),e("../../lib/io")),h=e("../../lib/constants"),n=e("./signature"),a=e("./authkeyexpiredhandle"),f=e("../hls/hlsinjector"),y=e("../flv/flvinjector"),_=e("../drm/drminjector"),g=(e("../../lib/cookie"),e("../../lang/index")),v=e("../../lib/ua"),s=e("../../config"),m=e("../../lib/playerutil"),S=e("../base/event/eventtype"),l=e("../../protected/anti-injector-protected"),b=d.extend({init:function(e,t){l(t,this),(this._authKeyExpiredHandle=new a(this)),d.prototype._videoCreateEl||(d.prototype._videoCreateEl=d.prototype.createEl),"mp3"==t.format?((t.height="auto"),(t.mediaType="audio"),(d.prototype.createEl=i.prototype.createEl),i.call(this,e,t),(b.prototype.play=d.prototype.play),(b.prototype.pause=d.prototype.pause),(b.prototype.initPlay=d.prototype.initPlay),(b.prototype.replay=d.prototype.replay),(b.prototype.stop=d.prototype.stop),(b.prototype.seek=d.prototype.seek)):((d.prototype.createEl=d.prototype._videoCreateEl),(t._native=!1),d.call(this,e,t))}});(b.prototype.loadData=function(e,t){var r,i,n;"undefined"!=typeof _sce_r_skjhfnck||(""!=e.format&&"m3u8"!=e.format&&1!=this._options.encryptType)?this._loadData(e,t):((r="aliplayer-vod-min.js"),(i=""),(i=s.domain?"https://"+s.domain+"/de/prismplayer/"+s.h5Version+"/hls/"+r:"/build/hls/"+r),(n=this),o.loadJS(i,function(){n._loadData(e,t)}))}),(b.prototype._loadData=function(s,l){var c,u=new Date().getTime(),p=this;(this._urls=[]),(this._currentPlayIndex=0),(this._retrySwitchUrlCount=0),this._authKeyExpiredHandle.clearTick(),(""!=s.format&&"m3u8"!=s.format)||1!=this._options.encryptType?(s.rand=n.randomUUID()):((c=_sce_r_skjhfnck()),(s.rand=_sce_lgtcaygl(c,p._vdnct6f))),this._options.thumbnailUrl&&(s.thumbnailUrl=this._options.thumbnailUrl),this.trigger(S.Private.H5_Loading_Show),this.service.getDataByAuthInfo(s,this._options.qualitySort,function(e){if((p.trigger(S.Private.PlayInfoLoaded,e),e.userId&&(p._options.from=e.userId),e.videoId&&p._monitor&&p._monitor.updateLightSaasVideoId(e.videoId),e.textTracks&&e.textTracks.length&&((t=m.unqiueTextTracks(e.textTracks)),p.trigger(S.Private.TextTrackFounded,{from:"saas",textTracks:t})),e.urls&&0==e.urls.length))p._mtsError_message(p,{Code:h.ErrorCode.URLsIsEmpty,Message:g.get("Error_Vod_URL_Is_Empty_Text")+(s.format?"(format:"+s.format+")":"")},"");else{p.log("COMPLETEFETCHDATA",{cost:new Date().getTime()-u,mi:JSON.stringify((function(e){for(var t=[],r=0;r<e.length;r++)t.push({width:e[r].width,height:e[r].height,definition:e[r].definition,format:e[r].format,encryptionType:e[r].encryptionType,duration:e[r].duration});return t})(e.urls))}),(p._urls=e.urls),(p._currentPlayIndex=m.findSelectedStreamLevel(p._urls,s.defaultDefinition));var t=(r=e.urls[p._currentPlayIndex]).Url;if(((p._vodDuration=r.duration||0),(p._options.source=t),(p.encType=""),p.trigger(S.Private.PREPARE,r.definition),p.UI.cover&&e.coverUrl&&!p._options.cover&&p.setCover(e.coverUrl),m.isHls(t)))if(e&&e.playInfoAry&&0<e.playInfoAry.length&&"Widevine-FairPlay"==e.playInfoAry[0].EncryptType)_.inject(p,b,d.prototype,p._options);else{if(e.encryptUrlArr&&0<e.encryptUrlArr.length)for(var r,i,n=[],o=0;o<e.encryptUrlArr.length;++o)(r=e.encryptUrlArr[o]).encryptionType===h.EncryptionType.Private&&((i=_sce_dlgtqred(c,r.rand,r.plaintext)),n.push({url:r.Url,secData:i}));else if(((ecData=""),r.encryptionType==h.EncryptionType.Private)){p.encType=r.encryptionType;var a=m.checkSecuritSupport();if(a)return void p._mtsError_message(p,{Code:h.ErrorCode.EncrptyVideoNotSupport,Message:a,display_msg:a},"");n=_sce_dlgtqred(c,r.rand,r.plaintext)}p._hls&&(p._hls.destroy(),(p._hls=null)),f.inject(p,b,d,p._options,n)}else m.isFlv(t)?y.inject(p,b,d,p._options):m.isDash(t)?(console.log("isDash"),_.inject(p,b,d,p._options)):p._player._executeReadyCallback();p._authKeyExpiredHandle.tick(h.AuthKeyRefreshExpired),p.trigger(S.Private.SourceLoaded,r),p.initPlay(l),p.trigger(S.Private.ChangeURL,{from:"saas"}),e.thumbnailUrl&&p._thumbnailService.get(e.thumbnailUrl);(a=p._player._isFlv),(t=-1<p._player.getOptions().source.indexOf("mp4"));1==p._player.encType||a||t||((v.IS_IOS||v.IS_MAC_SAFARI||v.IS_X5||v.IS_EDGE)&&(p._player._executeReadyCallback(),p._urls.length)&&p.trigger(S.Private.SourceLoaded,r))}},function(e){p._mtsError_message(p,e,"")})}),(b.prototype._changeStream=function(e,t){this._urls.length>e&&(this._loadByUrlInner(this._urls[e].Url,this.getCurrentTime(),!0),(this._currentPlayIndex=e),this.trigger(S.Private.QualityChange,t||g.get("Quality_Change_Fail_Switch_Text")))}),(b.prototype._getLowerQualityLevel=function(){if(0!=this._urls.length&&-1!=this._currentPlayIndex)if("asc"==this.options().qualitySort){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1};return""}),(b.prototype._mtsError_message=function(e,t,r){(e._serverRequestId=t.sri),e.trigger(S.Private.H5_Loading_Hide);var i=t.Code||"OTHER_ERR_CODE",n=t.Message||"OTHER_ERR_MSG",o=(h.ErrorCode.ServerAPIError,t.display_msg||""),a=(-1<n.indexOf("InvalidParameter.Rand")||-1<n.indexOf('"Rand" is not valid.')?(h.ErrorCode.EncrptyVideoNotSupport,(o=g.get("Error_Not_Support_encrypt_Text"))):-1<n.indexOf("SecurityToken.Expired")?(h.ErrorCode.AuthKeyExpired,(o=g.get("Error_Playauth_Expired_Text"))):-1<n.indexOf("InvalidVideo.NoneStream")?(h.ErrorCode.URLsIsEmpty,(o=g.get("Error_Fetch_NotStream")+"("+e._options.format+"|"+e._options.definition+")")):-1<n.indexOf("DataNotFound")&&(h.ErrorCode.MediaNotFound,(o=g.get("Error_Fetch_Media_Not_Found"))),e._options.vid||""),a=(e._options.from,{mediaId:a,mediaAuth:e._options.mediaAuth||"",error_code:i,error_msg:n});t.sri&&(a.sri=t.sri),e.logError(a),(a.display_msg=(o||g.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+n),e.trigger("error",a),console.log("PrismPlayer Error: "+r+"! error_msg :"+n+";")}),(t.exports=b)},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/cookie":29,"../../lib/event":33,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/ua":49,"../../protected/anti-injector-protected":129,"../audio/audioplayer":68,"../base/event/eventtype":70,"../base/player":91,"../drm/drminjector":97,"../flv/flvinjector":100,"../hls/hlsinjector":102,"./authkeyexpiredhandle":106,"./signature":113}],113:[function(e,u,t){var n=e("crypto-js/hmac-sha1"),o=e("crypto-js/enc-base64"),r=e("crypto-js/enc-utf8");(u.exports.randomUUID=function(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);return((e[14]="4"),(e[19]=t.substr((3&e[19])|8,1)),(e[8]=e[13]=e[18]=e[23]="-"),e.join(""))}),(u.exports.returnUTCDate=function(){var e=new Date(),t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),e=e.getUTCMilliseconds();return Date.UTC(t,r,i,n,o,a,e)}),(u.exports.AliyunEncodeURI=function(e){e=encodeURIComponent(e);return(e=(e=(e=e.replace("+","%2B")).replace("*","%2A")).replace("%7E","~"))}),(u.exports.makesort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var i=[];for(s in e)i.push(s);for(var n=i.sort(),o="",a=n.length,s=0;s<a;s++)""==o?(o=n[s]+t+e[n[s]]):(o+=r+n[s]+t+e[n[s]]);return o}),(u.exports.makeUTF8sort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var i=[];for(s in e)i.push(s);for(var n=i.sort(),o="",a=n.length,s=0;s<a;s++){var l=u.exports.AliyunEncodeURI(n[s]),c=u.exports.AliyunEncodeURI(e[n[s]]);""==o?(o=l+t+c):(o+=r+l+t+c)}return o}),(u.exports.makeChangeSiga=function(e,t,r){if(e)return o.stringify(n((r=r||"GET")+"&"+u.exports.AliyunEncodeURI("/")+"&"+u.exports.AliyunEncodeURI(u.exports.makeUTF8sort(e,"=","&")),t+"&"));throw new Error("PrismPlayer Error: vid should not be null!");}),(u.exports.ISODateString=function(e){function t(e){return e<10?"0"+e:e}return(e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z")}),(u.exports.encPlayAuth=function(e){if((e=r.stringify(o.parse(e))))return JSON.parse(e);throw new Error("playuth\u53c2\u6570\u89e3\u6790\u4e3a\u7a7a");}),(u.exports.encRsa=function(){}),(u.exports.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),i=0,n=e.length;i<n;i++)r[i]=e.charCodeAt(i);return r}),(u.exports.Uint8ArrayToString=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(u.exports.arrayToString=function(e){e=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,e)}),(u.exports.base64DecodeUint8Array=function(e){var t=window.atob(e),r=t.length,n=new Uint8Array(new ArrayBuffer(r));for(i=0;i<r;i++)n[i]=t.charCodeAt(i);return n}),(u.exports.base64EncodeUint8Array=function(e){for(var t,r,i,n,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<e.length;)(i=(t=e[c++])>>2),(n=((3&t)<<4)|((t=c<e.length?e[c++]:Number.NaN)>>4)),(o=((15&t)<<2)|((r=c<e.length?e[c++]:Number.NaN)>>6)),(a=63&r),isNaN(t)?(o=a=64):isNaN(r)&&(a=64),(l+=s.charAt(i)+s.charAt(n)+s.charAt(o)+s.charAt(a));return l})},{"crypto-js/enc-base64":3,"crypto-js/enc-utf8":4,"crypto-js/hmac-sha1":5}],114:[function(e,t,r){var o=e("../../lib/io"),a=e("../../lib/constants"),s=e("./signature"),l=e("./util"),c=e("../../lang/index");t.exports.getPlayAuth=function(e,t,r,i){s.randomUUID();var n=s.randomUUID(),n={AccessKeyId:e.accessKeyId,Action:"GetVideoPlayAuth",VideoId:e.vid,AuthTimeout:a.AuthInfoExpired,SecurityToken:e.securityToken,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:n},n=s.makeUTF8sort(n,"=","&")+"&Signature="+s.AliyunEncodeURI(s.makeChangeSiga(n,e.accessKeySecret)),e="https://vod."+e.region+".aliyuncs.com/?"+n;o.get(e,function(e){e?((e=JSON.parse(e)),t&&t(e.PlayAuth)):r&&r(l.createError("\u83b7\u53d6\u89c6\u9891\u64ad\u653e\u51ed\u8bc1\u5931\u8d25"))},function(e){if(r){var t={Code:"",Message:c.get("Fetch_Playauth_Error")};try{(t=JSON.parse(e)).Code}catch(e){}r({Code:a.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId,display_msg:c.get("Fetch_Playauth_Error",i)})}})}},{"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"./signature":113,"./util":115}],115:[function(e,c,t){var r=e("../../lib/constants");(c.exports.createError=function(e,t){return{requestId:"",code:t||"",message:e}}),(c.exports.getItem=function(e){var t={};return((t.width=e.Width),(t.height=e.Height),(t.definition=e.Definition),(t.Url=e.PlayURL),(t.format=e.Format),(t.desc=r.QualityLevels[t.definition]),(t.encryptionType=r.VodEncryptionType[e.EncryptType]),(t.plaintext=e.Plaintext),(t.rand=e.Rand),(t.encrypt=e.Encrypt),(t.duration=e.Duration),(t.bitrate=e.Bitrate),t)}),(c.exports.objectPlayerMessageSort=function(e,t){for(var r=[],i=[],n=[],o=[],a=e.length-1;0<=a;a--){var s=e[a],s=c.exports.getItem(s);("mp4"==s.format?i:"mp3"==s.format?n:"m3u8"==s.format?r:o).push(s)}var l=[],l=0<n.length?n:0<i.length?i:0<r.length?r:o;return"asc"==t&&l.reverse(),l})},{"../../lib/constants":28}],116:[function(e,t,r){var i=e("../../lib/io"),n=e("../../lib/constants"),o=e("./signature"),p=e("./util"),a=e("../../config"),d=e("../../lang/index");t.exports.getDataByAuthInfo=function(s,l,c,u){o.randomUUID();var e=o.randomUUID(),e={AccessKeyId:s.accessId,Action:"GetPlayInfo",VideoId:s.vid,Formats:s.format,AuthTimeout:s.authTimeout||n.AuthKeyExpired,Rand:s.rand,SecurityToken:s.stsToken,StreamType:s.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:e,PlayerVersion:a.h5Version,Channel:"HTML5"},e=("AUTO"===s.definition?(e.ResultType="Multiple"):s.definition&&(e.Definition=s.definition),s.authInfo&&(e.AuthInfo=s.authInfo),s.outputType&&(e.OutputType=s.outputType),s.playConfig&&(e.PlayConfig=JSON.stringify(s.playConfig)),s.reAuthInfo&&(e.ReAuthInfo=JSON.stringify(s.reAuthInfo)),o.makeUTF8sort(e,"=","&")+"&Signature="+o.AliyunEncodeURI(o.makeChangeSiga(e,s.accessSecret))),e="https://vod."+s.domainRegion+".aliyuncs.com/?"+e;i.get(e,function(e){if(e){for(var e=JSON.parse(e),t="",r=e.VideoBase.ThumbnailList,i=(r&&r.Thumbnail&&0<r.Thumbnail.length?(t=r.Thumbnail[0].URL):s.thumbnailUrl&&(t=String(s.thumbnailUrl)),e.PlayInfoList.PlayInfo),n=[],o=[],a=i.length-1;0<=a;--a)"AUTO"===i[a].Definition?(n=[i.splice(a,1)[0]]):1===i[a].Encrypt&&o.push(i[a]);(r=null),(o=0===n.length?((r=p.objectPlayerMessageSort(i,l)),[]):((r=p.objectPlayerMessageSort(n)),p.objectPlayerMessageSort(o)));r&&c&&c({requestId:e.RequestId,urls:r,encryptUrlArr:o,thumbnailUrl:t,coverUrl:e.VideoBase.CoverURL,playInfoAry:i})}else u&&u(p.createError("\u70b9\u64ad\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))},function(e){if(u){var t={Code:"",Message:d.get("Error_Vod_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}u({Code:n.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"./signature":113,"./util":115}],117:[function(e,t,r){var i=e("./saasplayer"),c=e("../../lib/constants"),n=e("./vod"),u=e("./signature"),o=(e("./authkeyexpiredhandle"),e("./ststoken"),e("../../lib/io")),a=e("../../config"),e=i.extend({init:function(e,t){i.call(this,e,t),(this.service=n),this.loadByVod()}});(e.prototype.loadByVod=function(e){var t,r,i;"undefined"!=typeof _pa_n4lto7xi?this._loadByVod(e):((t="aliplayer-vod-p-min.js"),(r=""),(r=a.domain?"https://"+a.domain+"/de/prismplayer/"+a.h5Version+"/hls/"+t:"/build/hls/"+t),(i=this),o.loadJS(r,function(){i._loadByVod(e)}))}),(e.prototype._loadByVod=function(e){var t="",r="",i="",n="",o="";if(this._options.accessKeyId&&this._options.accessKeySecret)(t=this._options.accessKeyId),(r=this._options.accessKeySecret),(i=this._options.securityToken),(n=this._options.region),this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var a=_pa_n4lto7xi(this._options.playauth),s=(this._options.playauth!==a&&(this._vdnct6f=!0),u.encPlayAuth(a)),t=s.AccessKeyId,r=s.AccessKeySecret,i=s.SecurityToken,n=s.Region,o=s.AuthInfo}catch(e){console.log("e",e);var l={Code:c.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth\u89e3\u6790\u9519\u8bef"};return void this._mtsError_message(this,l,a)}(this._options.from=s.CustomerId||""),this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(t,r,i,n,o,e)}),(e.prototype.replayByVidAndPlayAuth=function(e,t){this.trigger("error_hide"),(this._options.source=""),(this._options.vid=e),(this._options.playauth=t),(this._isError=!1),(this._duration=0),(this._options.cover=""),(this._vodRetryCount=0),this._clearTimeout(),this.loadByVod(!0)}),(e.prototype.updateSourcesByVidAndPlayAuth=function(e,t){var r,i,n;"undefined"!=typeof _pa_n4lto7xi?this._updateSourcesByVidAndPlayAuth(e,t):((r="aliplayer-vod-p-min.js"),(i=""),(i=a.domain?"https://"+a.domain+"/de/prismplayer/"+a.h5Version+"/hls/"+r:"/build/hls/"+r),(n=this),o.loadJS(i,function(){n._updateSourcesByVidAndPlayAuth(e,t)}))}),(e.prototype._updateSourcesByVidAndPlayAuth=function(e,t){if(e!=this._options.vid)console.log("\u4e0d\u80fd\u66f4\u65b0\u5730\u5740\uff0cvid\u548c\u64ad\u653e\u4e2d\u7684\u4e0d\u4e00\u81f4");else{(this._options.vid=e),(this._options.playauth=t);try{var r=_pa_n4lto7xi(this._options.playauth),i=(this._options.playauth!==r&&(this._vdnct6f=!0),u.encPlayAuth(r))}catch(e){return void console.log("playauth\u89e3\u6790\u9519\u8bef")}var t={vid:e,accessId:i.AccessKeyId,accessSecret:i.AccessKeySecret,stsToken:i.SecurityToken,domainRegion:i.Region,authInfo:i.AuthInfo,playDomain:i.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},n=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(t,this._options.qualitySort,function(e){(n._serverRequestId=e.requestId),0!=e.urls.length&&(n._urls=e.urls),n._authKeyExpiredHandle.tick(c.AuthKeyRefreshExpired)},function(e){console.log(e)})}}),(e.prototype.reloaduserPlayInfoAndVidRequestMts=function(e,t){this.replayByVidAndPlayAuth(e,t,accessSecret)}),(e.prototype._loadByVodBySTS=function(e,t,r,i,n,o){e={vid:this._options.vid,accessId:e,accessSecret:t,stsToken:r,authInfo:n,domainRegion:i,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo};this.loadData(e,o)}),(t.exports=e)},{"../../config":14,"../../lib/constants":28,"../../lib/io":40,"./authkeyexpiredhandle":106,"./saasplayer":112,"./signature":113,"./ststoken":114,"./vod":116}],118:[function(e,t,r){function i(t){(this._player=t),(this._video=t.tag);var r=this;(this._isCreated=!1),(this._canPlayTriggered=!1),(this._defaultTrack=""),t.on(n.Private.ChangeURL,function(){(r._isCreated=!1),(r._canPlayTriggered=!1),(r._defaultTrack="")}),t.on(n.Player.CanPlay,function(){var e;r._player._drm||r._canPlayTriggered||((e=r._getTracks())&&((r._isCreated=!0),r._player._options.isVBR||r._hls||(t.trigger(n.Player.AudioTrackReady,e),r._notifyDefaultValue(e))),(r._canPlayTriggered=!0))}),t.on(n.Player.AudioTrackUpdated,function(e){r._isCreated||((e=r._getTracks(e.paramData.audioTracks))&&((r._isCreated=!0),t.trigger(n.Player.AudioTrackReady,e),r._notifyDefaultValue(e)))})}var n=e("../base/event/eventtype");(i.prototype._notifyDefaultValue=function(e){!this._defaultTrack&&0<e.length&&(this._defaultTrack=e[0]),this._defaultTrack&&this._player.trigger(n.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})}),(i.prototype.support=function(){return!!this._video.audioTracks}),(i.prototype._getTracks=function(e){if(!this.support()&&!e)return null;for(var t=[],r=(e=!this._video||!this._video.audioTracks||(e&&0!=e.length)?e:this._video.audioTracks)?e.length:0,i=0;i<r;i++){var n=e[i],o={value:n.id,text:n.label||n.name||n.language};(n.default||n.enabled)&&(this._defaultTrack=o),t.push(o)}return t}),(i.prototype.switch=function(e){if(this._player._hls)this._player._hls.audioTrack=+e;else for(var t=this._video.audioTracks?this._video.audioTracks.length:0,r=0;r<t;r++){var i=this._video.audioTracks[r];i.id==e?(i.enabled=!0):(i.enabled=!1)}}),(i.prototype.dispose=function(){this._player=null}),(t.exports=i)},{"../base/event/eventtype":70}],119:[function(e,t,r){function i(e){(this._video=e.tag),(this._player=e),(this._isCreated=!1),(this._backupCC=""),(this.tracks=[]),(this._defaultTrack=""),(this._currentValue=""),(this._switchTimer=null),(this._storedTracks=[]);var o=this,t=(e.on(a.Player.LevelsLoaded,function(e){if(s.IS_MAC_SAFARI||s.IS_IOS)if(e&&e.paramData&&e.paramData.subtitles&&e.paramData.subtitles.length){for(var t=e.paramData.subtitles||[],r=[],i=0;i<t.length;i++){var n=t[i];(n.vttUrl=n.url&&n.url.replace(".m3u8",".vtt")),r.push(n)}o._storedTracks=r}else o._resotreTracks()}),e.on(a.Private.SafariDrmLevelSwitch,function(){o._resotreTracks()}),e.on(a.Private.ChangeURL,function(e){(e&&e.paramData&&"saas"===e.paramData.from)||(o._disabledTracks(),(o._isCreated=!1),(o._defaultTrack=""),(o._backupCC=""))}),e.on(a.Private.VttClearTracks,function(){o.switch("off"),o._disabledTracks(),(o._isCreated=!1),(o._defaultTrack={value:"off",text:"Off"}),(o.tracks=[o._defaultTrack]),e.trigger(a.Private.SelectorGenerateList,{type:"cc"}),e.trigger(a.Private.CCStateChanged,{value:"off",lang:""})}),e.on(a.Player.CanPlay,function(){o._isCreated||((o.tracks=o._getTracks()),e.trigger(a.Player.TextTrackReady,o.tracks),e.trigger(a.Private.CCReset)),(o._isCreated&&!o._player._setDefaultCC)||!o._defaultTrack||(e.trigger(a.Private.SelectorUpdateList,{type:"cc",text:o._defaultTrack.text}),o.switch(o._defaultTrack.value),(o._player._setDefaultCC=!1),(o._isCreated=!0))}),s.os.ios&&parseFloat(s.os.version)<=15.1&&n.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),"always"===e.getOptions().controlBarVisibility&&n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),l.throttle(function(){(e._vttBroker&&e._vttBroker.enabled)||n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),t=(e.on(a.Private.ShowBar,t),l.throttle(function(){(e._vttBroker&&e._vttBroker.enabled)||n.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));e.on(a.Private.HideBar,t),e.on(a.Private.CCReset,function(){o._updateSelectorList()})}var a=e("../base/event/eventtype"),n=(e("../../lib/event"),e("../../lib/dom")),s=e("../../lib/ua"),c=e("../../lib/cookie"),u=e("../../lib/constants"),l=e("../../ui/component/util");(i.prototype._adaptiveCueStype=function(){var e,t=-10;s.IS_SAFARI?((t=-65),(e=this._player.fullscreenService)&&e.getIsFullScreen()&&(t=-95)):s.IS_MOBILE&&(t=-30),n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+t+"px) !important;}")}),(i.prototype.close=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++){var i=e[r];"expired"!=i.mode&&("showing"==i.mode&&(this._backupCC=i),(i.mode="disabled"))}this._player.trigger(a.Private.VttHide)}),(i.prototype.open=function(){var t,r,e;return(!this.tracks||this.tracks.length<2||((r=this._backupCC?this._backupCC.language:""),(e=this._backupCC?this._backupCC.label:""),this.tracks.forEach(function(e){r===e.value&&(t=!0)}),(r=t?r:(e=""))||((r=this.tracks[1].value),(e=this.tracks[1].text)),this.switch(r)),{label:e,language:r})}),(i.prototype.getCurrentSubtitle=function(){return this._currentValue}),(i.prototype._getTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=((this._defaultTrack={value:"off",text:"Off"}),[this._defaultTrack]),i=c.get(u.SelectedCC),n="",o=!1,a=0;a<t;a++){var s,l=e[a];"expired"==l.mode||("subtitles"!=l.kind&&"captions"!=l.kind)||((s={value:l.language,text:l.label}),l.default&&((this._defaultTrack=s),(o=!0)),s.value==i&&(n=s),r.push(s))}return!o&&n&&(this._defaultTrack=n),r}),(i.prototype._disabledTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++)e[r].mode="expired"}),(i.prototype.switch=function(e){var t=this._player;if((this.close(),"off"!=e))for(var r=this.getTextTracks(),i=r.length,n=0;n<i;n++){var o=r[n];o.language===e&&"expired"!=o.mode&&((r[n].mode="showing"),t.trigger(a.Private.VttSwitchTrack,o.language))}else this.close();(this._currentValue=e),t.trigger(a.Private.CCChanged,e)}),(i.prototype.updateUI=function(t){var e="on",r="";(r=t?(this.tracks.find(function(e){return e.value===t})||{}).text||"":((e="off"),"Off")),player.trigger(a.Private.CCChanged,e),player.trigger(a.Private.CCStateChanged,{value:e,lang:r})}),(i.prototype.dispose=function(){(this._player=null),this._switchTimer&&(clearTimeout(this._switchTimer),(this._switchTimer=null))}),(i.prototype._patchSafariTracks=function(){var t=this;if(s.IS_MAC_SAFARI||s.IS_IOS){if(!(this._video&&this._video.textTracks?this._video.textTracks.length:0)){var e=!1;if((e=this._video.textTracks&&this._video.textTracks.length?!0:e))return;for(var r=0;r<this._storedTracks.length;r++){var i=this._storedTracks[r],n=i.vttUrl,o=document.createElement("track");(o.src=n),(o.kind="subtitles"),(o.label=i.name),(o.srclang=i.lang),this._video.appendChild(o)}}this._switchTimer&&clearTimeout(this._switchTimer),(this._switchTimer=setTimeout(function(){var e=t.getCurrentSubtitle();e&&"off"!==e&&t.switch(e)},1e3))}}),(i.prototype.getTextTracks=function(){var e=this._player,t=e.tag;return e._vttBroker&&e._vttBroker.enabled&&e.getTextTracks?e.getTextTracks()||[]:(t&&t.textTracks)||[]}),(i.prototype._updateSelectorList=function(){var e=this._player;(this.tracks=this._getTracks()),e.trigger(a.Private.SelectorGenerateList,{type:"cc",value:"Off"})}),(i.prototype._resotreTracks=function(){this._patchSafariTracks(),(this.tracks=this._getTracks()),this._player.trigger(a.Player.TextTrackReady,this.tracks)}),(t.exports=i)},{"../../lib/constants":28,"../../lib/cookie":29,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../ui/component/util":159,"../base/event/eventtype":70}],120:[function(e,t,r){var i=e("../../lib/playerutil");t.exports=[{service:e("./ccservice"),name:"_ccService",condition:!0},{service:e("./audiotrackservice"),name:"_audioTrackService"},{service:e("./qualityservice"),name:"_qualityService"},{service:e("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:e("./liveshiftservice"),name:"_liveshiftService",condition:function(){var e=this.options();return i.isLiveShift(e)}},{service:e("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:e("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":46,"./audiotrackservice":118,"./ccservice":119,"./fullscreenservice":121,"./liveshiftservice":122,"./progressmarkerservice":123,"./qualityservice":124,"./thumbnailservice":125}],121:[function(e,t,r){function i(e){(this.isFullWindow=!1),(this.isFullScreen=!1),(this.isFullScreenChanged=!1),(this._requestFullScreenTimer=null),(this._cancelFullScreenTimer=null),(this._player=e);var r=this,i=u;(this._fullscreenChanged=function(e){var t;null!=r._player&&(e.target||e.srcElement)===(e=r._player.el())&&((t=document[i.fullscreenElement]),(r.isFullScreen=t===e),(r.isFullScreenChanged=!0)===r.isFullScreen?r._player.trigger(s.Player.RequestFullScreen):r._player.trigger(s.Player.CancelFullScreen))}),i&&o.on(document,i.eventName,this._fullscreenChanged)}var a=e("../../lib/ua"),n=e("../../lib/dom"),o=e("../../lib/event"),s=e("../base/event/eventtype"),l=e("../base/x5play"),c=e("../../lang/index"),u=(function(){n.createEl("div");var e={},t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],r=!1;if(!(r=a.IS_IOS&&((e.requestFn="webkitEnterFullscreen"),(e.cancelFn="webkitExitFullscreen"),(e.fullscreenElement="webkitFullscreenElement"),(e.eventName="webkitfullscreenchange"),(e.isFullScreen="webkitDisplayingFullscreen"),document[e.requestFn])?!0:r)){for(var i=0;i<5;i++)if(t[i][1]in document){(e.requestFn=t[i][0]),(e.cancelFn=t[i][1]),(e.fullscreenElement=t[i][2]),(e.eventName=t[i][4]),(e.isFullScreen=t[i][6]);break}"requestFullscreen"in document?(e.requestFn="requestFullscreen"):"webkitRequestFullscreen"in document?(e.requestFn="webkitRequestFullscreen"):"webkitRequestFullScreen"in document?(e.requestFn="webkitRequestFullScreen"):"webkitEnterFullscreen"in document?(e.requestFn="webkitEnterFullscreen"):"mozRequestFullScreen"in document?(e.requestFn="mozRequestFullScreen"):"msRequestFullscreen"in document&&(e.requestFn="msRequestFullscreen"),"fullscreenchange"in document?(e.eventName="fullscreenchange"):"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?(e.eventName="webkitfullscreenchange"):"mozfullscreenchange"in document?(e.eventName="mozfullscreenchange"):"MSFullscreenChange"in document&&(e.eventName="MSFullscreenChange"),"fullScreen"in document?(e.isFullScreen="fullScreen"):"webkitfullScreen"in document?(e.isFullScreen="webkitfullScreen"):"webkitIsFullScreen"in document?(e.isFullScreen="webkitIsFullScreen"):"webkitDisplayingFullscreen"in document?(e.isFullScreen="webkitDisplayingFullscreen"):"mozFullScreen"in document?(e.isFullScreen="mozFullScreen"):"mozfullScreen"in document?(e.isFullScreen="mozfullScreen"):"MSFullScreen"in document&&(e.isFullScreen="MSFullScreen"),"fullscreenElement"in document?(e.fullscreenElement="fullscreenElement"):"webkitFullscreenElement"in document?(e.fullscreenElement="webkitFullscreenElement"):"webkitFullScreenElement"in document?(e.fullscreenElement="webkitFullScreenElement"):"mozFullScreenElement"in document?(e.fullscreenElement="mozFullScreenElement"):"msFullscreenElement"in document?(e.fullscreenElement="msFullscreenElement"):"MSFullscreenElement"in document&&(e.fullscreenElement="MSFullscreenElement")}return e.requestFn?e:null})(),p=((i.prototype.requestFullScreen=function(){if(!l.isAndroidX5()||!this._player.paused()){var e=u,t=this._player.el(),r=this;if(a.IS_IOS){var i=this._player._splayer;if(!i||2!==i.renderType){t=this._player.tag;try{var n=t[e.requestFn]();n&&"function"==typeof n.catch&&n.catch(function(e){console.log(e)}),r._player.trigger(s.Player.RequestFullScreen)}catch(e){console.log(e)}return this}this._player._options.enableMockFullscreen=!0}(this.isFullScreen=!0),(this.isFullScreenChanged=!1),(this._requestFullScreenTimer=null),this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer);r=this;if(e&&!this._player._options.enableMockFullscreen)try{var o=t[e.requestFn]();o&&"function"==typeof o.catch&&o.catch(function(e){console.log(e)}),(this._requestFullScreenTimer=setTimeout(function(){r.isFullScreenChanged||(p.apply(r),r._player.trigger(s.Player.RequestFullScreen)),(r._requestFullScreenTimer=null)},1e3))}catch(e){console.log(e)}else p.apply(r),this._player.trigger(s.Player.RequestFullScreen);return this._player}this._player.trigger(s.Private.Info_Show,c.get("Play_Before_Fullscreen"))}),(i.prototype.cancelFullScreen=function(){var e=u,t=((this.isFullScreen=!1),(this.isFullScreenChanged=!1),(this._cancelFullScreenTimer=null),this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(e&&!this._player._options.enableMockFullscreen){try{var r=document[e.cancelFn]();r&&"function"==typeof r.catch&&r.catch(function(e){console.log(e)})}catch(e){console.log(e)}t._cancelFullScreenTimer=setTimeout(function(){t.isFullScreenChanged||(d.apply(t),t._player.trigger(s.Player.CancelFullScreen)),(t._cancelFullScreenTimer=null)},500)}else d.apply(t),this._player.trigger(s.Player.CancelFullScreen);return(this._player.tag.paused||this._player.trigger(s.Player.Play),this._player)}),(i.prototype.getIsFullScreen=function(){return this.isFullScreen}),(i.prototype.dispose=function(){(this._player=null),u&&o.off(document,u.eventName,this._fullscreenChanged)}),function(){(this.isFullWindow=!0),(this.docOrigOverflow=document.documentElement.style.overflow),(document.documentElement.style.overflow="hidden"),n.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),d=function(){(this.isFullWindow=!1),(document.documentElement.style.overflow=this.docOrigOverflow),n.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=i},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../base/event/eventtype":70,"../base/x5play":96}],122:[function(e,t,r){function n(e,t){var r;if(e)return((e=new Date(e)),(r=(t=new Date(t)).valueOf()/1e3-e.valueOf()/1e3),{start:e,end:t,endDisplay:s.extractTime(t),totalTime:r})}function o(e,t){t&&((e.currentTimestamp=t),(e.currentTime=s.convertToDate(t)),(e.currentTimeDisplay=s.extractTime(e.currentTime)),(e.liveShiftStart=e.liveTimeRange.start),(e.liveShiftEnd=e.liveTimeRange.end),(e.liveShiftStartDisplay=s.extractTime(e.liveShiftStart)),(e.liveShiftEndDisplay=s.extractTime(e.liveShiftEnd)),(e.availableLiveShiftTime=t-e.liveShiftStart.valueOf()/1e3),(e.timestampStart=s.convertToTimestamp(e.liveShiftStart)),e.timestampEnd,s.convertToTimestamp(e.liveShiftEnd))}function i(t){function e(){var e=t._options.source;(this._originalPlayUrl=e),(this._liveShiftUrl=t._options.liveTimeShiftUrl),(this.liveTimeRange=n(t._options.liveStartTime,t._options.liveOverTime)),(this.availableLiveShiftTime=0),(this.seekTime=-1)}(this._player=t),(this._isLiveShiftPlaying=!1);var i=this;e.call(this),(t.liveShiftSerivce={setLiveTimeRange:function(e,t){i.setLiveTimeRange(e,t)},queryLiveShift:function(e,t,r){i.queryLiveShift(e,t,r)},isLiveShiftPlaying:function(){return i._isLiveShiftPlaying}}),t.on(h.Private.ChangeURL,function(){e.call(i)})}var a=e("../../lib/io"),s=e("../../lib/util"),l=e("../../lib/playerUtil"),c=e("../../lang/index"),u=e("../flv/flvinjector"),p=e("../hls/hlsinjector"),d=e("../../lib/constants"),h=e("../base/event/eventtype");e("../../lib/url");(i.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)}),(i.prototype.switchToLive=function(){this.seekTime=-1;var e=this._originalPlayUrl,t=this._player._options.liveShiftSource,r=this._player._options.source;l.isHls(r)&&l.isFlv(e)&&t&&l.isHls(t)&&(this._player._hls&&this._player._destroyHls(),(r=this._player._superType),(t=this._player._Type),(this._player._options._autoplay=!0),u.inject(this._player,t,r,this._player._options,"",!0)),this._player._loadByUrlInner(e,null,!0),(this._isLiveShiftPlaying=!1),this._player.trigger(h.Private.LiveShiftSwitchToLive)}),(i.prototype.getBaseTime=function(){this.liveShiftStartDisplay;return-1==this.seekTime?s.parseTime(this.currentTimeDisplay):s.parseTime(this.liveShiftStartDisplay)+this.seekTime}),(i.prototype.getSourceUrl=function(e,t){var r=this._originalPlayUrl;return(this.availableLiveShiftTime<e||((this._isLiveShiftPlaying=!0),(e=parseInt(e)),(r=(r=this._switchLiveShiftPlayer(t))&&this._cleanUrl(r)),(t=parseInt(this.currentTimestamp)-e),-1===(r=-1==r.indexOf("?")?r+"?lhs_start_unix_s_0="+t:r+"&lhs_start_unix_s_0="+t).indexOf("aliyunols=on")&&(r+="&aliyunols=on"),-1===r.indexOf("continue=on")&&(r+="&continue=on")),r)}),(i.prototype._cleanUrl=function(e){var t;return-1===e.indexOf("?")?e:(e=(e=(t=e.split("?"))[1])&&(0===(e=e.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")?e.replace("&",""):e))?t[0]+"?"+e:t[0]}),(i.prototype._switchLiveShiftPlayer=function(e){var t,r=this._originalPlayUrl,i=this._player._options.liveShiftSource,n=this._player._options.source;if(l.isHls(n))r=n;else if(l.isFlv(r)&&i&&l.isHls(i))return(this._player._flv&&this._player._destroyFlv(),(n=this._player._superType),(t=this._player._Type),(this._player._options._autoplay=!0),p.inject(this._player,t,n,this._player._options,"",!0),i);return r}),(i.prototype.getTimeline=function(t,i){var r;this._player.trigger(h.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(r=this).queryLiveShift(this._liveShiftUrl,function(e){e?0==(e=e).retCode?(o(r,e.content.current),t&&t()):i({Code:d.ErrorCode.ServerAPIError,Message:e.retCode+"|"+e.description+"|"+e.content}):console.log("\u83b7\u53d6\u76f4\u64ad\u65f6\u79fb\u6570\u636e\u5931\u8d25")},function(e){if(i&&e){var t={};if(e){if("string"==typeof e&&-1<e.indexOf("403 Forbidden"))(t.Code=d.ErrorCode.AuthKeyExpired),(t.Message="Query liveshift failed:"+c.get("Error_AuthKey_Text"));else{var r,t=e;try{r=JSON.parse(e)}catch(e){}r&&((t.Code=d.ErrorCode.ServerAPIError),(t.Message=r.retCode+"|"+r.description+"|"+r.content))}i(t)}}}):(o(this,new Date().valueOf()/1e3),t&&t())}),(i.prototype.start=function(e,t){function r(){i._loopHandler&&clearTimeout(i._loopHandler),(i._loopHandler=setTimeout(function(){i.getTimeline(function(){},t),r()},e))}var i=this;i.getTimeline(function(e){i._localLiveTimeHandler||i.tickLocalLiveTime()},t),r()}),(i.prototype.tickLocalLiveTime=function(){var t=this;(function e(){t._localLiveTimeHandler=setTimeout(function(){t.currentTimestamp++,o(t,t.currentTimestamp),t._player.trigger(h.Private.LiveShiftQueryCompleted),e()},1e3)})()}),(i.prototype.setLiveTimeRange=function(e,t){(e=e||this._player._options.liveStartTime),(t=t||this._player._options.liveOverTime),(this.liveTimeRange=n(e,t)),o(this,this.currentTimestamp),this._player.trigger(h.Private.LiveShiftQueryCompleted)}),(i.prototype.queryLiveShift=function(e,r,i){a.get(e,function(e){var t;e?0==(t=JSON.parse(e)).retCode?r&&r(t):i&&i(t):i&&i(e)},function(e){i&&i(e)})}),(i.prototype.stop=function(e){this._loopHandler&&(clearTimeout(this._loopHandler),(this._loopHandler=null))}),(i.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),(this._localLiveTimeHandler=null)),this._loopHandler&&(clearTimeout(this._loopHandler),(this._loopHandler=null)),(this._player=null)}),(t.exports=i)},{"../../lang/index":23,"../../lib/constants":28,"../../lib/io":40,"../../lib/playerUtil":45,"../../lib/url":50,"../../lib/util":51,"../base/event/eventtype":70,"../flv/flvinjector":100,"../hls/hlsinjector":102}],123:[function(e,t,r){function i(a){function t(){var e=document.querySelector("#"+a.id()+" .prism-progress-marker");if(e){e.innerHTML="";var o=s._player.getDuration();if(0<o){for(var t=0;t<s.progressMarkers.length;t++){var r,i=s.progressMarkers[t];void 0!==i.offset&&""!==i.offset&&((i=document.createElement("div")),c.addClass(i,"prism-marker-dot"),(r=s.progressMarkers[t].offset/o),(i.style.left=100*r+"%"),e.appendChild(i),(r=(function(e,t){return function(){s._player.trigger(l.Private.MarkerTextShow,{left:e,progressMarker:t})}})(r,s.progressMarkers[t])),u.on(i,"mouseover",r),u.on(i,"mouseout",function(e){s._player.trigger(l.Private.MarkerTextHide)}),u.on(i,"touchstart",r),u.on(i,"mousemove",function(e){e.preventDefault()}),u.on(i,"touchmove",function(e){e.preventDefault()}))}var n=document.querySelector("#"+s._player.id()+" .prism-progress-cursor");s._player.on(n,"click",function(e){for(var t=s._player.getCurrentTime(),r=0;r<s.progressMarkers.length;r++){var i,n=s.progressMarkers[r];n&&t-1<n.offset&&n.offset<t+1&&((i=(n.offset/o)*100+"%"),s._player.trigger(l.Private.MarkerTextShow,{left:i,progressMarker:n}))}})}}}(this.progressMarkers=[]),(this._player=a);var s=this;a.on(l.Private.ProgressMarkerLoaded,function(e){e=e.paramData;e&&0<e.length&&(s.progressMarkers=e)}),a.on(l.Private.ProgressMarkerChanged,function(e){e=e.paramData;e&&0<e.length&&((s.progressMarkers=e),t())}),a.on(l.Video.LoadedMetadata,t)}var l=e("../base/event/eventtype"),c=(e("../../lang/index"),e("../../lib/hls/hlsparse"),e("../../lib/object"),e("../../lib/dom")),u=e("../../lib/event");e("../../lib/playerutil");(i.prototype.dispose=function(){(this._player=null),(this.progressMarkers=[])}),(t.exports=i)},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/hls/hlsparse":39,"../../lib/object":42,"../../lib/playerutil":46,"../base/event/eventtype":70}],124:[function(e,t,r){function i(o){(this.levels=[]),(this.drmUrl={}),(this._player=o);var a=this;o.on(s.Private.PlayInfoLoaded,function(e){for(var t=e.paramData.encryptUrlArr||[],r=[],i=0;i<t.length;i++){var n=t[i];n.encryptionType===p.VodEncryptionType["Widevine-FairPlay"]&&r.push(n)}a.drmUrl=r}),o.on(s.Player.LevelsLoaded,function(e){if((0<a.levels.length&&(a.levels=[]),(e=e.paramData)&&e.levels)){for(var t,r=e.levels.length-1;-1<r;r--){var i,n=e.levels[r];n.url&&0<n.url.length&&n.attrs&&n.attrs.BANDWIDTH&&((i=n.url),c.isArray(i)&&(i=i[0]),(i={Url:(i=!o._hls&&o._options.isVBR&&o._options.isDrm?d.call(a,n):i),desc:n.height||n.width,bitrate:n.bitrate,resolution:n.attrs.RESOLUTION,bandwidth:n.attrs.BANDWIDTH}),a.levels.push(i))}"AUTO"===o._options.definition&&((o._urls=[]),Object.assign(o._urls,this.levels)),a.levels.sort(function(e,t){return e.desc-t.desc}),0<a.levels.length&&((t=""),this._player._options.isVBR&&(t=l.get("Auto")),a.levels.push({Url:e.url,desc:t}),o.trigger(s.Private.SelectorUpdateList,{type:"quality",text:t}))}}),o.on(s.Video.LoadStart,function(){var e;o._options&&((e=o._options.source),!o._hls)&&e&&u.isHls(e)&&(o._manuallySwitchDrmLevel?((o._manuallySwitchDrmLevel=!1),o.trigger(s.Private.SafariDrmLevelSwitch)):a.loadLevels(e))})}var s=e("../base/event/eventtype"),l=e("../../lang/index"),n=e("../../lib/hls/hlsparse"),c=e("../../lib/object"),u=e("../../lib/playerutil"),p=e("../../lib/constants");function d(e){for(var t,r=this.drmUrl,i=0;i<this.drmUrl.length;i++)if(Number(e.height)===Number(r[i].height)){t=r[i].Url;break}return t}((i.prototype={loadLevels:function(e){var t=new n(),r=this;t.load(e,function(e){r._player.trigger(s.Player.LevelsLoaded,e)})}}).dispose=function(){this._player=null}),(t.exports=i)},{"../../lang/index":23,"../../lib/constants":28,"../../lib/hls/hlsparse":39,"../../lib/object":42,"../../lib/playerutil":46,"../base/event/eventtype":70}],125:[function(e,t,r){function i(e){(this._player=e),(this.cues=[]),(this.baseUrl="");var t=this;e.on(s.Private.ChangeURL,function(){(t.cues=[]),(t.baseUrl="")})}var n=e("../../lib/io"),o=e("../../lib/url"),a=e("../../lib/vtt/thumbnailvtt"),s=e("../base/event/eventtype");((i.prototype={get:function(e){var t,r,i=this;(this.baseUrl=((t=e),(r=o.parseUrl(t))&&(r=r.segments)&&0<r.length&&((r=r[r.length-1]),(baseUrl=t.replace(r,""))),baseUrl)),n.get(e,function(e){e&&a.parse(e,function(e){(i.cues=e),i._player.trigger(s.Private.ThumbnailLoaded,e)})},function(e){console.log(e)})},findAvailableCue:function(e){for(var t=this.cues.length,r=0;r<t;r++){var i=this.cues[r];if(i.startTime<=e&&e<i.endTime)return i}return null},makeUrl:function(e){return(e=-1==e.indexOf("://")?this.baseUrl+e:e)}}).dispose=function(){this._player=null}),(t.exports=i)},{"../../lib/io":40,"../../lib/url":50,"../../lib/vtt/thumbnailvtt":53,"../base/event/eventtype":70}],126:[function(e,t,r){var u=e("../base/player"),p=e("./splayerinjector"),d=e("../flv/flvinjector"),h=e("../../lib/playerutil"),f=e("../base/event/eventtype"),i=e("../../lib/constants"),y=e("../../lib/codec-probe"),_=i.USER_EVENT_NAME,g=h.isH265Codec,v=h.getVideoTrack,m={},S={codecCost:0,decoderCost:0},b=u.extend({init:function(e,t){var i,n=this,o=((this._options=t),h.isFlv(t.source)),r=this._extraMultiSources(),a={};function s(){o&&(d.inject(this,b,u,t),(t._native=!1)),u.call(this,e,t),this._monitor&&this._monitor.updateH265ProbeCost(S),c.call(this),m.codecTag&&p.reportH265PlayInfo.call(this,{renderType:"native",codecTag:m.codecTag})}function l(){(t._native=!1),p.inject(this,b,u,t,m),u.call(this,e,t),this._monitor&&this._monitor.updateH265ProbeCost(S),c.call(this)}function c(){var e,t,r=this,i=a,n=this[_];n&&((i=Object.assign({},a,n)),(e=Object.keys(a)),(t=Object.keys(n)),e.forEach(function(e){-1<t.indexOf(e)&&(i[e]=a[e].concat(n[e]))})),Object.keys(i).forEach(function(t){i[t].forEach(function(e){e.binded||u.prototype.on.call(r,t,e)})})}(a[f.Player.Ready]=[function(){n._setupSourceList(r),n.trigger(f.Private.SelectorGenerateList,{type:"quality"})}]),"zhihu"===t.from||t.forceH265?l.call(this):((i=performance.now()),y(t.source,function(e){S.codecCost+=performance.now()-i;var t,e=v(e.tracks),r=(e||{}).codecTag||(e||{}).codec.split(".")[0];(m.codecTag=r),e&&g(r)?((t=performance.now()),o?((S.decoderCost+=performance.now()-t),l.call(n)):h.shouldUseBasePlayer(r,function(e){(S.decoderCost+=performance.now()-t),(e?s:l).call(n)})):s.call(n)},function(e){console.log("error in demuxer, fallback to basePlayer",e),(S.codecCost+=performance.now()-i),s.call(n)}))}});t.exports=b},{"../../lib/codec-probe":26,"../../lib/constants":28,"../../lib/playerutil":46,"../base/event/eventtype":70,"../base/player":91,"../flv/flvinjector":100,"./splayerinjector":127}],127:[function(e,t,r){function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}var o=e("../../lib/io"),s=e("../base/event/eventtype"),l=e("../base/event/eventmanager"),c=(e("../../lib/event"),e("../../lib/util")),u=e("../../lib/dom"),p=e("../../lib/playerutil"),d=e("../../lib/constants"),h=e("../../lang/index");function f(e){var t=this._options,r=(_.call(this),!function(){p.isVideoTag(this.tag)&&(l.offVideoAll(this),this.tag.parentNode.removeChild(this.tag),(this.tag=null))}.call(this),Videox.Videox),i=new r(a({container:this._el,wasmDomain:t.splayerWasmDomain,progressive:!0,skipFrame:r.DiscardType.NONE,loop:t.rePlay,controls:!1,muted:!1,threads:t.h265Threads,simd:t.h265Simd,autoplay:t.autoplay,live:t.isLive,poster:t.cover||void 0,src:t.source,trackOptions:{disable:!0},preload:t.preload?"auto":"none",timeout:1e3*t.waitingTimeout},t.splayerOptions||{})),n=(t.debug&&(i.setLogLevel(r.LogLevel.LOG),i.setLogPrintLevel(r.LogLevel.LOG)),(this._splayer=i),(this.tag=i).play),o=this;(this.tag.play=function(){o._monitor&&o._monitor.reportStartPlay(),n.call(this)}),function(){var e,t=this,r=document.createElement("video");for(e in r)!(function(e){t.tag[e]||0===e.indexOf("on")||"function"!=typeof r[e]||(t.tag[e]=function(){console.warn("Function ["+e+"] is called on splayer, which should be a mistake."),r[e].apply(r,arguments)})})(e)}.call(this),function(e){var i=this,n=(l.onAll(this),this._splayer);n.addEventListener("error",function(e){console.log("Splayer error",(e||{}).detail);var t,r,i=Videox.Videox,n=(e||{}).detail,e=Number((n||{}).code),i=i.ErrorCode;switch(e){case i.WASM_NOT_SUPPORTED:case i.CANVAS_NOT_SUPPORTED:case i.AUDIOCONTEXT_NOT_SUPPORTED:case i.WORKER_NOT_SUPPORTED:case i.WEBGL_NOT_SUPPORTED:(t=d.ErrorCode.SplayerEnvCheckError),(r=h.get("Splayer_Err_Env_Check")+" | "+y(n));break;case i.DECODE:(t=d.ErrorCode.SplayerDecodeError),(r=h.get("Splayer_Err_Decode")+" | "+y(n));break;case i.NETWORK:(t=d.ErrorCode.NetworkError),(r=h.get("Error_Network_Text")+" | "+y(n));var o=(n.origin||{}).response;o?404===(o=o.status)?((t=d.ErrorCode.NotFoundSourceURL),(r=h.get("Error_Not_Found")+" | "+y(n))):403===o&&((t=d.ErrorCode.AuthKeyExpired),(r=h.get("Error_AuthKey_Text")+" | "+y(n))):navigator.onLine&&((t=d.ErrorCode.RequestDataError),(r=r+"\uff0c"+h.get("Maybe_Cors_Error")));break;case i.PARSER:(t=d.ErrorCode.SplayerParserNotFound),(r=h.get("Splayer_Err_Parser_Not_Found")+" | "+y(n));break;default:(t=d.ErrorCode.OtherError),(r="(SP)"+h.get("Error_Play_Text")+" | "+y(n))}if(t===d.ErrorCode.NetworkError&&this._reloadForVod())return;e={error_code:t,error_msg:r};null!==e.error_code&&null!==e.error_msg&&(this.logError(e),this.trigger(s.Player.Error,e));g.call(this,{splayer:!0})}.bind(this)),n.addEventListener("decoderoverload",function(e){e=e.detail;delete e.shouldWarn,i.trigger(s.Player.H265DecoderOverload,e)}),n.addEventListener("loadedsupportinfo",function(e){var e=e.detail||{},t=e.detail||{},r=n.controller.options||{};(n.renderType=e.renderer),g.call(i,{renderer:e.renderer,wasmThreads:t.wasmThreads&&r.threads,wasmThreadsOption:r.threads,simd:t.simd&&r.simd,simdOption:r.simd,codecTag:(n.controller.videoTrack&&n.controller.videoTrack.codecTag)||n.controller.videoTrack.codec.split(".")[0],splayer:!0})}),this._options.autoplay&&(n.once("canplay",function(){n.paused&&i._autoplayFailedHandler()}),n.once("timeupdate",function(){i.trigger(s.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay()}.call(this,e)}function y(e){var e=(e=void 0===e?{}:e),t=e.code,e=e.message,r=Videox.Videox.ErrorCode,i="";return(i=t?i+t+(": "+(e||r[t])):i)}function _(){this._splayer&&(this._splayer.destroy(),(this._splayer=null))}function g(e){var t;void 0===e&&(e={}),this._h265InfoReported||((this._h265InfoReported=!0),(t={0:"native",1:"mse",2:"wasm"}),delete(e=a({codecTag:(this._probeInfo||{}).codecTag||e.codecTag,renderType:e.renderType||t[e.renderer]},e)).renderer,e.renderType!==t[2]&&(delete e.simd,delete e.simdOption,delete e.wasmThreads,delete e.wasmThreadsOption),e.codecTag&&p.isH265Codec(e.codecTag)&&this.trigger(s.Player.H265PlayInfo,e))}(t.exports.reportH265PlayInfo=g),(t.exports.inject=function(e,t,r,i,n){(e._Type=t),(e._superType=r),(e._superPt=r.prototype),(e._disposed=!1),(e._splayer=null),(e._splayerLoaded=!1),(e._probeInfo=n),(t.prototype.initPlay=function(e){var t=this;this.trigger(s.Private.H5_Loading_Show),function(e){return(!c.contentProtocolMixed(e,"alwaysCheck")||(((e={mediaId:this._options.vid||"",error_code:d.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=h.get("Request_Block_Text")),this.logError(e),this.trigger(s.Player.Error,e),!1))}.call(this,this._options.source)&&(this._splayerLoaded?f.call(this,e):function(e){var t=this._options.splayerUrl||"https://g.alicdn.com/splayer/splayer/0.6.5/dist/index.js";o.loadJS(t,e.bind(this))}.call(this,function(){(this._splayerLoaded=!0),f.call(this,e),t._executeReadyCallback()}))}),(t.prototype.replay=function(){return(this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this)}),(t.prototype.setPlayerSize=function(e,t){this._superPt.setPlayerSize.call(this,e,t);e=this._el.querySelector("canvas");e&&((t=this._el.offsetWidth/this._el.offsetHeight),e.offsetWidth/e.offsetHeight<t?((e.style.height="100%"),(e.style.width="initial")):((e.style.width="100%"),(e.style.height="initial")))}),(t.prototype._setTransform=function(){var e=this._player._el.querySelector("canvas"),t=(this._transformProp||(this._transformProp=u.getTransformName(e)),"");this._rotate&&(t+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?(t+=" scaleY(-1)"):"horizon"==this._image&&(t+=" scaleX(-1)")),(e.style[this._transformProp]=t)}),(t.prototype.dispose=function(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),(t.prototype.replay=this._superPt.replay),(t.prototype.setPlayerSize=this._superPt.setPlayerSize),(t.prototype._setTransform=this._superPt._setTransform),(t.prototype.initPlay=this._superPt.initPlay),(t.prototype.dispose=this._superPt.dispose)),_.call(this),(this._Type=null),(this._superType=null),(this._superPt=null),(this._disposed=!0),(this._splayerLoaded=!1),(this._h265InfoReported=!1))})})},{"../../lang/index":23,"../../lib/constants":28,"../../lib/dom":32,"../../lib/event":33,"../../lib/io":40,"../../lib/playerutil":46,"../../lib/util":51,"../base/event/eventmanager":69,"../base/event/eventtype":70}],128:[function(require,module,exports){!function _SkeinEnclosedFunction($jsskein_array_37,$jsskein_array_38,$jsskein_array_39,$jsskein_array_40,$jsskein_array_41,$jsskein_array_42,$jsskein_array_43,$jsskein_array_44){function kl5f8(){function e(e){var t=(t=$jsskein_array_37[3]).split($jsskein_array_42[0]).reverse().join($jsskein_array_43[3]),t=window[t];$jsskein_array_39[2],$jsskein_array_39[2];return(t[e]=function(){})}for(var t=1;void 0!==t;){var r=1&(t>>1);switch(1&t){case 0:switch(r){case 0:t=void 0;continue;case 1:var i=[],n=(n=$jsskein_array_44[1]).split($jsskein_array_38[1]).reverse().join($jsskein_array_44[2]),o=$jsskein_array_43[2];o+=$jsskein_array_39[1];var a=(a=$jsskein_array_37[2]).split($jsskein_array_43[3]).reverse().join($jsskein_array_43[3]);i.push($jsskein_array_44[3],$jsskein_array_40[0],n,o,$jsskein_array_44[4],$jsskein_array_44[5],a,$jsskein_array_38[2]),i.forEach(e),(t=0);continue}continue;case 1:0==r&&($jsskein_array_37[0],(t=window?2:0))}}}function gas4s8(){for(var NEXTBB12=0;void 0!==NEXTBB12;){var $jsskein_indexLevel46_0=1&NEXTBB12,$jsskein_indexLevel46_1_Base=NEXTBB12>>1,$jsskein_indexLevel46_1=1&$jsskein_indexLevel46_1_Base;switch($jsskein_indexLevel46_0){case 0:switch($jsskein_indexLevel46_1){case 0:NEXTBB12=2;continue;case 1:NEXTBB12=$jsskein_array_40[1]?1:3;continue}continue;case 1:switch($jsskein_indexLevel46_1){case 0:eval(fs56j57),(NEXTBB12=2);continue;case 1:NEXTBB12=void 0;continue}continue}}}function n5fg6f(player){function _SkeinIIFE19(){function cl48s87(isOpen){for(var NEXTBB22=5;void 0!==NEXTBB22;){var $jsskein_indexLevel47_0=3&NEXTBB22,$jsskein_indexLevel47_1_Base=NEXTBB22>>2,$jsskein_indexLevel47_1=3&$jsskein_indexLevel47_1_Base;switch($jsskein_indexLevel47_0){case 0:switch($jsskein_indexLevel47_1){case 0:NEXTBB22=void 0;continue;case 1:($jsskein_simplify_tmp24=$jsskein_cl48s87_var14),(NEXTBB22=$jsskein_simplify_tmp24?9:0);continue;case 2:($jsskein_simplify_tmp24=Aliplayer.__unable2Anti9Debugger13Key),($jsskein_cl48s87_var14=$jsskein_array_40[2]!==$jsskein_simplify_tmp24),(NEXTBB22=4);continue}continue;case 1:switch($jsskein_indexLevel47_1){case 0:devtoolsDetector.removeListener(cl48s87),devtoolsDetector.setDetectDelay($jsskein_array_44[6]),devtoolsDetector.stop(),(NEXTBB22=0);continue;case 1:var $jsskein_simplify_tmp24=$jsskein_array_41[0],$jsskein_cl48s87_var14=isOpen,NEXTBB22=$jsskein_cl48s87_var14?8:4;continue;case 2:eval(fs56j57),($jsskein_simplify_tmp24=Aliplayer.__unable2Anti9Debugger13Key),($jsskein_simplify_tmp24=$jsskein_array_42[1]===$jsskein_simplify_tmp24),(NEXTBB22=$jsskein_simplify_tmp24?1:2);continue}continue;case 2:0===$jsskein_indexLevel47_1&&(kl5f8(),player.dispose(),gas4s8(),(NEXTBB22=0))}}}devtoolsDetector.addListener(cl48s87),devtoolsDetector.launch()}for(var NEXTBB17=0;void 0!==NEXTBB17;){var $jsskein_indexLevel48_0=1&NEXTBB17,$jsskein_indexLevel48_1_Base=NEXTBB17>>1,$jsskein_indexLevel48_1=1&$jsskein_indexLevel48_1_Base;switch($jsskein_indexLevel48_0){case 0:switch($jsskein_indexLevel48_1){case 0:var $jsskein_simplify_tmp25=_SkeinIIFE19,$jsskein_simplify_tmp26=$jsskein_array_37[0],$jsskein_n5fg6f_var16=document.body,NEXTBB17=$jsskein_n5fg6f_var16?2:3;continue;case 1:($jsskein_n5fg6f_var16=$jsskein_array_42[2]),(NEXTBB17=1);continue}continue;case 1:switch($jsskein_indexLevel48_1){case 0:($jsskein_simplify_tmp26=$jsskein_n5fg6f_var16),setTimeout($jsskein_simplify_tmp25,$jsskein_simplify_tmp26),(NEXTBB17=void 0);continue;case 1:var $jsskein__rand36=parseInt($jsskein_array_44[7],$jsskein_array_44[8]),$jsskein_n5fg6f_var16=$jsskein__rand36-$jsskein_array_43[4];NEXTBB17=1;continue}continue}}}function _SkeinIIFE34(e){n5fg6f(e)}var $jsskein_global_string_encryption_stack27=[],$jsskein_simplify_tmp18=($jsskein_global_string_encryption_stack27.unshift([]),window),$jsskein_simplify_tmp19=$jsskein_array_37[0],$jsskein_simplify_tmp19=require("../lib/devtools-detector"),devtoolsDetector=(($jsskein_simplify_tmp18.__devtoolsDetector=$jsskein_simplify_tmp19),$jsskein_simplify_tmp19),$jsskein_fs56j57_string_plus28=$jsskein_array_44[0],fs56j57=(($jsskein_fs56j57_string_plus28+=$jsskein_array_43[0]),($jsskein_fs56j57_string_plus28+=$jsskein_array_38[0]),($jsskein_fs56j57_string_plus28+=$jsskein_array_43[1]),($jsskein_fs56j57_string_plus28=$jsskein_fs56j57_string_plus28 .split($jsskein_array_39[0]).reverse().join($jsskein_array_37[1])),$jsskein_fs56j57_string_plus28),$jsskein_simplify_tmp18=module;$jsskein_simplify_tmp18.exports=_SkeinIIFE34}.call(this,[0,"","lmxrid","elosnoc"],["gu","","table"],["","rn",0],["log",!0,"error"],[0],["","error",0],["g","bed","wa","",147],["re","gubed","","info","error","dir",0,"11110111",2])},{"../lib/devtools-detector":31}],129:[function(n,o,e){!function(e,a,s,t,r,i,l,c){[].unshift([]),e[0];var u=n("./anti-debugging-protected");o.exports=function(e,t){for(var r=3;void 0!==r;){var i=1&(r>>1);switch(1&r){case 0:switch(i){case 0:r=void 0;continue;case 1:var n=Aliplayer.__unable2Anti9Debugger13Key,o=l[0],r=(n=(o+=a[0])+l[1]+s[0]!==n)?1:0;continue}continue;case 1:switch(i){case 0:u(t),(r=0);continue;case 1:var n=e.encryptType;r=(n=c[0]==n)?2:0;continue}continue}}}}.call(this,[0],["rr"],["r"],[],[],[],["e","o"],[1])},{"./anti-debugging-protected":128}],130:[function(e,t,r){var i=e("../lib/oo"),n=e("../lib/data"),o=e("../lib/object"),a=e("../lib/dom"),s=e("../lib/event"),l=e("../lib/function"),c=e("../lib/layout"),u=(e("../lib/constants"),e("../lib/util"),e("../player/base/event/eventtype")),e=e("./component/util"),i=i.extend({init:function(e,t){var r=this,i=((this._player=e),(this._eventState=""),(this._options=o.copy(t)),(this._el=this.createEl()),e.id);"function"==typeof e.id&&(i=e.id()),(this._id=i+"_component_"+n.guid()),(this._children=[]),(this._childIndex={}),t.className&&this.addClass(t.className),this._player.on(u.Private.UiH5Ready,function(){r.renderUI(),r.syncUI(),r.bindEvent()})}});(i.prototype.renderUI=function(){c.render(this.el(),this.options()),(this.el().id=this.id())}),(i.prototype.syncUI=function(){}),(i.prototype.bindEvent=function(){}),(i.prototype.createEl=function(e,t){return a.createEl(e,t)}),(i.prototype.options=function(e){return void 0===e?this._options:(this._options=o.merge(this._options,e))}),(i.prototype.el=function(){return this._el}),i.prototype._contentEl,(i.prototype.player=function(){return this._player}),(i.prototype.contentEl=function(){return this._contentEl||this._el}),i.prototype._id,(i.prototype.id=function(){return this._id}),(i.prototype.getId=function(){return this._id}),(i.prototype.addChild=function(e,t){var r;if("string"==typeof e){if(!this._player.UI[e])return;r=new this._player.UI[e](this._player,t)}else r=e;return(this._children.push(r),"function"==typeof r.id&&(this._childIndex[r.id()]=r),"function"==typeof r.el&&r.el()&&(((t=r.el()).id=r.id()),this.contentEl().appendChild(t)),r)}),(i.prototype.removeChild=function(e){if(e&&this._children){for(var t,r=!1,i=this._children.length-1;0<=i;i--)if(this._children[i]===e){(r=!0),this._children.splice(i,1);break}r&&((this._childIndex[e.id]=null),(t=e.el()))&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}),(i.prototype.initChildren=function(){var e,t,r=this,i=this.options().children;if(i)if(o.isArray(i))for(var n=0;n<i.length;n++)(t="string"==typeof(t=i[n])?((e=t),{}):((e=t.name),t)),r.addChild(e,t);else o.each(i,function(e,t){!1!==t&&r.addChild(e,t)})}),(i.prototype.on=function(e,t){return s.on(this._el,e,l.bind(this,t)),this}),(i.prototype.offListener=function(e,t){return s.off(this._el,e,t),this}),(i.prototype.one=function(e,t){return s.one(this._el,e,l.bind(this,t)),this}),(i.prototype.trigger=function(e,t){if(this._el)return((!t&&0!=t)||(this._el.paramData=t),(this._eventState=e),s.trigger(this._el,e),this)}),(i.prototype.off=function(e){return s.off(this._el,e),this}),(i.prototype.addClass=function(e){return a.addClass(this._el,e),this}),(i.prototype.removeClass=function(e){return a.removeClass(this._el,e),this}),(i.prototype.show=function(){return this._el&&(this._el.style.display="block"),this}),(i.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this}),(i.prototype.destroy=function(){if((this.trigger({type:"destroy",bubbles:!1}),this._children))for(var e=this._children.length-1;0<=e;e--)this._children[e].destroy&&this._children[e].destroy();"function"==typeof this.disposeUI&&this.disposeUI(),(this.children_=null),(this.childIndex_=null),this.off(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),n.removeData(this._el),(this._el=null)}),(i.prototype.registerControlBarTooltip=e.registerTooltipEvent),(t.exports=i)},{"../lib/constants":28,"../lib/data":30,"../lib/dom":32,"../lib/event":33,"../lib/function":35,"../lib/layout":41,"../lib/object":42,"../lib/oo":43,"../lib/util":51,"../player/base/event/eventtype":70,"./component/util":159}],131:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("../../player/base/plugin/status"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-big-play-btn")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return(e.innerHTML='<div class="outter"></div>'),e},bindEvent:function(){var r=this,e=(this._player.on(a.Player.Play,function(){r.addClass("playing"),r.removeClass("pause"),r._hide()}),this._player.on(a.Player.Pause,function(){var e,t;r._player._switchSourcing||(r.removeClass("playing"),r.addClass("pause"),(e=r._player._status),(t=r._player._seeking),e==s.ended)||e==s.error||e==s.playing||t||r._show()}),document.querySelector("#"+r.id()+" .outter"));o.on(this.el(),"mouseover",function(){n.addClass(e,"big-playbtn-hover-animation")}),o.on(this.el(),"mouseout",function(){n.removeClass(e,"big-playbtn-hover-animation")}),this.on(a.Private.PlayClick,function(){var e;r._player.paused()?((e=r._player.getCurrentTime()),(r._player.getDuration()<=e||r._player._ended||r._player.exceedPreviewTime(e))&&r._player.seek(0),r._player.play(!0)):r._player.pause(!0)}),this._player.on(a.Private.Play_Btn_Show,function(){r._show()}),this._player.on(a.Private.Play_Btn_Hide,function(){r._hide()})},_show:function(){n.css(this.el(),"display","block")},_hide:function(){n.css(this.el(),"display","none")}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":95,"../component":130}],132:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("./util"),a=e("../../lang/index"),s=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){(this.isOpened=!1),i.call(this,e,t),this.addClass("prism-cc-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var r=this;this.on("click",function(){n.addClass(r._el,"disabled");var e="on",t="";r.isOpened?(r._player._ccService.close(),(e="off")):(t=r._player._ccService.open().label),r._player.trigger(s.Private.CCChanged,e),r._player.trigger(s.Private.CCStateChanged,{value:e,lang:t}),r.disabledHandler&&clearTimeout(r.disabledHandler),(r.disabledHandler=setTimeout(function(){n.removeClass(r._el,"disabled")},1e3)),r._player.trigger(s.Private.MarkerTextHide)}),this._player.on(s.Private.CCChanged,function(e){e=e.paramData;r.isOpened="off"!=e}),o.registerTooltipEvent.call(this,this.el(),function(){return r.isOpened?a.get("CloseSubtitle"):a.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),(this.disabledHandler=null))}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],133:[function(e,t,r){var i=e("../component"),o=e("../../player/base/event/eventtype"),a=e("../../lib/event"),s=e("../../lib/dom"),l=e("../../lib/ua"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=i.prototype.createEl.call(this);return((e.innerHTML='<div class="prism-controlbar-bg"></div>'),e)},onEvent:function(){var t,r=this.player(),e=r.options(),i=this,n=(a.on(this._el,"mouseover",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","block")}),a.on(this._el,"mouseout",function(e){var t=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(t,"display","none"),r.trigger(o.Private.ThumbnailHide)}),a.on(this._el,"click",function(e){r.trigger(o.Private.ControlBarClick,e)}),l.IS_IOS&&(a.on(this._el,"touchstart",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","block")}),a.on(this._player.tag,"touchstart",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","none"),r.trigger(o.Private.ThumbnailHide)})),(this.timer=null),e.controlBarVisibility);"hover"==(n=1==e.controlBarForOver?"hover":n)?(i.hide(),(t=function(){i._hideHandler&&clearTimeout(i._hideHandler),i._show(),r.fullscreenService.getIsFullScreen()&&i._hide()}),r.on(o.Private.MouseOver,function(){t()}),a.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t()}),a.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t()}),r.on(o.Private.MouseOut,function(){i._hideHandler=setTimeout(function(){i.hide(),r.trigger(o.Private.HideBar),r.trigger(o.Private.ThumbnailHide),r.trigger(o.Private.VolumeVisibilityChange,""),r.trigger(o.Private.SettingListHide)})})):"click"==n?(r.on(o.Private.Click,function(e){r._isError||(e.preventDefault(),e.stopPropagation(),i._show(),i._hide())}),r.on(o.Player.Ready,function(){i._hide()}),r.on(o.Private.TouchStart,function(){i._show()}),r.on(o.Private.TouchMove,function(){i._show()}),r.on(o.Private.TouchEnd,function(){i._hide()})):"never"==n?i._hide():i._show()},_show:function(){this.show(),this._player.trigger(o.Private.ShowBar),this.timer&&(clearTimeout(this.timer),(this.timer=null))},_hide:function(){var e=this,t=this.player().options(),t="never"==t.controlBarVisibility?0:t.showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger(o.Private.HideBar),e._player.trigger(o.Private.ThumbnailHide),e._player.trigger(o.Private.VolumeVisibilityChange,""),e._player.trigger(o.Private.SettingListHide)},t)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),(this.timer=null)),this._hideHandler&&(clearTimeout(this._hideHandler),(this._hideHandler=null))}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../player/base/event/eventtype":70,"../component":130}],134:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-cover")},createEl:function(){var e=i.prototype.createEl.call(this,"div"),t=this.options().cover;return(t?(e.style.backgroundImage="url("+t+")"):n.css(e,"display","none"),e)},_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","none")},_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","block")},bindEvent:function(){this._player.on(o.Private.Cover_Show,this._show),this._player.on(o.Private.Cover_Hide,this._hide)}});t.exports=e},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130}],135:[function(e,t,r){var i=e("../component"),a=e("../../lib/util"),s=e("../../lib/dom"),n=e("../../lib/event"),o=e("../../lib/ua"),l=e("../../lang/index"),c=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-ErrorMessage")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+l.get("Refresh_Text")+"</a><a class='prism-button prism-button-retry'  target='_blank'>"+l.get("Retry")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+l.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId:&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+l.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>"),e)},bindEvent:function(){var r=this,e=(r._player.on(c.Private.Error_Show,function(e){var t=null;r._player.getMonitorInfo&&(t=r._player.getMonitorInfo()),r._show(e,t)}),r._player.on(c.Private.Error_Hide,function(){r._hide()}),document.querySelector("#"+r.id()+" .prism-button-refresh")),e=(n.on(e,"click",function(){location.reload(!0)}),o.IS_MOBILE&&((e=document.querySelector("#"+r.id()+" .prism-detect-info")),s.addClass(e,"prism-width90")),document.querySelector("#"+r.id()+" .prism-button-retry"));n.on(e,"click",function(){var e=r._player.getCurrentTime(),t=r._player._options.source;(r._player._setDefaultCC=!0),r._player._loadByUrlInner(t,e,!0)})},_show:function(e,t){var r,e=e.paramData,i="",n="",o=(e.mediaId&&(i=e.mediaId),e.mediaAuth&&e.mediaAuth,document.querySelector("#"+this.id()+" .prism-button-orange"));o&&(t&&this._player._options.diagnosisButtonVisible?(t.vu?(n=decodeURIComponent(t.vu)):s.css(o,"display","none"),(i="//player.alicdn.com/detection.html?from=h5&vid="+i+"&source="+(n?encodeURIComponent(n):"")+"&uuid="+t.uuid+"&lang="+l.getCurrentLanguage()),o&&(o.href=i)):s.css(o,"display","none"),(n=e.display_msg||e.error_msg),(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=n),(document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=e.error_code),(t=document.querySelector("#"+this.id()+" .vid")),e.mediaId?(s.css(t,"display","block"),(document.querySelector("#"+this.id()+" .vid .info-content").innerText=e.mediaId)):s.css(t,"display","none"),(i=document.querySelector("#"+this.id()+" .mediaAuth")),e.mediaAuth?(s.css(i,"display","block"),(document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=e.mediaAuth)):s.css(i,"display","none"),e.uuid?(document.querySelector("#"+this.id()+" .uuid .info-content").innerText=e.uuid):((o=document.querySelector("#"+this.id()+" .uuid")),s.css(o,"display","none")),e.requestId?(document.querySelector("#"+this.id()+" .requestId .info-content").innerText=e.requestId):((n=document.querySelector("#"+this.id()+" .requestId")),s.css(n,"display","none")),(document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=a.formatDate(new Date(),"yyyy-MM-dd HH:mm:ss")),(t=document.querySelector("#"+this.id())),s.css(t,"display","block"),(r=this).playHideHandler&&clearTimeout(r.playHideHandler),(r.playHideHandler=setTimeout(function(){r._player.trigger("play_btn_hide")})))},_hide:function(){var e=document.querySelector("#"+this.id());s.css(e,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),(this.playHideHandler=null))}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],136:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=(e("../../lib/event"),e("../../lib/ua")),a=e("../../lang/index"),s=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(n.Player.RequestFullScreen,function(){o.IS_IOS||e.addClass("fullscreen")}),this._player.on(n.Player.CancelFullScreen,function(){e.removeClass("fullscreen")}),s.registerTooltipEvent.call(this,this.el(),function(){return e._player.fullscreenService.getIsFullScreen()?a.get("ExistFullScreen"):a.get("Fullscreen")}),this.on("click",function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen(),e._player.trigger(n.Private.MarkerTextHide)})}});t.exports=e},{"../../lang/index":23,"../../lib/event":33,"../../lib/ua":49,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],137:[function(e,t,r){"use strict";var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype"),a=e("../../lib/ua.js"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-hide")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML=a.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>'),e)},_loading_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-loading");t&&(n.removeClass(t,"prism-loading"),n.addClass(t,"prism-hide"))},_loading_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-hide");t&&(n.removeClass(t,"prism-hide"),n.addClass(t,"prism-loading"))},bindEvent:function(){this._player.on(o.Private.H5_Loading_Show,this._loading_show),this._player.on(o.Private.H5_Loading_Hide,this._loading_hide)}});t.exports=e},{"../../lib/dom":32,"../../lib/ua.js":49,"../../player/base/event/eventtype":70,"../component":130}],138:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=(e("../../lib/event"),e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-info-display")},createEl:function(){return i.prototype.createEl.call(this,"p")},bindEvent:function(){var r=this;r._player.on(o.Private.Info_Show,function(e){var t=document.querySelector("#"+r.id()),e=e.paramData;e&&(void 0!==e.text&&e.text?((t.innerHTML=e.text),void 0!==e.duration&&e.duration&&(r.handler&&clearTimeout(r.handler),(r.handler=setTimeout(function(){n.css(t,"display","none")},e.duration))),"lb"==e.align?(n.addClass(t,"prism-info-left-bottom"),n.removeClass(t,"prism-info-top-center")):"tc"==e.align?(n.addClass(t,"prism-info-top-center"),n.removeClass(t,"prism-info-left-bottom")):(n.removeClass(t,"prism-info-left-bottom"),n.removeClass(t,"prism-info-top-center")),e.isBlack?n.addClass(t,"prism-info-black"):n.removeClass(t,"prism-info-black")):(t.innerHTML=e),n.css(t,"display","block"))}),r._player.on(o.Private.Info_Hide,function(e){var t=document.querySelector("#"+r.id());n.css(t,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),(this.handler=null))}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],139:[function(e,t,r){var i=e("../component"),n=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-license-watermark")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML='<div class="no-authorization">'+n.get("License_No_Authorization")+'</div><a class="apply-button" target="_blank" href="https://help.aliyun.com/document_detail/434250.html">'+n.get("License_Click_To_Apply")+"</a>"),e)}});t.exports=e},{"../../lang/index":23,"../component":130}],140:[function(e,t,r){var i=e("../component"),n=e("./util"),o=(e("../../lib/util"),e("../../lib/dom")),a=e("../../lib/event"),s=e("../../lib/playerUtil"),l=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-live-display")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return((e.innerText="LIVE"),s.isLiveShift(this._player._options)&&o.addClass(e,"live-shift-display"),e)},bindEvent:function(){var e=document.querySelector("#"+this.id()),t=this;s.isLiveShift(this._player._options)&&(a.on(e,"click",function(){t._player._liveshiftService.switchToLive()}),n.registerTooltipEvent.call(this,this.el(),l.get("SwitchToLive")))}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/playerUtil":45,"../../lib/util":51,"../component":130,"./util":159}],141:[function(e,t,r){var i=e("../component"),n=(e("../../lib/dom"),e("../../lib/event"),e("../../player/base/event/eventtype")),o=e("../../player/base/plugin/status"),a=e("../../lib/ua.js"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-animation")},bindEvent:function(){var t=this;this._player.on(n.Player.Play,function(){t._player._isManualPlay&&(t.removeClass("prism-pause-animation"),t.addClass("prism-play-animation"),a.IS_ANDROID_FIREFOX||t.removeClass("play-apply-animation"),t.playHandler&&clearTimeout(t.playHandler),(t.playHandler=setTimeout(function(){a.IS_ANDROID_FIREFOX||t.addClass("play-apply-animation")})))}),this._player.on(n.Player.Pause,function(){var e=t._player._status;e!=o.ended&&e!=o.error&&t._player._isManualPause&&(t.removeClass("prism-play-animation"),t.addClass("prism-pause-animation"),a.IS_ANDROID_FIREFOX||t.removeClass("play-apply-animation"),t.pauseHandler&&clearTimeout(t.pauseHandler),(t.pauseHandler=setTimeout(function(){a.IS_ANDROID_FIREFOX||t.addClass("play-apply-animation")})))})},disposeUI:function(){this.playHandler&&(clearTimeout(this.playHandler),(this.playHandler=null)),this.pauseHandler&&(clearTimeout(this.pauseHandler),(this.pauseHandler=null))}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../lib/ua.js":49,"../../player/base/event/eventtype":70,"../../player/base/plugin/status":95,"../component":130}],142:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=e("./util"),a=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-play-btn")},bindEvent:function(){var t=this;this._player.on(n.Player.Play,function(){t.addClass("playing")}),this._player.on(n.Player.Pause,function(){t.removeClass("playing")}),this.on(n.Private.PlayClick,function(){var e;t._player.paused()?((e=t._player.getCurrentTime()),(t._player.getDuration()<=e||t._player._ended||t._player.exceedPreviewTime(e))&&t._player.seek(0),t._player.play(!0),t.addClass("playing")):(t._player.pause(!0),t.removeClass("playing")),t._player.trigger(n.Private.MarkerTextHide)}),o.registerTooltipEvent.call(this,this.el(),function(){return t._player.paused()?a.get("Play"):a.get("Pause")})}});t.exports=e},{"../../lang/index":23,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],143:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),a=(e("../../lib/constants"),e("../../lib/event")),s=e("../../lib/ua"),l=e("../../lib/function"),n=e("../../lang/index"),c=e("../../config"),u=e("../../lib/util"),p=e("../../player/base/event/eventtype"),d=e("./util").debounce,e=i.extend({init:function(e,t){i.call(this,e,t),(this._seekTime=-1),(this._lastSeekTime=0),(this._moving=!1),(this._thumbnailHideTimer=null),this.addClass("prism-progress")},createEl:function(){var e=i.prototype.createEl.call(this);return((e.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p>'),e)},bindEvent:function(){function t(e){r._progressDown=e}var r=this,e=((this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded")),(this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played")),(this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor")),(this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time")),(this.thumbnailNode=document.querySelector(".prism-thumbnail")),(this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar")),document.querySelector("#"+this.id())),i=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),n="",n=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":c.domain?"https://"+c.domain+"/de/prismplayer/"+c.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png";(i.src=n),a.on(this.cursorNode,"mousedown",function(e){r._onMouseDown(e)}),a.on(this.cursorNode,"touchstart",function(e){r._onMouseDown(e)}),a.on(e,"mousemove",function(e){r._progressMove(e)}),a.on(e,"touchmove",function(e){r._progressMove(e)});a.on(e,"mousedown",function(e){t(!0)}),a.on(e,"touchstart",function(e){t(!0)}),a.on(e,"mouseup",function(e){t(!1)}),a.on(e,"touchend",function(e){t(!1),r._moving&&s.IS_MOBILE&&(r._player.trigger(p.Private.EndStart,{toTime:r._lastSeekTime}),(r._moving=!1))}),a.on(this._el,"click",function(e){r._onMouseClick(e)}),this._player.on(p.Private.HideProgress,function(e){r._hideProgress(e)}),this._player.on(p.Private.CancelHideProgress,function(e){r._cancelHideProgress(e)}),this._player.on(p.Private.HideBar,function(e){r._player._seeking=!1}),a.on(e,p.Private.MouseOver,function(e){r._onMouseOver(e)}),a.on(e,p.Private.MouseOut,function(e){r._onMouseOut(e)}),a.on(this.controlNode,p.Private.MouseLeave,function(e){r._offMouseUp()}),s.IS_PC?((i=d(function(){o.addClass(e,"prism-progress-hover"),o.addClass(r.cursorNode,"cursor-hover")},100)),a.on(e,"mouseover",i),(n=d(function(){o.removeClass(e,"prism-progress-hover"),o.removeClass(r.cursorNode,"cursor-hover"),(r._progressDown=!1)},100)),a.on(e,"mouseout",n)):(o.addClass(e,"prism-progress-hover"),o.addClass(r.cursorNode,"cursor-hover")),(this.bindTimeupdate=l.bind(this,this._onTimeupdate)),this._player.on(p.Player.TimeUpdate,this.bindTimeupdate),s.IS_IPAD?(this.interval=setInterval(function(){r._onProgress()},500)):this._player.on(p.Video.Progress,function(){r._onProgress()}),this._player.on(p.Private.UpdateProgress,function(e){r._updateProgressBar(r.playedNode,e.paramData.targetTime)}),this._player.on(p.Private.UpdateCursorPosition,function(e){r._updateCursorPosition(e.paramData.targetTime)})},_progressMove:function(e){e.preventDefault();var t,r,i=this._getSeconds(e);i!=1/0&&((t=u.formatTime(i)),(r=this._getDistance(e)),this.cursorNode)&&(this._player.trigger(p.Private.ThumbnailShow,{time:i,formatTime:t,left:r,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(e)},_hideProgress:function(e){a.off(this.cursorNode,"mousedown"),a.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;a.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),a.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return(t="function"==typeof this._player.canSeekable?this._player.canSeekable(e):t)},_onMouseOver:function(e){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),(this._cursorHideHandler=null)),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),(this._mouseInProgress=!0)},_onMouseOut:function(e){var t=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),(this._cursorHideHandler=setTimeout(function(){t._player.trigger(p.Private.ThumbnailHide),(t._mouseInProgress=!1)}))},_getSeconds:function(e){var e=this._getDistance(e),t=this.el().offsetWidth,e=this._player.getDuration()?(e/t)*this._player.getDuration():0;return(e=(e=e<0?0:e)>this._player.getDuration()?this._player.getDuration():e)},_getDistance:function(e){for(var t=this.el().offsetLeft,r=this.el();(r=r.offsetParent);){var i=o.getTranslateX(r);t+=r.offsetLeft+i}e=(e.touches?e.touches[0]:e).pageX-t;return(e=e<0?0:e)},_onMouseClick:function(e){var t=this,r=t._getSeconds(e);t._canSeekable(r)?(t._player.exceedPreviewTime(r)&&(r=t._player.getPreviewTime()),(this._seekTime=r),t._updateProgressBar(this.playedNode,r),t._updateCursorPosition(r),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),(this._mouseClickTimeHandle=setTimeout(function(){(t._player._seeking=!0),(t._mouseDown&&!s.IS_MOBILE)||(t._player.trigger(p.Private.SeekStart,{fromTime:t._player.getCurrentTime()}),t._player.trigger(p.Private.EndStart,{toTime:r})),t._player.seek(r),(t._mouseDown=!1),(t._mouseClickTimeHandle=null),(t._inWaitingSeek=!1)},0)),(this._inWaitingSeek=!0)):t._player.trigger(p.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(e){var t=this,e=(e.preventDefault(),(this._mouseDown=!0),s.IS_PC&&this._player.trigger(p.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),a.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),a.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),a.on(this.controlNode,"mouseup",function(e){t._onControlBarMouseUp(e)}),a.on(this.controlNode,"touchend",function(e){t._onControlBarMouseUp(e)}),t._getSeconds(e));t._canSeekable(e)?t._player.exceedPreviewTime(e)&&t._player.getPreviewTime():t._player.trigger(p.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(e){this._onMouseUpIntern(e)},_onControlBarMouseUp:function(e){this._onMouseUpIntern(e)},_onPlayerMouseUp:function(e){this._onMouseUpIntern(e)},_offMouseUp:function(){a.off(this.controlNode,"mousemove"),a.off(this.controlNode,"touchmove"),a.off(this.controlNode,"mouseup"),a.off(this.controlNode,"touchend")},_onMouseUpIntern:function(e){e.preventDefault(),this._offMouseUp();e=(this.playedNode.offsetWidth/this.el().offsetWidth)*this._player.getDuration();this._player.getDuration();isNaN(e)||this._player.seek(e),s.IS_PC&&this._player.trigger(p.Private.EndStart,{toTime:e}),this._autoHideThumbnail()},_onMouseMove:function(e){e.preventDefault(),!this._moving&&s.IS_MOBILE&&(this._player.trigger(p.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),(this._moving=!0));e=this._getSeconds(e);this._player.exceedPreviewTime(e)&&(e=this._player.getPreviewTime()),this._player.seek(e),this._updateProgressBar(this.playedNode,e),this._updateCursorPosition(e),(this._lastSeekTime=e)},_onTimeupdate:function(e){var t=this._player._options.source,t=this._getUrlSuffix(t),r=!1;"mp4"===t&&(s.IS_MAC_SAFARI&&(r=!0),s.IS_IOS&&(r=!0),s.IS_IE11)&&(r=!0),"m3u8"===t&&s.IS_IE11&&(r=!0),"audio"==this._player._options.mediaType&&s.IS_IOS&&(this._player._seeking=!1),((this._inWaitingSeek||(this._player._seeking&&!s.IS_EDGE)||this._progressDown)&&!r)||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(p.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r=this._player.getDuration();1!=this._player._switchSourcing&&r&&(-1!=this._seekTime&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?(this._seekTime=-1):(t=this._seekTime)),1<(t=t/r+0.005)&&(t=1),e)&&o.css(e,"width",100*t+"%")},_updateCursorPosition:function(e){var t,r,i,n=this._player.getDuration();1!=this._player._switchSourcing&&n&&((t=1),(r=10/(i=this._player.el().clientWidth)),0!=i&&(t=1-r),(i=(i=e/n-r)<0?0:i),this.cursorNode)&&(t<i?(o.css(this.cursorNode,"right","0px"),o.css(this.cursorNode,"left","auto")):(o.css(this.cursorNode,"right","auto"),o.css(this.cursorNode,"left",100*i+"%")))},_getUrlSuffix:function(e){return!e||"string"!=typeof e?"":((e=(e.split("?")[0]||"").split("."))[e.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var e=this;s.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),(this._thumbnailHideTimer=setTimeout(function(){e._moving||e._player.trigger(p.Private.ThumbnailHide)},2e3)))},disposeUI:function(){(this._seekTime=-1),(this._lastSeekTime=0),(this._moving=!1),this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),(this.cursorNodeHandler=null)),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),(this._cursorHideHandler=null)),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),(this._mouseClickTimeHandle=null))}});t.exports=e},{"../../config":14,"../../lang/index":23,"../../lib/constants":28,"../../lib/dom":32,"../../lib/event":33,"../../lib/function":35,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],144:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-marker-text")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return(e.innerHTML="<p></p>"),e},bindEvent:function(){var i=this;i._player.on(a.Private.MarkerTextShow,function(e){var t=e.paramData,r=a.Player.MarkerDotOver;i._player.trigger(r,e.paramData),t.progressMarker.isCustomized?i._player.trigger(a.Private.LifeCycleChanged,{type:r,data:e.paramData}):(i._thumbnailShowHanlde&&(n.css(i.el(),"display","none"),clearTimeout(i._thumbnailShowHanlde)),(i._thumbnailShowHanlde=setTimeout(function(){var e;(document.querySelector("#"+i.id()+" p").innerText=t.progressMarker.text||""),t&&(n.css(i.el(),"display","block"),(e=i._player.el().offsetWidth),(left=e*t.left),(width=i.el().offsetWidth),left+width>e?(n.css(i.el(),"right","0px"),n.css(i.el(),"left","auto")):((left=(left-=width/2)<0?0:left),n.css(i.el(),"right","auto"),n.css(i.el(),"left",left+"px")))},30)))}),i._player.on(a.Private.MarkerTextHide,function(e){i._player.trigger(a.Player.MarkerDotOut),i._player.trigger(a.Private.LifeCycleChanged,{type:a.Player.MarkerDotOut,data:""}),i._thumbnailShowHanlde&&clearTimeout(i._thumbnailShowHanlde),n.css(i.el(),"display","none")}),o.on(i._player.tag,"click",function(e){e&&e.target==e.currentTarget&&i._player.trigger(a.Private.MarkerTextHide)}),o.on(i._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&i._player.trigger(a.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),(this._thumbnailShowHanlde=null))}});t.exports=e},{"../../lib/dom":32,"../../lib/event":33,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],145:[function(e,t,r){var i=e("./selector"),s=e("../../../lib/object"),c=(e("../../../lib/util"),e("../../../lib/cookie")),l=e("../../../lib/dom"),u=(e("../../../lib/event"),e("../../../lib/constants")),p=e("../../../lang/index"),o=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){(this.Name=p.get("Quality")),(this.Type="quality"),(this.Tooltip=p.get("Quality_Switch_To")),i.call(this,e,t),(this._isMasterLevel=!1)},showTip:function(e,t){this._player.trigger(o.Private.Info_Show,{text:e,duration:t,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var n=this,e=(this._player.on(o.Private.QualityChange,function(e){var t,r,i=0<n._player._urls.length?n._player._urls:n._player._qualityService.levels;(data=e.paramData).levelSwitch?((t=data.desc||data.bitrate),(n._autoSWitchDesc=t),n._updateText(t)):0<n._player._currentPlayIndex&&((n._autoSWitchDesc=""),(r=i[(t=n._player._currentPlayIndex)-1].desc),(i=i[t].desc),n.showTip(r+e.paramData+i,1e3),n._player.trigger(o.Private.SelectorValueChange,{type:n.Type,text:i}))}),document.querySelector("#"+n.id()+" .selector-list"));this._player.on(o.Player.LevelSwitch,function(){l.addClass(e,"disabled")}),this._player.on(o.Player.LevelSwitched,function(){l.removeClass(e,"disabled")})},generateList:function(e){var n,t=this._player._urls,o=this._player._currentPlayIndex,r=this._player._qualityService.levels,a=(0<r.length&&((this._isMasterLevel=!0),this._player._options.isVBR)&&(o=(t=r).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<t.length&&((n=this),s.each(t,function(e,t){var r,i;(e.desc||e.bitrate)&&((r=l.createEl.call(this,"li",{key:e.Url,index:t,text:e.desc||e.bitrate})),(i=l.createEl.call(this,"span",{key:e.Url,index:t,text:e.desc||e.bitrate})),t==o&&(l.addClass(r,"current"),(n._previousSelection=r)),(i.innerText=e.desc||e.bitrate),r.appendChild(i),a.appendChild(r))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(e){if(((this._player._switchSourcing=!0),this._isMasterLevel)){for(var t,r=this._player._qualityService.levels,i=0;i<r.length;i++)r[i].Url==e&&r[i].desc!=p.get("Auto")&&((t=r[i]),this._resetAutoText());this._player._switchLevel?this._player._switchLevel(e,t||{isAuto:!0}):((n=this._player.autoplay||"pause"!=this._player._status),this._player._loadByUrlInner(e,this._player.getCurrentTime(),n))}else{for(var n,o=this._player._urls.length,a=this._player._currentPlayIndex,s=-1,i=0;i<o;i++)if(this._player._urls[i].Url==e){(s=this._player._currentPlayIndex=i),c.set(u.SelectedStreamLevel,this._player._urls[i].definition,365);break}a!=s&&-1<s&&((a=this._player.getCurrentTime()),(n=this._player.autoplay||"pause"!=this._player._status),this._player.autoplay||0!=a||(n=!1),this._player._switchLevel&&!this._player._options.isLive?this._player._switchLevel(e):this._player._loadByUrlInner(e,a,n,!0))}var l=this;setTimeout(function(){l._player._switchSourcing=!1})},_updateText:function(e){var t=document.querySelector("#"+this.id()+" .selector-list .current"),r=document.querySelector("#"+this.id()+" .selector-list .current span"),i=p.get("Auto");r&&r.innerText&&-1<r.innerText.indexOf(i)&&((r.innerText=i+=e?"("+e+")":""),t)&&(t.text=i)},_resetAutoText:function(){for(var e=p.get("Auto"),t=document.querySelectorAll("#"+this.id()+" .selector-list li"),r=0;r<=t.length;r++){var i=t[r],n=i.querySelector("span");if(-1<n.innerText.indexOf(e)){(n.innerText=e),(i.text=e);break}}}});t.exports=e},{"../../../lang/index":23,"../../../lib/constants":28,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"./selector":151}],146:[function(e,t,r){var i=e("./selector"),a=e("../../../lib/object"),s=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),n=(e("../../../lib/event"),e("./util"),e("../../../lang/index")),l=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){(this.Name=n.get("AudioTrack")),(this.Type="audio"),(this.Tooltip=n.get("AudioTrack_Switch_To")),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var n=this,o=document.querySelector("#"+n.id()+" .selector-list");document.querySelector("#"+n.id()+" .header");n._player.on(l.Private.ChangeURL,function(){n._hasGeneratedList=!1}),this._player.on(l.Player.AudioTrackSwitch,function(){s.addClass(o,"disabled")}),this._player.on(l.Player.AudioTrackSwitched,function(){s.removeClass(o,"disabled")}),n._player.on(l.Player.AudioTrackReady,function(e){!n._hasGeneratedList&&(n._clear(),(e=e.paramData))&&(a.each(e,function(e,t){var r=s.createEl.call(n,"li",{key:e.value,text:e.text}),i=s.createEl.call(n,"span",{key:e.value,text:e.text});(i.innerText=e.text),r.appendChild(i),o.appendChild(r)}),(n._hasGeneratedList=!0))})},execute:function(e){this._player._audioTrackService.switch(e)}});t.exports=e},{"../../../lang/index":23,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"./selector":151,"./util":153}],147:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/dom"),e("../../../player/base/event/eventtype")),o=e("./list"),a=e("../../../lang/index"),s=e("../util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-setting-btn"),(this._settingList=new o(e,t)),e.addChild(this._settingList,t)},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",function(){e._settingList.isOpened?e._player.trigger(n.Private.SettingListHide):e._player.trigger(n.Private.SettingListShow),e._player.trigger(n.Private.SelectorHide),e._player.trigger(n.Private.MarkerTextHide),e._player.trigger(n.Private.VolumeVisibilityChange,"")}),s.registerTooltipEvent.call(this,this.el(),a.get("Setting"))}});t.exports=e},{"../../../lang/index":23,"../../../lib/dom":32,"../../../player/base/event/eventtype":70,"../../component":130,"../util":159,"./list":150}],148:[function(e,t,r){var i=e("./selector"),s=e("../../../lib/object"),l=e("../../../lib/dom"),n=(e("../../../lib/event"),e("./util"),e("../../../lib/cookie")),o=e("../../../lib/constants"),a=e("../../../lang/index"),c=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){(this.Name=a.get("Subtitle")),(this.Type="cc"),(this.Tooltip=a.get("CC_Switch_To")),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var r=this;this._player.on(c.Private.CCStateChanged,function(e){var t=e.paramData.value,e=e.paramData.lang,e=("on"==t&&e?(r._backCCText=e):"off"==t&&""==r._backCCText&&(r._backCCText=r._previousSelection.text),"Off");"on"==t&&(e=r._backCCText),r._player.trigger(c.Private.SelectorUpdateList,{type:"cc",text:e})})},generateList:function(n){var o=document.querySelector("#"+this.id()+" .selector-list"),e=this._player._ccService.tracks,a=this;s.each(e,function(e,t){var r=l.createEl.call(this,"li",{key:e.value,text:e.text}),i=l.createEl.call(this,"span",{key:e.value,text:e.text});e.text==n&&(l.addClass(r,"current"),(a._previousSelection=r)),(i.innerText=e.text),r.appendChild(i),o.appendChild(r)})},execute:function(e){(this._backCCText=""),n.set(o.SelectedCC,e,365),this._player._ccService.switch(e)}});t.exports=e},{"../../../lang/index":23,"../../../lib/constants":28,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../player/base/event/eventtype":70,"./selector":151,"./util":153}],149:[function(e,t,r){t.exports={CC:e("./cc"),Speed:e("./speed"),Quality:e("./Quality"),Audio:e("./audio")}},{"./Quality":145,"./audio":146,"./cc":148,"./speed":152}],150:[function(e,t,r){var o=e("../../component"),n=e("../../../lib/dom"),a=e("../../../lib/ua"),s=e("../../../lib/event"),l=e("../../../player/base/event/eventtype"),i=e("./export"),c=e("./util"),u=e("../../../lang/index"),e=o.extend({init:function(e,t){for(var r in((this.isOpened=!1),o.call(this,e,t),this.addClass(t.className||"prism-setting-list"),i)){r=new i[r](e,t);e.addChild(r,t)}},createEl:function(){var e=o.prototype.createEl.call(this,"div"),t="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",r=t.replace(/{type}/g,"speed").replace("{value}",u.get("Speed")),i=t.replace(/{type}/g,"cc").replace("{value}",u.get("Subtitle")),n=t.replace(/{type}/g,"audio").replace("{value}",u.get("AudioTrack")),t=t.replace(/{type}/g,"quality").replace("{value}",u.get("Quality"));return(e.innerHTML=r+i+n+t),e},bindEvent:function(){function t(){i._player.trigger(l.Private.SettingListHide),(i.isOpened=!1)}function r(e){e&&e.text&&(document.querySelector("#"+i.id()+" .prism-setting-"+e.type+" .current-setting").innerText=e.text)}var i=this,e=(this._player.on(l.Private.SettingListShow,function(e){i.isOpened=!0;e=e.paramData;r(e),n.css(i.el(),"display","block")}),this._player.on(l.Private.UpdateToSettingList,function(e){e=e.paramData;r(e)}),this._player.on(l.Private.SelectorUpdateList,function(e){e=e.paramData;r(e),i._player.trigger(l.Private.SelectorValueChange,e)}),this._player.on(l.Private.SettingListHide,function(){(i.isOpened=!1),n.css(i.el(),"display","none")}),s.on(this.el(),"click",function(e){i._player.trigger(l.Private.SettingListHide);var e=e.srcElement||e.target;(e=c.findItemElementForList(e))&&((e=e.getAttribute("type")),i._player.trigger(l.Private.SelectorShow,{type:e}))}),a.IS_MOBILE?"touchleave":"mouseleave");s.on(this.el(),e,function(){t()}),s.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t()}),s.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t()}),this._player.on(l.Private.QualityChange,function(e){var t,r,e=e.paramData;e.levelSwitch&&((t=document.querySelector("#"+i.id()+" .prism-setting-quality .current-setting")),(r=u.get("Auto")),-1<t.innerText.indexOf(r))&&(t.innerText=r+(e.desc?"("+e.desc+")":""))})}});t.exports=e},{"../../../lang/index":23,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/ua":49,"../../../player/base/event/eventtype":70,"../../component":130,"./export":149,"./util":153}],151:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/object"),e("../../../lib/util"),e("../../../lib/ua")),a=(e("../../../lib/cookie"),e("../../../lib/dom")),s=e("../../../lib/event"),l=e("./util"),c=(e("../../../lang/index"),e("../../../player/base/event/eventtype")),e=i.extend({init:function(e,t){(this._hasGeneratedList=!1),(this._previousSelection=null),(this._backupSelector=""),i.call(this,e,t),(this.className=t.className||"prism-"+this.Type+"-selector prism-setting-selector"),this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>'),e)},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var o=this,e=document.querySelector("#"+o.id()+" .selector-list"),t=document.querySelector("#"+o.id()+" .header");function r(){o._hasGeneratedList||(o._clear(),o.generateList(o._backupSelector),(o._backupSelector=""),(o._hasGeneratedList=!0))}this._player.on(c.Private.ChangeURL,function(){o._hasGeneratedList=!1}),s.on(t,"click",function(){o._player.trigger(c.Private.SelectorHide),o._player.trigger(c.Private.SettingListShow,{type:o.Type,text:o._previousSelection?o._previousSelection.text:""})}),s.on(e,"click",function(e){var e=e.srcElement||e.target,t=e.key,r=e.text;void 0!==r&&(o._previousSelection&&a.removeClass(o._previousSelection,"current"),(o._previousSelection=l.findliElementForSelector(e)),a.addClass(o._previousSelection,"current"),o.execute&&o.execute(t),(e=o.Tooltip+"<span>"+r+"</span>"),o._player.trigger(c.Private.Info_Show,{text:e,duration:1e3,align:"lb"}))}),o._player.on(c.Private.SelectorHide,function(){i()}),o._player.on(c.Private.SelectorValueChange,function(e){var t=e.paramData;if(t&&t.type==o.Type){var r=document.querySelectorAll("#"+o.id()+" .selector-list li");if(r){var i=r.length;0==i&&(o._backupSelector=t.text);for(var n=0;n<i;n++)if(r[n].text==t.text){o._previousSelection&&a.removeClass(o._previousSelection,"current"),a.addClass(r[n],"current"),(o._previousSelection=r[n]);break}}}}),o._player.on(c.Private.SettingListShow,function(){r()}),o._player.on(c.Private.SelectorGenerateList,function(e){var t=e.paramData&&e.paramData.type,e=e.paramData&&e.paramData.value;t===o.Type&&((o._hasGeneratedList=!1),e&&(o._backupSelector=e),r())}),o._player.on(c.Private.SelectorShow,function(e){(e=e.paramData).type==o.Type&&((e=document.querySelector("#"+o._player.id()+" .prism-"+e.type+"-selector")),o._hasGeneratedList||r(),a.css(e,"display","block"))});var i=function(){a.css(o.el(),"display","none"),o._player.trigger(c.Private.UpdateToSettingList,{type:o.Type,text:o._previousSelection?o._previousSelection.text:""})},t=n.IS_MOBILE?"touchleave":"mouseleave";s.on(this.el(),t,function(){i()}),s.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&i()}),s.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&i()})},setSelected:function(e){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});t.exports=e},{"../../../lang/index":23,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/ua":49,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"../../component":130,"./util":153}],152:[function(e,t,r){var i=e("./selector"),a=e("../../../lib/object"),s=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),l=(e("../../../lib/event"),e("./util"),e("../../../lib/constants")),c=e("../../../lang/index"),e=(e("../../../player/base/event/eventtype"),i.extend({init:function(e,t){(this.Name=c.get("Speed")),(this.Type="speed"),(this.Tooltip=c.get("Speed_Switch_To")),i.call(this,e,t)},generateList:function(){var n=document.querySelector("#"+this.id()+" .selector-list"),e=l.SpeedLevels,o=this;a.each(e,function(e,t){var r=s.createEl.call(this,"li",{key:e.key,text:e.text}),i=s.createEl.call(this,"span",{key:e.key,text:e.text});(i.innerText=e.text),e.text==c.get("Speed_1X_Text")&&(s.addClass(r,"current"),(o._previousSelection=r)),r.appendChild(i),n.appendChild(r)})},execute:function(e){this._player.setSpeed(e)}}));t.exports=e},{"../../../lang/index":23,"../../../lib/constants":28,"../../../lib/cookie":29,"../../../lib/dom":32,"../../../lib/event":33,"../../../lib/object":42,"../../../lib/util":51,"../../../player/base/event/eventtype":70,"./selector":151,"./util":153}],153:[function(e,r,t){(r.exports.findliElementForSelector=function(e){var t;return e&&"li"!=e.tagName.toLowerCase()?(t=e.parentElement)&&"li"==t.tagName.toLowerCase()?t:null:e}),(r.exports.findliElementByKey=function(e,t){document.querySelectors(e);return null}),(r.exports.findItemElementForList=function(e){var t;return(!e||-1<e.className.indexOf("prism-setting-item")||((t=e.parentElement)&&(e=r.exports.findItemElementForList(t))),e)})},{}],154:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),u=e("../../lib/util"),o=e("../../lang/index"),p=e("../../player/base/event/eventtype"),a=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-snapshot-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var l=this,c=this._player;c.on(p.Private.Snapshot_Hide,function(){n.css(l._el,"display","none")}),a.registerTooltipEvent.call(this,this.el(),o.get("Snapshot")),this.on("click",function(){l.trigger(p.Player.Snapshoting);var e=document.createElement("canvas"),t=c.tag,r=t.videoWidth,i=t.videoHeight,n=c._getSanpshotMatric(),o=((e.width=n.width||r),(e.height=n.height||i),c.getCurrentTime()),a=e.getContext("2d"),s=(a.save(),c.getImage()),s=("vertical"==s?(a.translate(0,e.height),a.scale(1,-1)):"horizon"==s&&(a.translate(e.width,0),a.scale(-1,1)),t),t=(c._splayer&&(s=c._el.querySelector("canvas")),a.drawImage(s,0,0,r,i),a.restore(),d(a,c.getOptions()),""),s="";try{t=e.toDataURL("image/jpeg",n.rate||1)}catch(e){s=e}(r=""),(i="");t&&((a=(r=t).substr(r.indexOf(",")+1)),(i=u.toBinary(a))),l.trigger(p.Player.Snapshoted,{time:o,base64:r,binary:i,error:s})})}}),d=function(e,t){t=t.snapshotWatermark;t&&t.text&&((e.font=t.font),t.fillColor&&((e.fillStyle=t.fillColor),e.fillText(t.text,t.left,t.top)),t.strokeColor&&((e.strokeStyle=t.strokeColor),e.strokeText(t.text,t.left,t.top)),e.stroke())};t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],155:[function(e,t,r){var i=e("../component"),e=(e("../../lib/dom"),e("../../player/base/event/eventtype"),i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-text-overlay")},createEl:function(){return i.prototype.createEl.call(this,"div")},_hide:function(e){},_show:function(e){},bindEvent:function(){}}));t.exports=e},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130}],156:[function(e,t,r){var i=e("../component"),a=(e("../../lib/util"),e("../../lib/dom")),n=e("../../lib/event"),s=(e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),l=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-thumbnail")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return(e.innerHTML="<img></img><span></span>"),e},bindEvent:function(){var o=this,e=(n.on(this._el,"mousemove",function(e){e.preventDefault()}),n.on(this._el,"touchmove",function(e){e.preventDefault()}),o._player.on(s.Private.ThumbnailLoaded,function(e){var t,r,i,e=e.paramData;e&&0<e.length&&((t=o._player._thumbnailService.makeUrl(e[0].text)),o._player.log("THUMBNAILSTART",{tu:encodeURIComponent(t)}),(r=new Date().getTime()),e[0].isBig?(a.css(o.el(),"background","url("+t+")"),a.css(o.el(),"width",e[0].w+"px"),a.css(o.el(),"height",e[0].h+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-r})):(((i=document.querySelector("#"+o.id()+" img")).onload=function(){var e=i.width,t=i.height;a.css(o.el(),"width",e+"px"),a.css(o.el(),"height",t+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:new Date().getTime()-r})}),(i.src=t)))}),l.throttle(function(e){var t,r,i,e=e[0],n=document.querySelector("#"+o.id()+" span"),e=e.paramData;(n.innerText=e.formatTime),e&&((t=o._player._thumbnailService.findAvailableCue(e.time))?t.isBig?((r=o._player._thumbnailService.makeUrl(t.text)),a.css(o.el(),"background","url("+r+")"),t.w,t.h,(i=-1*t.x+"px "+ -1*t.y+"px"),a.css(o.el(),"background-position",i)):((i=document.querySelector("#"+o.id()+" img")),(r=o._player._thumbnailService.makeUrl(t.text)),i.src!=r&&(i.src=r)):(a.css(o.el(),"border","none"),a.css(n,"left","0px")),a.css(o.el(),"display","block"),(i=0),(r=(t?o.el():n).offsetWidth),(i=e.left+r>e.progressWidth?e.left-r:(i=e.left-r/2)<0?0:i),a.css(o.el(),"left",i+"px"))},30));o._player.on(s.Private.ThumbnailShow,e),o._player.on(s.Private.ThumbnailHide,function(e){a.css(o.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],157:[function(e,t,r){var i=e("../component"),n=e("../../lib/util"),o=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-time-display")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>'),e)},bindEvent:function(){var t=this;this._player.on(o.Video.DurationChange,function(){var e=n.formatTime(t._player.getDisplayDuration());e?((document.querySelector("#"+t.id()+" .time-bound").style.display="inline"),(document.querySelector("#"+t.id()+" .duration").style.display="inline"),(document.querySelector("#"+t.id()+" .duration").innerText=e)):((document.querySelector("#"+t.id()+" .duration").style.display="none"),(document.querySelector("#"+t.id()+" .time-bound").style.display="none"))}),this._player.on(o.Video.TimeUpdate,function(){var e=t._player.getCurrentTime(),e=n.formatTime(e);document.querySelector("#"+t.id()+" .current-time")&&(e?((document.querySelector("#"+t.id()+" .current-time").style.display="inline"),(document.querySelector("#"+t.id()+" .current-time").innerText=e)):(document.querySelector("#"+t.id()+" .current-time").style.display="none"))})}});t.exports=e},{"../../lib/util":51,"../../player/base/event/eventtype":70,"../component":130}],158:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),a=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-tooltip")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return(e.innerText="\u63d0\u793a\u4fe1\u606f"),e},bindEvent:function(){var n=this;n._player.on(a.Private.TooltipShow,function(e){var t=document.querySelector("#"+n.id()),e=e.paramData,r=((t.innerText=e.text),o.css(t,"display","block"),t.offsetWidth),i=document.querySelector("#"+n._player.id()+" .prism-controlbar");i&&((i=i.offsetWidth),e.left+r>i?o.css(t,"left",i-r+"px"):o.css(t,"left",e.left-(r-e.width)/2+"px"))}),n._player.on(a.Private.TooltipHide,function(e){var t=document.querySelector("#"+n.id());o.css(t,"display","none")})}});t.exports=e},{"../../lib/dom":32,"../../player/base/event/eventtype":70,"../component":130}],159:[function(e,t,r){var i=e("../../lib/event"),s=e("../../player/base/event/eventtype");(t.exports.registerTooltipEvent=function(e,n){function o(){a._controlbarTooltipHandler&&(clearTimeout(a._controlbarTooltipHandler),(a._controlbarTooltipHandler=null))}var a=this;i.on(this.el(),"mouseover",function(e){o(),(a._controlbarTooltipHandler=setTimeout(function(){a._player.trigger(s.Private.TooltipHide)},4e3));var t=a.el().offsetLeft,r=a.el().offsetWidth,i=n;"function"==typeof n&&(i=n.call(this)),a._player.trigger(s.Private.TooltipShow,{left:t,width:r,text:i})}),i.on(this.el(),"mouseout",function(){o(),a._player.trigger(s.Private.TooltipHide)})}),(t.exports.throttle=function(r,i){var n=Date.now();return function(){var e=arguments,t=Date.now();i<=t-n&&(r(e),(n=t))}}),(t.exports.debounce=function(r,i){var n;return function(){var e=this,t=arguments;clearTimeout(n),(n=setTimeout(function(){r.apply(e,t)},i))}})},{"../../lib/event":33,"../../player/base/event/eventtype":70}],160:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("./util"),l=e("../../lang/index"),c=e("./volumecontrol"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume");var r=new c(e,t);e.addChild(r,t),(this.volumeControl=r)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>'),e)},bindEvent:function(){var r=this,i=r._player,e=((this.icon=document.querySelector("#"+r.id()+"  .volume-icon")),s.registerTooltipEvent.call(this,this.el(),function(){return r._player.muted()||0==r._player.getVolume()?l.get("Muted"):l.get("Volume")}),o.on(this.icon,"click",function(e){var t;r.volumeControl._shown?i.muted()?i.unMute():i.mute():((t=r.el().offsetLeft),r._player.trigger(a.Private.SettingListHide),r._player.trigger(a.Private.SelectorHide),r._player.trigger(a.Private.VolumeVisibilityChange,t),r._player.trigger(a.Private.MarkerTextHide))}),document.querySelector("#"+r.id()+"  .long-horizontal")),t=document.querySelector("#"+r.id()+"  .short-horizontal");o.on(this.el(),"mouseover",function(){n.removeClass(e,"volume-hover-animation"),setTimeout(function(){n.addClass(e,"volume-hover-animation")}),setTimeout(function(){n.removeClass(e,"volume-hover-animation"),n.addClass(t,"volume-hover-animation"),setTimeout(function(){n.removeClass(t,"volume-hover-animation"),n.addClass(e,"volume-hover-animation")},300)},300)}),o.on(window,"resize",function(){var e;r.volumeControl._shown&&((e=r.el().offsetLeft),r._player.trigger(a.Private.VolumeUpdatePosition,e))})}});t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../player/base/event/eventtype":70,"../component":130,"./util":159,"./volumecontrol":161}],161:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),e=(e("./util"),e("../../lang/index"),i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume-control"),(this._shown=!1)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return((e.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>'),e)},bindEvent:function(){var r=this;(this.icon=document.querySelector("#"+r._player.id()+"  .volume-icon")),(this.control=document.querySelector("#"+r.id())),(this.volumnValue=document.querySelector("#"+r.id()+"  .volume-value")),(this.volumnRange=document.querySelector("#"+r.id()+"  .volume-range")),(this.volumnCursor=document.querySelector("#"+r.id()+"  .volume-cursor")),this._player.on(a.Private.VolumeVisibilityChange,function(e){var t,e=e.paramData;!r._shown&&e?((t=r._player.getVolume()),r._setVolumnUI(t),n.css(r.control,"display","block"),e&&r._updatePosition(e),(r._shown=!0)):r._hide()}),this._player.on(a.Private.VolumeUpdatePosition,function(e){e=e.paramData;r._shown&&r._updatePosition(e)}),this._player.on(a.Private.ControlBarClick,function(e){n.hasClass(e.paramData.target,"prism-controlbar-bg")&&r._hide()}),o.on(this.volumnRange,"click",function(e){e=n.getPointerPosition(r.volumnRange,e).y;e<0||1<e||(r._setVolumnUI((e=1<(e=e<0?0:e)?1:e)),r._setMuteUI(e),r._player.setVolume(e))}),o.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&r._hide()}),o.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&r._hide()}),o.on(this.volumnCursor,"mousedown",function(e){r._onMouseDown(e)}),o.on(this.volumnCursor,"touchstart",function(e){r._onMouseDown(e)}),this._player.on(a.Private.VolumnChanged,function(e){e=e.paramData;-1<e&&r._setVolumnUI(e),r._setMuteUI(e)}),o.on(this.control,"mouseleave",function(){r._offEvent(),r._hide()}),o.on(this.control,"mouseover",function(){n.addClass(r.control,"hover")}),(r._rangeBottom=r._getBottom())},_getBottom:function(){var e;return window.getComputedStyle?((e=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom")),parseFloat(e)):26},_onMouseDown:function(e){var t=this;e.preventDefault(),o.on(this.control,"mousemove",function(e){t._onMouseMove(e)}),o.on(this.control,"touchmove",function(e){t._onMouseMove(e)}),o.on(this._player.tag,"mouseup",function(e){t._onMouseUp(e)}),o.on(this._player.tag,"touchend",function(e){t._onMouseUp(e)}),o.on(this.control,"mouseup",function(e){t._onMouseUp(e)}),o.on(this.control,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&((e=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2)),this._player.setVolume(e),this._setMuteUI(e))},_onMouseMove:function(e){e.preventDefault();e=n.getPointerPosition(this.volumnRange,e).y;e<0||1<e||this._setVolumnUI((e=1<(e=e<0?0:e)?1:e))},_getPosition:function(e){for(var t=this.volumnRange,r=0;(t=t.offsetParent);)r+=t.offsetTop;var i=this.volumnRange.offsetHeight,n=this.volumnCursor.offsetHeight,o=(e.touches?e.touches[0]:e).pageY;return((i-((o=i<o-r?e.clientY:o)-r)+n)/this.volumnRange.offsetHeight)},_offEvent:function(){o.off(this._player.tag,"mouseup"),o.off(this._player.tag,"touchend"),o.off(this.control,"mousemove"),o.off(this.control,"touchmove"),o.off(this.control,"mouseup"),o.off(this.control,"touchend")},_setMuteUI:function(e){isNaN(e)||(0==e||-1==e?n.addClass(this.icon,"mute"):n.removeClass(this.icon,"mute"))},_setVolumnUI:function(e){isNaN(e)||(n.css(this.volumnValue,"height",100*e+"%"),n.css(this.volumnCursor,"bottom",100*(e=1==e?0.99:e)+"%"))},_hide:function(){n.css(this.control,"display","none"),(this._shown=!1)},_updatePosition:function(e){n.css(this.control,"left",e-5+"px")}}));t.exports=e},{"../../lang/index":23,"../../lib/dom":32,"../../lib/event":33,"../../player/base/event/eventtype":70,"../component":130,"./util":159}],162:[function(e,t,r){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display"),liveShiftProgress:e("../commonui/liveshiftprogress"),liveShiftTimeDisplay:e("../commonui/livetimedisplay"),setting:e("./component/setting/button"),subtitle:e("./component/cc-button"),thumbnail:e("./component/thumbnail"),tooltip:e("./component/tooltip")}},{"../commonui/liveshiftprogress":12,"../commonui/livetimedisplay":13,"./component/big-play-button":131,"./component/cc-button":132,"./component/controlbar":133,"./component/error-display":135,"./component/fullscreen-button":136,"./component/h5-loading":137,"./component/info-display":138,"./component/live-display":140,"./component/play-button":142,"./component/progress":143,"./component/setting/button":147,"./component/snapshot":154,"./component/thumbnail":156,"./component/time-display":157,"./component/tooltip":158,"./component/volume":160}]},{},[15])(15)});